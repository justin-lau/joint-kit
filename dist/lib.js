"use strict";function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}function getRawTag(e){var t=hasOwnProperty$3.call(e,symToStringTag$1),r=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var n=!0}catch(e){}var i=nativeObjectToString.call(e);return n&&(t?e[symToStringTag$1]=r:delete e[symToStringTag$1]),i}function objectToString(e){return nativeObjectToString$1.call(e)}function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?_getRawTag(e):_objectToString(e)}function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function isFunction(e){if(!isObject_1(e))return!1;var t=_baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}function toSource(e){if(null!=e){try{return funcToString$1.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function baseIsNative(e){return!(!isObject_1(e)||_isMasked(e))&&(isFunction_1(e)?reIsNative:reIsHostCtor).test(_toSource(e))}function getValue(e,t){return null==e?void 0:e[t]}function getNative(e,t){var r=_getValue(e,t);return _baseIsNative(r)?r:void 0}function baseAssignValue(e,t,r){"__proto__"==t&&_defineProperty?_defineProperty(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function eq(e,t){return e===t||e!==e&&t!==t}function assignValue(e,t,r){var n=e[t];hasOwnProperty$1.call(e,t)&&eq_1(n,r)&&(void 0!==r||t in e)||_baseAssignValue(e,t,r)}function copyObject(e,t,r,n){var i=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),i?_baseAssignValue(r,s,l):_assignValue(r,s,l)}return r}function identity(e){return e}function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function overRest(e,t,r){return t=nativeMax(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=nativeMax(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(o),_apply(e,this,s)}}function constant(e){return function(){return e}}function shortOut(e){var t=0,r=0;return function(){var n=nativeNow(),i=HOT_SPAN-(n-r);if(r=n,i>0){if(++t>=HOT_COUNT)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function baseRest(e,t){return _setToString(_overRest(e,t,identity_1),e+"")}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isArrayLike(e){return null!=e&&isLength_1(e.length)&&!isFunction_1(e)}function isIndex(e,t){return!!(t=null==t?MAX_SAFE_INTEGER$1:t)&&("number"==typeof e||reIsUint.test(e))&&e>-1&&e%1==0&&e<t}function isIterateeCall(e,t,r){if(!isObject_1(r))return!1;var n=typeof t;return!!("number"==n?isArrayLike_1(r)&&_isIndex(t,r.length):"string"==n&&t in r)&&eq_1(r[t],e)}function createAssigner(e){return _baseRest(function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,o&&_isIterateeCall(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,a)}return t})}function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$5)}function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function isObjectLike(e){return null!=e&&"object"==typeof e}function baseIsArguments(e){return isObjectLike_1(e)&&_baseGetTag(e)==argsTag}function stubFalse(){return!1}function baseIsTypedArray(e){return isObjectLike_1(e)&&isLength_1(e.length)&&!!typedArrayTags[_baseGetTag(e)]}function baseUnary(e){return function(t){return e(t)}}function arrayLikeKeys(e,t){var r=isArray_1(e),n=!r&&isArguments_1(e),i=!r&&!n&&isBuffer_1(e),a=!r&&!n&&!i&&isTypedArray_1(e),o=r||n||i||a,s=o?_baseTimes(e.length,String):[],l=s.length;for(var c in e)!t&&!hasOwnProperty$4.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_isIndex(c,l))||s.push(c);return s}function overArg(e,t){return function(r){return e(t(r))}}function baseKeys(e){if(!_isPrototype(e))return _nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty$6.call(e,r)&&"constructor"!=r&&t.push(r);return t}function keys(e){return isArrayLike_1(e)?_arrayLikeKeys(e):_baseKeys(e)}function nativeKeysIn(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}function baseKeysIn(e){if(!isObject_1(e))return _nativeKeysIn(e);var t=_isPrototype(e),r=[];for(var n in e)("constructor"!=n||!t&&hasOwnProperty$7.call(e,n))&&r.push(n);return r}function keysIn$1(e){return isArrayLike_1(e)?_arrayLikeKeys(e,!0):_baseKeysIn(e)}function isSymbol(e){return"symbol"==typeof e||isObjectLike_1(e)&&_baseGetTag(e)==symbolTag}function isKey(e,t){if(isArray_1(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol_1(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}function hashClear(){this.__data__=_nativeCreate?_nativeCreate(null):{},this.size=0}function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function hashGet(e){var t=this.__data__;if(_nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty$8.call(t,e)?t[e]:void 0}function hashHas(e){var t=this.__data__;return _nativeCreate?void 0!==t[e]:hasOwnProperty$9.call(t,e)}function hashSet(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=_nativeCreate&&void 0===t?HASH_UNDEFINED$1:t,this}function Hash(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq_1(e[r][0],t))return r;return-1}function listCacheDelete(e){var t=this.__data__,r=_assocIndexOf(t,e);return!(r<0)&&(r==t.length-1?t.pop():splice.call(t,r,1),--this.size,!0)}function listCacheGet(e){var t=this.__data__,r=_assocIndexOf(t,e);return r<0?void 0:t[r][1]}function listCacheHas(e){return _assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,t){var r=this.__data__,n=_assocIndexOf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function ListCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function mapCacheClear(){this.size=0,this.__data__={hash:new _Hash,map:new(_Map||_ListCache),string:new _Hash}}function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function getMapData(e,t){var r=e.__data__;return _isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}function mapCacheDelete(e){var t=_getMapData(this,e).delete(e);return this.size-=t?1:0,t}function mapCacheGet(e){return _getMapData(this,e).get(e)}function mapCacheHas(e){return _getMapData(this,e).has(e)}function mapCacheSet(e,t){var r=_getMapData(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function MapCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(memoize.Cache||_MapCache),r}function memoizeCapped(e){var t=memoize_1(e,function(e){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),e}),r=t.cache;return t}function arrayMap(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function baseToString(e){if("string"==typeof e)return e;if(isArray_1(e))return _arrayMap(e,baseToString)+"";if(isSymbol_1(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function toString(e){return null==e?"":_baseToString(e)}function castPath(e,t){return isArray_1(e)?e:_isKey(e,t)?[e]:_stringToPath(toString_1(e))}function toKey(e){if("string"==typeof e||isSymbol_1(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY$1?"-0":t}function baseGet(e,t){for(var r=0,n=(t=_castPath(t,e)).length;null!=e&&r<n;)e=e[_toKey(t[r++])];return r&&r==n?e:void 0}function get(e,t,r){var n=null==e?void 0:_baseGet(e,t);return void 0===n?r:n}function baseAt(e,t){for(var r=-1,n=t.length,i=Array(n),a=null==e;++r<n;)i[r]=a?void 0:get_1(e,t[r]);return i}function arrayPush(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function isFlattenable(e){return isArray_1(e)||isArguments_1(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}function baseFlatten(e,t,r,n,i){var a=-1,o=e.length;for(r||(r=_isFlattenable),i||(i=[]);++a<o;){var s=e[a];t>0&&r(s)?t>1?baseFlatten(s,t-1,r,n,i):_arrayPush(i,s):n||(i[i.length]=s)}return i}function flatten(e){return(null==e?0:e.length)?_baseFlatten(e,1):[]}function flatRest(e){return _setToString(_overRest(e,void 0,flatten_1),e+"")}function baseAssign(e,t){return e&&_copyObject(t,keys_1(t),e)}function create(e,t){var r=_baseCreate(e);return null==t?r:_baseAssign(r,t)}function customDefaultsAssignIn(e,t,r,n){return void 0===e||eq_1(e,objectProto$12[r])&&!hasOwnProperty$10.call(n,r)?t:e}function stackClear(){this.__data__=new _ListCache,this.size=0}function stackDelete(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}function stackSet(e,t){var r=this.__data__;if(r instanceof _ListCache){var n=r.__data__;if(!_Map||n.length<LARGE_ARRAY_SIZE-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new _MapCache(n)}return r.set(e,t),this.size=r.size,this}function Stack(e){var t=this.__data__=new _ListCache(e);this.size=t.size}function assignMergeValue(e,t,r){(void 0===r||eq_1(e[t],r))&&(void 0!==r||t in e)||_baseAssignValue(e,t,r)}function createBaseFor(e){return function(t,r,n){for(var i=-1,a=Object(t),o=n(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===r(a[l],l,a))break}return t}}function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new _Uint8Array(t).set(new _Uint8Array(e)),t}function cloneTypedArray(e,t){var r=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function copyArray(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function initCloneObject(e){return"function"!=typeof e.constructor||_isPrototype(e)?{}:_baseCreate(_getPrototype(e))}function isArrayLikeObject(e){return isObjectLike_1(e)&&isArrayLike_1(e)}function isPlainObject(e){if(!isObjectLike_1(e)||_baseGetTag(e)!=objectTag$1)return!1;var t=_getPrototype(e);if(null===t)return!0;var r=hasOwnProperty$11.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&funcToString$2.call(r)==objectCtorString}function toPlainObject(e){return _copyObject(e,keysIn_1(e))}function baseMergeDeep(e,t,r,n,i,a,o){var s=e[r],l=t[r],c=o.get(l);if(c)_assignMergeValue(e,r,c);else{var u=a?a(s,l,r+"",e,t,o):void 0,_=void 0===u;if(_){var f=isArray_1(l),h=!f&&isBuffer_1(l),d=!f&&!h&&isTypedArray_1(l);u=l,f||h||d?isArray_1(s)?u=s:isArrayLikeObject_1(s)?u=_copyArray(s):h?(_=!1,u=_cloneBuffer(l,!0)):d?(_=!1,u=_cloneTypedArray(l,!0)):u=[]:isPlainObject_1(l)||isArguments_1(l)?(u=s,isArguments_1(s)?u=toPlainObject_1(s):(!isObject_1(s)||n&&isFunction_1(s))&&(u=_initCloneObject(l))):_=!1}_&&(o.set(l,u),i(u,l,n,a,o),o.delete(l)),_assignMergeValue(e,r,u)}}function baseMerge(e,t,r,n,i){e!==t&&_baseFor(t,function(a,o){if(isObject_1(a))i||(i=new _Stack),_baseMergeDeep(e,t,o,r,baseMerge,n,i);else{var s=n?n(e[o],a,o+"",e,t,i):void 0;void 0===s&&(s=a),_assignMergeValue(e,o,s)}},keysIn_1)}function customDefaultsMerge(e,t,r,n,i,a){return isObject_1(e)&&isObject_1(t)&&(a.set(t,e),_baseMerge(e,t,void 0,customDefaultsMerge,a),a.delete(t)),e}function baseToPairs(e,t){return _arrayMap(t,function(t){return[t,e[t]]})}function mapToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function setToPairs(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}function createToPairs(e){return function(t){var r=_getTag(t);return r==mapTag$1?_mapToArray(t):r==setTag$1?_setToPairs(t):_baseToPairs(t,e(t))}}function baseFindKey(e,t,r){var n;return r(e,function(e,r,i){if(t(e,r,i))return n=r,!1}),n}function baseForOwn(e,t){return e&&_baseFor(e,t,keys_1)}function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED$2),this}function setCacheHas(e){return this.__data__.has(e)}function SetCache(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new _MapCache;++t<r;)this.add(e[t])}function arraySome(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function cacheHas(e,t){return e.has(t)}function equalArrays(e,t,r,n,i,a){var o=r&COMPARE_PARTIAL_FLAG$2,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var c=a.get(e);if(c&&a.get(t))return c==t;var u=-1,_=!0,f=r&COMPARE_UNORDERED_FLAG$1?new _SetCache:void 0;for(a.set(e,t),a.set(t,e);++u<s;){var h=e[u],d=t[u];if(n)var p=o?n(d,h,u,t,e,a):n(h,d,u,e,t,a);if(void 0!==p){if(p)continue;_=!1;break}if(f){if(!_arraySome(t,function(e,t){if(!_cacheHas(f,t)&&(h===e||i(h,e,r,n,a)))return f.push(t)})){_=!1;break}}else if(h!==d&&!i(h,d,r,n,a)){_=!1;break}}return a.delete(e),a.delete(t),_}function setToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function equalByTag(e,t,r,n,i,a,o){switch(r){case dataViewTag$2:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case arrayBufferTag$1:return!(e.byteLength!=t.byteLength||!a(new _Uint8Array(e),new _Uint8Array(t)));case boolTag$1:case dateTag$1:case numberTag$1:return eq_1(+e,+t);case errorTag$1:return e.name==t.name&&e.message==t.message;case regexpTag$1:case stringTag$1:return e==t+"";case mapTag$3:var s=_mapToArray;case setTag$3:var l=n&COMPARE_PARTIAL_FLAG$3;if(s||(s=_setToArray),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;n|=COMPARE_UNORDERED_FLAG$2,o.set(e,t);var u=_equalArrays(s(e),s(t),n,i,a,o);return o.delete(e),u;case symbolTag$1:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(t)}return!1}function baseGetAllKeys(e,t,r){var n=t(e);return isArray_1(e)?n:_arrayPush(n,r(e))}function arrayFilter(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}function stubArray(){return[]}function getAllKeys(e){return _baseGetAllKeys(e,keys_1,_getSymbols)}function equalObjects(e,t,r,n,i,a){var o=r&COMPARE_PARTIAL_FLAG$4,s=_getAllKeys(e),l=s.length;if(l!=_getAllKeys(t).length&&!o)return!1;for(var c=l;c--;){var u=s[c];if(!(o?u in t:hasOwnProperty$13.call(t,u)))return!1}var _=a.get(e);if(_&&a.get(t))return _==t;var f=!0;a.set(e,t),a.set(t,e);for(var h=o;++c<l;){var d=e[u=s[c]],p=t[u];if(n)var g=o?n(p,d,u,t,e,a):n(d,p,u,e,t,a);if(!(void 0===g?d===p||i(d,p,r,n,a):g)){f=!1;break}h||(h="constructor"==u)}if(f&&!h){var y=e.constructor,m=t.constructor;y!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m)&&(f=!1)}return a.delete(e),a.delete(t),f}function baseIsEqualDeep(e,t,r,n,i,a){var o=isArray_1(e),s=isArray_1(t),l=o?arrayTag$1:_getTag(e),c=s?arrayTag$1:_getTag(t),u=(l=l==argsTag$2?objectTag$3:l)==objectTag$3,_=(c=c==argsTag$2?objectTag$3:c)==objectTag$3,f=l==c;if(f&&isBuffer_1(e)){if(!isBuffer_1(t))return!1;o=!0,u=!1}if(f&&!u)return a||(a=new _Stack),o||isTypedArray_1(e)?_equalArrays(e,t,r,n,i,a):_equalByTag(e,t,l,r,n,i,a);if(!(r&COMPARE_PARTIAL_FLAG$1)){var h=u&&hasOwnProperty$12.call(e,"__wrapped__"),d=_&&hasOwnProperty$12.call(t,"__wrapped__");if(h||d){var p=h?e.value():e,g=d?t.value():t;return a||(a=new _Stack),i(p,g,r,n,a)}}return!!f&&(a||(a=new _Stack),_equalObjects(e,t,r,n,i,a))}function baseIsEqual(e,t,r,n,i){return e===t||(null==e||null==t||!isObjectLike_1(e)&&!isObjectLike_1(t)?e!==e&&t!==t:_baseIsEqualDeep(e,t,r,n,baseIsEqual,i))}function baseIsMatch(e,t,r,n){var i=r.length,a=i,o=!n;if(null==e)return!a;for(e=Object(e);i--;){var s=r[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var l=(s=r[i])[0],c=e[l],u=s[1];if(o&&s[2]){if(void 0===c&&!(l in e))return!1}else{var _=new _Stack;if(n)var f=n(c,u,l,e,t,_);if(!(void 0===f?_baseIsEqual(u,c,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,n,_):f))return!1}}return!0}function isStrictComparable(e){return e===e&&!isObject_1(e)}function getMatchData(e){for(var t=keys_1(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,_isStrictComparable(i)]}return t}function matchesStrictComparable(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}function baseMatches(e){var t=_getMatchData(e);return 1==t.length&&t[0][2]?_matchesStrictComparable(t[0][0],t[0][1]):function(r){return r===e||_baseIsMatch(r,e,t)}}function baseHasIn(e,t){return null!=e&&t in Object(e)}function hasPath(e,t,r){for(var n=-1,i=(t=_castPath(t,e)).length,a=!1;++n<i;){var o=_toKey(t[n]);if(!(a=null!=e&&r(e,o)))break;e=e[o]}return a||++n!=i?a:!!(i=null==e?0:e.length)&&isLength_1(i)&&_isIndex(o,i)&&(isArray_1(e)||isArguments_1(e))}function hasIn(e,t){return null!=e&&_hasPath(e,t,_baseHasIn)}function baseMatchesProperty(e,t){return _isKey(e)&&_isStrictComparable(t)?_matchesStrictComparable(_toKey(e),t):function(r){var n=get_1(r,e);return void 0===n&&n===t?hasIn_1(r,e):_baseIsEqual(t,n,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function basePropertyDeep(e){return function(t){return _baseGet(t,e)}}function property(e){return _isKey(e)?_baseProperty(_toKey(e)):_basePropertyDeep(e)}function baseIteratee(e){return"function"==typeof e?e:null==e?identity_1:"object"==typeof e?isArray_1(e)?_baseMatchesProperty(e[0],e[1]):_baseMatches(e):property_1(e)}function findKey(e,t){return _baseFindKey(e,_baseIteratee(t,3),_baseForOwn)}function baseForOwnRight(e,t){return e&&_baseForRight(e,t,keys_1)}function findLastKey(e,t){return _baseFindKey(e,_baseIteratee(t,3),_baseForOwnRight)}function castFunction(e){return"function"==typeof e?e:identity_1}function forIn(e,t){return null==e?e:_baseFor(e,_castFunction(t),keysIn_1)}function forInRight(e,t){return null==e?e:_baseForRight(e,_castFunction(t),keysIn_1)}function forOwn(e,t){return e&&_baseForOwn(e,_castFunction(t))}function forOwnRight(e,t){return e&&_baseForOwnRight(e,_castFunction(t))}function baseFunctions(e,t){return _arrayFilter(t,function(t){return isFunction_1(e[t])})}function functions(e){return null==e?[]:_baseFunctions(e,keys_1(e))}function functionsIn(e){return null==e?[]:_baseFunctions(e,keysIn_1(e))}function baseHas(e,t){return null!=e&&hasOwnProperty$14.call(e,t)}function has(e,t){return null!=e&&_hasPath(e,t,_baseHas)}function baseInverter(e,t,r,n){return _baseForOwn(e,function(e,i,a){t(n,r(e),i,a)}),n}function createInverter(e,t){return function(r,n){return _baseInverter(r,e,t(n),{})}}function last(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function baseSlice(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a}function parent(e,t){return t.length<2?e:_baseGet(e,_baseSlice(t,0,-1))}function baseInvoke(e,t,r){t=_castPath(t,e);var n=null==(e=_parent(e,t))?e:e[_toKey(last_1(t))];return null==n?void 0:_apply(n,e,r)}function mapKeys(e,t){var r={};return t=_baseIteratee(t,3),_baseForOwn(e,function(e,n,i){_baseAssignValue(r,t(e,n,i),e)}),r}function mapValues(e,t){var r={};return t=_baseIteratee(t,3),_baseForOwn(e,function(e,n,i){_baseAssignValue(r,n,t(e,n,i))}),r}function arrayEach(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function baseAssignIn(e,t){return e&&_copyObject(t,keysIn_1(t),e)}function copySymbols(e,t){return _copyObject(e,_getSymbols(e),t)}function copySymbolsIn(e,t){return _copyObject(e,_getSymbolsIn(e),t)}function getAllKeysIn(e){return _baseGetAllKeys(e,keysIn_1,_getSymbolsIn)}function initCloneArray(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&hasOwnProperty$16.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function cloneDataView(e,t){var r=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function addMapEntry(e,t){return e.set(t[0],t[1]),e}function arrayReduce(e,t,r,n){var i=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r}function cloneMap(e,t,r){var n=t?r(_mapToArray(e),CLONE_DEEP_FLAG$2):_mapToArray(e);return _arrayReduce(n,_addMapEntry,new e.constructor)}function cloneRegExp(e){var t=new e.constructor(e.source,reFlags.exec(e));return t.lastIndex=e.lastIndex,t}function addSetEntry(e,t){return e.add(t),e}function cloneSet(e,t,r){var n=t?r(_setToArray(e),CLONE_DEEP_FLAG$3):_setToArray(e);return _arrayReduce(n,_addSetEntry,new e.constructor)}function cloneSymbol(e){return symbolValueOf$1?Object(symbolValueOf$1.call(e)):{}}function initCloneByTag(e,t,r,n){var i=e.constructor;switch(t){case arrayBufferTag$3:return _cloneArrayBuffer(e);case boolTag$3:case dateTag$3:return new i(+e);case dataViewTag$4:return _cloneDataView(e,n);case float32Tag$2:case float64Tag$2:case int8Tag$2:case int16Tag$2:case int32Tag$2:case uint8Tag$2:case uint8ClampedTag$2:case uint16Tag$2:case uint32Tag$2:return _cloneTypedArray(e,n);case mapTag$5:return _cloneMap(e,n,r);case numberTag$3:case stringTag$3:return new i(e);case regexpTag$3:return _cloneRegExp(e);case setTag$5:return _cloneSet(e,n,r);case symbolTag$3:return _cloneSymbol(e)}}function baseClone(e,t,r,n,i,a){var o,s=t&CLONE_DEEP_FLAG$1,l=t&CLONE_FLAT_FLAG$1,c=t&CLONE_SYMBOLS_FLAG$1;if(r&&(o=i?r(e,n,i,a):r(e)),void 0!==o)return o;if(!isObject_1(e))return e;var u=isArray_1(e);if(u){if(o=_initCloneArray(e),!s)return _copyArray(e,o)}else{var _=_getTag(e),f=_==funcTag$2||_==genTag$1;if(isBuffer_1(e))return _cloneBuffer(e,s);if(_==objectTag$4||_==argsTag$3||f&&!i){if(o=l||f?{}:_initCloneObject(e),!s)return l?_copySymbolsIn(e,_baseAssignIn(o,e)):_copySymbols(e,_baseAssign(o,e))}else{if(!cloneableTags[_])return i?e:{};o=_initCloneByTag(e,_,baseClone,s)}}a||(a=new _Stack);var h=a.get(e);if(h)return h;a.set(e,o);var d=c?l?_getAllKeysIn:_getAllKeys:l?keysIn:keys_1,p=u?void 0:d(e);return _arrayEach(p||e,function(n,i){p&&(n=e[i=n]),_assignValue(o,i,baseClone(n,t,r,i,e,a))}),o}function baseUnset(e,t){return t=_castPath(t,e),null==(e=_parent(e,t))||delete e[_toKey(last_1(t))]}function customOmitClone(e){return isPlainObject_1(e)?void 0:e}function negate(e){if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$1);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function baseSet(e,t,r,n){if(!isObject_1(e))return e;for(var i=-1,a=(t=_castPath(t,e)).length,o=a-1,s=e;null!=s&&++i<a;){var l=_toKey(t[i]),c=r;if(i!=o){var u=s[l];void 0===(c=n?n(u,l,s):void 0)&&(c=isObject_1(u)?u:_isIndex(t[i+1])?[]:{})}_assignValue(s,l,c),s=s[l]}return e}function basePickBy(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],s=_baseGet(e,o);r(s,o)&&_baseSet(a,_castPath(o,e),s)}return a}function pickBy(e,t){if(null==e)return{};var r=_arrayMap(_getAllKeysIn(e),function(e){return[e]});return t=_baseIteratee(t),_basePickBy(e,r,function(e,r){return t(e,r[0])})}function omitBy(e,t){return pickBy_1(e,negate_1(_baseIteratee(t)))}function basePick(e,t){return _basePickBy(e,t,function(t,r){return hasIn_1(e,r)})}function result(e,t,r){var n=-1,i=(t=_castPath(t,e)).length;for(i||(i=1,e=void 0);++n<i;){var a=null==e?void 0:e[_toKey(t[n])];void 0===a&&(n=i,a=r),e=isFunction_1(a)?a.call(e):a}return e}function set(e,t,r){return null==e?e:_baseSet(e,t,r)}function setWith(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:_baseSet(e,t,r,n)}function transform(e,t,r){var n=isArray_1(e),i=n||isBuffer_1(e)||isTypedArray_1(e);if(t=_baseIteratee(t,4),null==r){var a=e&&e.constructor;r=i?n?new a:[]:isObject_1(e)&&isFunction_1(a)?_baseCreate(_getPrototype(e)):{}}return(i?_arrayEach:_baseForOwn)(e,function(e,n,i){return t(r,e,n,i)}),r}function unset(e,t){return null==e||_baseUnset(e,t)}function baseUpdate(e,t,r,n){return _baseSet(e,t,r(_baseGet(e,t)),n)}function update(e,t,r){return null==e?e:_baseUpdate(e,t,_castFunction(r))}function updateWith(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:_baseUpdate(e,t,_castFunction(r),n)}function baseValues(e,t){return _arrayMap(t,function(t){return e[t]})}function values(e){return null==e?[]:_baseValues(e,keys_1(e))}function valuesIn(e){return null==e?[]:_baseValues(e,keysIn_1(e))}function castArray(){if(!arguments.length)return[];var e=arguments[0];return isArray_1(e)?e:[e]}function clone(e){return _baseClone(e,CLONE_SYMBOLS_FLAG$2)}function cloneDeep(e){return _baseClone(e,CLONE_DEEP_FLAG$4|CLONE_SYMBOLS_FLAG$3)}function cloneDeepWith(e,t){return t="function"==typeof t?t:void 0,_baseClone(e,CLONE_DEEP_FLAG$5|CLONE_SYMBOLS_FLAG$4,t)}function cloneWith(e,t){return t="function"==typeof t?t:void 0,_baseClone(e,CLONE_SYMBOLS_FLAG$5,t)}function baseConformsTo(e,t,r){var n=r.length;if(null==e)return!n;for(e=Object(e);n--;){var i=r[n],a=t[i],o=e[i];if(void 0===o&&!(i in e)||!a(o))return!1}return!0}function conformsTo(e,t){return null==t||_baseConformsTo(e,t,keys_1(t))}function baseGt(e,t){return e>t}function toNumber(e){if("number"==typeof e)return e;if(isSymbol_1(e))return NAN;if(isObject_1(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject_1(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}function createRelationalOperation(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=toNumber_1(t),r=toNumber_1(r)),e(t,r)}}function baseIsArrayBuffer(e){return isObjectLike_1(e)&&_baseGetTag(e)==arrayBufferTag$4}function isBoolean(e){return!0===e||!1===e||isObjectLike_1(e)&&_baseGetTag(e)==boolTag$4}function baseIsDate(e){return isObjectLike_1(e)&&_baseGetTag(e)==dateTag$4}function isElement(e){return isObjectLike_1(e)&&1===e.nodeType&&!isPlainObject_1(e)}function isEmpty(e){if(null==e)return!0;if(isArrayLike_1(e)&&(isArray_1(e)||"string"==typeof e||"function"==typeof e.splice||isBuffer_1(e)||isTypedArray_1(e)||isArguments_1(e)))return!e.length;var t=_getTag(e);if(t==mapTag$6||t==setTag$6)return!e.size;if(_isPrototype(e))return!_baseKeys(e).length;for(var r in e)if(hasOwnProperty$17.call(e,r))return!1;return!0}function isEqual(e,t){return _baseIsEqual(e,t)}function isEqualWith(e,t,r){var n=(r="function"==typeof r?r:void 0)?r(e,t):void 0;return void 0===n?_baseIsEqual(e,t,void 0,r):!!n}function isError(e){if(!isObjectLike_1(e))return!1;var t=_baseGetTag(e);return t==errorTag$3||t==domExcTag||"string"==typeof e.message&&"string"==typeof e.name&&!isPlainObject_1(e)}function isFinite$1(e){return"number"==typeof e&&nativeIsFinite(e)}function toFinite(e){return e?(e=toNumber_1(e))===INFINITY$2||e===-INFINITY$2?(e<0?-1:1)*MAX_INTEGER:e===e?e:0:0===e?e:0}function toInteger(e){var t=toFinite_1(e),r=t%1;return t===t?r?t-r:t:0}function isInteger(e){return"number"==typeof e&&e==toInteger_1(e)}function baseIsMap(e){return isObjectLike_1(e)&&_getTag(e)==mapTag$7}function isMatch(e,t){return e===t||_baseIsMatch(e,t,_getMatchData(t))}function isMatchWith(e,t,r){return r="function"==typeof r?r:void 0,_baseIsMatch(e,t,_getMatchData(t),r)}function isNumber(e){return"number"==typeof e||isObjectLike_1(e)&&_baseGetTag(e)==numberTag$4}function isNaN$1(e){return isNumber_1(e)&&e!=+e}function isNative(e){if(_isMaskable(e))throw new Error(CORE_ERROR_TEXT);return _baseIsNative(e)}function isNil(e){return null==e}function isNull(e){return null===e}function baseIsRegExp(e){return isObjectLike_1(e)&&_baseGetTag(e)==regexpTag$4}function isSafeInteger(e){return isInteger_1(e)&&e>=-MAX_SAFE_INTEGER$2&&e<=MAX_SAFE_INTEGER$2}function baseIsSet(e){return isObjectLike_1(e)&&_getTag(e)==setTag$7}function isString(e){return"string"==typeof e||!isArray_1(e)&&isObjectLike_1(e)&&_baseGetTag(e)==stringTag$4}function isUndefined(e){return void 0===e}function isWeakMap(e){return isObjectLike_1(e)&&_getTag(e)==weakMapTag$3}function isWeakSet(e){return isObjectLike_1(e)&&_baseGetTag(e)==weakSetTag}function baseLt(e,t){return e<t}function iteratorToArray(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}function asciiToArray(e){return e.split("")}function hasUnicode(e){return reHasUnicode.test(e)}function unicodeToArray(e){return e.match(reUnicode)||[]}function stringToArray(e){return _hasUnicode(e)?_unicodeToArray(e):_asciiToArray(e)}function toArray(e){if(!e)return[];if(isArrayLike_1(e))return isString_1(e)?_stringToArray(e):_copyArray(e);if(symIterator&&e[symIterator])return _iteratorToArray(e[symIterator]());var t=_getTag(e);return(t==mapTag$8?_mapToArray:t==setTag$8?_setToArray:values_1)(e)}function baseClamp(e,t,r){return e===e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}function toLength(e){return e?_baseClamp(toInteger_1(e),0,MAX_ARRAY_LENGTH):0}function toSafeInteger(e){return e?_baseClamp(toInteger_1(e),-MAX_SAFE_INTEGER$3,MAX_SAFE_INTEGER$3):0===e?e:0}function chunk(e,t,r){t=(r?_isIterateeCall(e,t,r):void 0===t)?1:nativeMax$1(toInteger_1(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var i=0,a=0,o=Array(nativeCeil(n/t));i<n;)o[a++]=_baseSlice(e,i,i+=t);return o}function compact(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var a=e[t];a&&(i[n++]=a)}return i}function concat(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return _arrayPush(isArray_1(r)?_copyArray(r):[r],_baseFlatten(t,1))}function baseFindIndex(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function baseIsNaN(e){return e!==e}function strictIndexOf(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}function baseIndexOf(e,t,r){return t===t?_strictIndexOf(e,t,r):_baseFindIndex(e,_baseIsNaN,r)}function arrayIncludes(e,t){return!!(null==e?0:e.length)&&_baseIndexOf(e,t,0)>-1}function arrayIncludesWith(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function baseDifference(e,t,r,n){var i=-1,a=_arrayIncludes,o=!0,s=e.length,l=[],c=t.length;if(!s)return l;r&&(t=_arrayMap(t,_baseUnary(r))),n?(a=_arrayIncludesWith,o=!1):t.length>=LARGE_ARRAY_SIZE$1&&(a=_cacheHas,o=!1,t=new _SetCache(t));e:for(;++i<s;){var u=e[i],_=null==r?u:r(u);if(u=n||0!==u?u:0,o&&_===_){for(var f=c;f--;)if(t[f]===_)continue e;l.push(u)}else a(t,_,n)||l.push(u)}return l}function drop(e,t,r){var n=null==e?0:e.length;return n?(t=r||void 0===t?1:toInteger_1(t),_baseSlice(e,t<0?0:t,n)):[]}function dropRight(e,t,r){var n=null==e?0:e.length;return n?(t=r||void 0===t?1:toInteger_1(t),t=n-t,_baseSlice(e,0,t<0?0:t)):[]}function baseWhile(e,t,r,n){for(var i=e.length,a=n?i:-1;(n?a--:++a<i)&&t(e[a],a,e););return r?_baseSlice(e,n?0:a,n?a+1:i):_baseSlice(e,n?a+1:0,n?i:a)}function dropRightWhile(e,t){return e&&e.length?_baseWhile(e,_baseIteratee(t,3),!0,!0):[]}function dropWhile(e,t){return e&&e.length?_baseWhile(e,_baseIteratee(t,3),!0):[]}function baseFill(e,t,r,n){var i=e.length;for((r=toInteger_1(r))<0&&(r=-r>i?0:i+r),(n=void 0===n||n>i?i:toInteger_1(n))<0&&(n+=i),n=r>n?0:toLength_1(n);r<n;)e[r++]=t;return e}function fill(e,t,r,n){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&_isIterateeCall(e,t,r)&&(r=0,n=i),_baseFill(e,t,r,n)):[]}function findIndex(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:toInteger_1(r);return i<0&&(i=nativeMax$2(n+i,0)),_baseFindIndex(e,_baseIteratee(t,3),i)}function findLastIndex(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n-1;return void 0!==r&&(i=toInteger_1(r),i=r<0?nativeMax$3(n+i,0):nativeMin(i,n-1)),_baseFindIndex(e,_baseIteratee(t,3),i,!0)}function head(e){return e&&e.length?e[0]:void 0}function flattenDeep(e){return(null==e?0:e.length)?_baseFlatten(e,INFINITY$3):[]}function flattenDepth(e,t){return(null==e?0:e.length)?(t=void 0===t?1:toInteger_1(t),_baseFlatten(e,t)):[]}function fromPairs(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n}function indexOf(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:toInteger_1(r);return i<0&&(i=nativeMax$4(n+i,0)),_baseIndexOf(e,t,i)}function initial(e){return(null==e?0:e.length)?_baseSlice(e,0,-1):[]}function baseIntersection(e,t,r){for(var n=r?_arrayIncludesWith:_arrayIncludes,i=e[0].length,a=e.length,o=a,s=Array(a),l=1/0,c=[];o--;){var u=e[o];o&&t&&(u=_arrayMap(u,_baseUnary(t))),l=nativeMin$1(u.length,l),s[o]=!r&&(t||i>=120&&u.length>=120)?new _SetCache(o&&u):void 0}u=e[0];var _=-1,f=s[0];e:for(;++_<i&&c.length<l;){var h=u[_],d=t?t(h):h;if(h=r||0!==h?h:0,!(f?_cacheHas(f,d):n(c,d,r))){for(o=a;--o;){var p=s[o];if(!(p?_cacheHas(p,d):n(e[o],d,r)))continue e}f&&f.push(d),c.push(h)}}return c}function castArrayLikeObject(e){return isArrayLikeObject_1(e)?e:[]}function join(e,t){return null==e?"":nativeJoin.call(e,t)}function strictLastIndexOf(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}function lastIndexOf(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n;return void 0!==r&&(i=(i=toInteger_1(r))<0?nativeMax$5(n+i,0):nativeMin$2(i,n-1)),t===t?_strictLastIndexOf(e,t,i):_baseFindIndex(e,_baseIsNaN,i,!0)}function baseNth(e,t){var r=e.length;if(r)return t+=t<0?r:0,_isIndex(t,r)?e[t]:void 0}function nth(e,t){return e&&e.length?_baseNth(e,toInteger_1(t)):void 0}function baseIndexOfWith(e,t,r,n){for(var i=r-1,a=e.length;++i<a;)if(n(e[i],t))return i;return-1}function basePullAll(e,t,r,n){var i=n?_baseIndexOfWith:_baseIndexOf,a=-1,o=t.length,s=e;for(e===t&&(t=_copyArray(t)),r&&(s=_arrayMap(e,_baseUnary(r)));++a<o;)for(var l=0,c=t[a],u=r?r(c):c;(l=i(s,u,l,n))>-1;)s!==e&&splice$1.call(s,l,1),splice$1.call(e,l,1);return e}function pullAll(e,t){return e&&e.length&&t&&t.length?_basePullAll(e,t):e}function pullAllBy(e,t,r){return e&&e.length&&t&&t.length?_basePullAll(e,t,_baseIteratee(r,2)):e}function pullAllWith(e,t,r){return e&&e.length&&t&&t.length?_basePullAll(e,t,void 0,r):e}function basePullAt(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==a){var a=i;_isIndex(i)?splice$2.call(e,i,1):_baseUnset(e,i)}}return e}function compareAscending(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e===e,a=isSymbol_1(e),o=void 0!==t,s=null===t,l=t===t,c=isSymbol_1(t);if(!s&&!c&&!a&&e>t||a&&o&&l&&!s&&!c||n&&o&&l||!r&&l||!i)return 1;if(!n&&!a&&!c&&e<t||c&&r&&i&&!n&&!a||s&&r&&i||!o&&i||!l)return-1}return 0}function remove(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],a=e.length;for(t=_baseIteratee(t,3);++n<a;){var o=e[n];t(o,n,e)&&(r.push(o),i.push(n))}return _basePullAt(e,i),r}function reverse(e){return null==e?e:nativeReverse.call(e)}function slice(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&_isIterateeCall(e,t,r)?(t=0,r=n):(t=null==t?0:toInteger_1(t),r=void 0===r?n:toInteger_1(r)),_baseSlice(e,t,r)):[]}function baseSortedIndexBy(e,t,r,n){t=r(t);for(var i=0,a=null==e?0:e.length,o=t!==t,s=null===t,l=isSymbol_1(t),c=void 0===t;i<a;){var u=nativeFloor((i+a)/2),_=r(e[u]),f=void 0!==_,h=null===_,d=_===_,p=isSymbol_1(_);if(o)var g=n||d;else g=c?d&&(n||f):s?d&&f&&(n||!h):l?d&&f&&!h&&(n||!p):!h&&!p&&(n?_<=t:_<t);g?i=u+1:a=u}return nativeMin$3(a,MAX_ARRAY_INDEX)}function baseSortedIndex(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t===t&&i<=HALF_MAX_ARRAY_LENGTH){for(;n<i;){var a=n+i>>>1,o=e[a];null!==o&&!isSymbol_1(o)&&(r?o<=t:o<t)?n=a+1:i=a}return i}return _baseSortedIndexBy(e,t,identity_1,r)}function sortedIndex(e,t){return _baseSortedIndex(e,t)}function sortedIndexBy(e,t,r){return _baseSortedIndexBy(e,t,_baseIteratee(r,2))}function sortedIndexOf(e,t){var r=null==e?0:e.length;if(r){var n=_baseSortedIndex(e,t);if(n<r&&eq_1(e[n],t))return n}return-1}function sortedLastIndex(e,t){return _baseSortedIndex(e,t,!0)}function sortedLastIndexBy(e,t,r){return _baseSortedIndexBy(e,t,_baseIteratee(r,2),!0)}function sortedLastIndexOf(e,t){if(null==e?0:e.length){var r=_baseSortedIndex(e,t,!0)-1;if(eq_1(e[r],t))return r}return-1}function baseSortedUniq(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var o=e[r],s=t?t(o):o;if(!r||!eq_1(s,l)){var l=s;a[i++]=0===o?0:o}}return a}function sortedUniq(e){return e&&e.length?_baseSortedUniq(e):[]}function sortedUniqBy(e,t){return e&&e.length?_baseSortedUniq(e,_baseIteratee(t,2)):[]}function tail(e){var t=null==e?0:e.length;return t?_baseSlice(e,1,t):[]}function take(e,t,r){return e&&e.length?(t=r||void 0===t?1:toInteger_1(t),_baseSlice(e,0,t<0?0:t)):[]}function takeRight(e,t,r){var n=null==e?0:e.length;return n?(t=r||void 0===t?1:toInteger_1(t),t=n-t,_baseSlice(e,t<0?0:t,n)):[]}function takeRightWhile(e,t){return e&&e.length?_baseWhile(e,_baseIteratee(t,3),!1,!0):[]}function takeWhile(e,t){return e&&e.length?_baseWhile(e,_baseIteratee(t,3)):[]}function noop(){}function baseUniq(e,t,r){var n=-1,i=_arrayIncludes,a=e.length,o=!0,s=[],l=s;if(r)o=!1,i=_arrayIncludesWith;else if(a>=LARGE_ARRAY_SIZE$2){var c=t?null:_createSet(e);if(c)return _setToArray(c);o=!1,i=_cacheHas,l=new _SetCache}else l=t?[]:s;e:for(;++n<a;){var u=e[n],_=t?t(u):u;if(u=r||0!==u?u:0,o&&_===_){for(var f=l.length;f--;)if(l[f]===_)continue e;t&&l.push(_),s.push(u)}else i(l,_,r)||(l!==s&&l.push(_),s.push(u))}return s}function uniq(e){return e&&e.length?_baseUniq(e):[]}function uniqBy(e,t){return e&&e.length?_baseUniq(e,_baseIteratee(t,2)):[]}function uniqWith(e,t){return t="function"==typeof t?t:void 0,e&&e.length?_baseUniq(e,void 0,t):[]}function unzip(e){if(!e||!e.length)return[];var t=0;return e=_arrayFilter(e,function(e){if(isArrayLikeObject_1(e))return t=nativeMax$6(e.length,t),!0}),_baseTimes(t,function(t){return _arrayMap(e,_baseProperty(t))})}function unzipWith(e,t){if(!e||!e.length)return[];var r=unzip_1(e);return null==t?r:_arrayMap(r,function(e){return _apply(t,void 0,e)})}function baseXor(e,t,r){var n=e.length;if(n<2)return n?_baseUniq(e[0]):[];for(var i=-1,a=Array(n);++i<n;)for(var o=e[i],s=-1;++s<n;)s!=i&&(a[i]=_baseDifference(a[i]||o,e[s],t,r));return _baseUniq(_baseFlatten(a,1),t,r)}function baseZipObject(e,t,r){for(var n=-1,i=e.length,a=t.length,o={};++n<i;){var s=n<a?t[n]:void 0;r(o,e[n],s)}return o}function zipObject(e,t){return _baseZipObject(e||[],t||[],_assignValue)}function zipObjectDeep(e,t){return _baseZipObject(e||[],t||[],_baseSet)}function arrayAggregator(e,t,r,n){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(n,o,r(o),e)}return n}function createBaseEach(e,t){return function(r,n){if(null==r)return r;if(!isArrayLike_1(r))return e(r,n);for(var i=r.length,a=t?i:-1,o=Object(r);(t?a--:++a<i)&&!1!==n(o[a],a,o););return r}}function baseAggregator(e,t,r,n){return _baseEach(e,function(e,i,a){t(n,e,r(e),a)}),n}function createAggregator(e,t){return function(r,n){var i=isArray_1(r)?_arrayAggregator:_baseAggregator,a=t?t():{};return i(r,e,_baseIteratee(n,2),a)}}function forEach(e,t){return(isArray_1(e)?_arrayEach:_baseEach)(e,_castFunction(t))}function arrayEachRight(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function forEachRight(e,t){return(isArray_1(e)?_arrayEachRight:_baseEachRight)(e,_castFunction(t))}function arrayEvery(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function baseEvery(e,t){var r=!0;return _baseEach(e,function(e,n,i){return r=!!t(e,n,i)}),r}function every(e,t,r){var n=isArray_1(e)?_arrayEvery:_baseEvery;return r&&_isIterateeCall(e,t,r)&&(t=void 0),n(e,_baseIteratee(t,3))}function baseFilter(e,t){var r=[];return _baseEach(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}function filter(e,t){return(isArray_1(e)?_arrayFilter:_baseFilter)(e,_baseIteratee(t,3))}function createFind(e){return function(t,r,n){var i=Object(t);if(!isArrayLike_1(t)){var a=_baseIteratee(r,3);t=keys_1(t),r=function(e){return a(i[e],e,i)}}var o=e(t,r,n);return o>-1?i[a?t[o]:o]:void 0}}function baseMap(e,t){var r=-1,n=isArrayLike_1(e)?Array(e.length):[];return _baseEach(e,function(e,i,a){n[++r]=t(e,i,a)}),n}function map(e,t){return(isArray_1(e)?_arrayMap:_baseMap)(e,_baseIteratee(t,3))}function flatMap(e,t){return _baseFlatten(map_1(e,t),1)}function flatMapDeep(e,t){return _baseFlatten(map_1(e,t),INFINITY$5)}function flatMapDepth(e,t,r){return r=void 0===r?1:toInteger_1(r),_baseFlatten(map_1(e,t),r)}function includes(e,t,r,n){e=isArrayLike_1(e)?e:values_1(e),r=r&&!n?toInteger_1(r):0;var i=e.length;return r<0&&(r=nativeMax$7(i+r,0)),isString_1(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&_baseIndexOf(e,t,r)>-1}function baseSortBy(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}function compareMultiple(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,o=i.length,s=r.length;++n<o;){var l=_compareAscending(i[n],a[n]);if(l)return n>=s?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}function baseOrderBy(e,t,r){var n=-1;t=_arrayMap(t.length?t:[identity_1],_baseUnary(_baseIteratee));var i=_baseMap(e,function(e,r,i){return{criteria:_arrayMap(t,function(t){return t(e)}),index:++n,value:e}});return _baseSortBy(i,function(e,t){return _compareMultiple(e,t,r)})}function orderBy(e,t,r,n){return null==e?[]:(isArray_1(t)||(t=null==t?[]:[t]),r=n?void 0:r,isArray_1(r)||(r=null==r?[]:[r]),_baseOrderBy(e,t,r))}function baseReduce(e,t,r,n,i){return i(e,function(e,i,a){r=n?(n=!1,e):t(r,e,i,a)}),r}function reduce(e,t,r){var n=isArray_1(e)?_arrayReduce:_baseReduce,i=arguments.length<3;return n(e,_baseIteratee(t,4),r,i,_baseEach)}function arrayReduceRight(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function reduceRight(e,t,r){var n=isArray_1(e)?_arrayReduceRight:_baseReduce,i=arguments.length<3;return n(e,_baseIteratee(t,4),r,i,_baseEachRight)}function reject(e,t){return(isArray_1(e)?_arrayFilter:_baseFilter)(e,negate_1(_baseIteratee(t,3)))}function baseRandom(e,t){return e+nativeFloor$1(nativeRandom()*(t-e+1))}function arraySample(e){var t=e.length;return t?e[_baseRandom(0,t-1)]:void 0}function baseSample(e){return _arraySample(values_1(e))}function sample(e){return(isArray_1(e)?_arraySample:_baseSample)(e)}function shuffleSelf(e,t){var r=-1,n=e.length,i=n-1;for(t=void 0===t?n:t;++r<t;){var a=_baseRandom(r,i),o=e[a];e[a]=e[r],e[r]=o}return e.length=t,e}function arraySampleSize(e,t){return _shuffleSelf(_copyArray(e),_baseClamp(t,0,e.length))}function baseSampleSize(e,t){var r=values_1(e);return _shuffleSelf(r,_baseClamp(t,0,r.length))}function sampleSize(e,t,r){return t=(r?_isIterateeCall(e,t,r):void 0===t)?1:toInteger_1(t),(isArray_1(e)?_arraySampleSize:_baseSampleSize)(e,t)}function arrayShuffle(e){return _shuffleSelf(_copyArray(e))}function baseShuffle(e){return _shuffleSelf(values_1(e))}function shuffle(e){return(isArray_1(e)?_arrayShuffle:_baseShuffle)(e)}function unicodeSize(e){for(var t=reUnicode$1.lastIndex=0;reUnicode$1.test(e);)++t;return t}function stringSize(e){return _hasUnicode(e)?_unicodeSize(e):_asciiSize(e)}function size(e){if(null==e)return 0;if(isArrayLike_1(e))return isString_1(e)?_stringSize(e):e.length;var t=_getTag(e);return t==mapTag$9||t==setTag$9?e.size:_baseKeys(e).length}function baseSome(e,t){var r;return _baseEach(e,function(e,n,i){return!(r=t(e,n,i))}),!!r}function some(e,t,r){var n=isArray_1(e)?_arraySome:_baseSome;return r&&_isIterateeCall(e,t,r)&&(t=void 0),n(e,_baseIteratee(t,3))}function transaction(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).transaction}function determineServiceKeyFromService(e){var t=null;return e&&e.knex&&"function"==typeof e.model&&(t="bookshelf"),t}function determineServerKeyFromServer(e){var t=null;return e&&e&&(t="express"),t}function parseAssociationPath(){var e=null,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\s+/g,"").split("=>"),r=t[0].split("."),n=r.length>1?r[1]:r[0];if(4===t.length){var i=t[1].split("."),a=t[2].split("."),o=t[3].split(".");if(i.length>1&&a.length>1&&o.length>1){var s=i[0];s===a[0]&&(e={sourceField:n,through:{modelName:s,fromField:i[1],toField:a[1]},targetModelName:o[0],targetField:o[1]})}}else if(2===t.length){var l=t[1].split(".");l.length>1&&(e={sourceField:n,targetModelName:l[0],targetField:l[1]})}return e}function registerModel(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=null;if(e.model(r))return e.model(r);if(e.Model){var a=objectUtils.get(t,"tableName",null);if(a){var o=objectUtils.get(t,"idAttribute","id"),s=objectUtils.get(t,"timestamps",{}),l=[s.created,s.updated],c=objectUtils.get(t,"associations",null),u={};c&&Object.keys(c).forEach(function(t){var i=c[t],a=i.type,o=i.path;n&&(console.log("["+namespace$1+"] Bookshelf:registerModel defining association => ("+t+")"),console.log(i),console.log(""));var s=parseAssociationPath(o);if(n&&(console.log("["+namespace$1+"] Bookshelf:registerModel parsed association path:"),console.log(s),console.log("")),s){if(e.modelNameForAssoc||(e.modelNameForAssoc={}),e.modelNameForAssoc[r]||(e.modelNameForAssoc[r]={}),e.modelNameForAssoc[r][t]=s.targetModelName,"toOne"===a){s.through?u[t]=function(){return this.belongsTo(s.targetModelName,s.through.toField,s.targetField).through(s.through.modelName,s.sourceField,null,s.through.fromField)}:u[t]=function(){return this.belongsTo(s.targetModelName,s.sourceField,s.targetField)}}if("toMany"===a)if(s.through){var l=e.model(s.through.modelName).prototype.tableName;u[t]=function(){return this.belongsToMany(s.targetModelName,l,s.through.fromField,s.through.toField,s.sourceField,s.targetField)}}else{u[t]=function(){return this.hasMany(s.targetModelName,s.targetField)}}}});var _=e.Model.extend(_extends({tableName:a,idAttribute:o,hasTimestamps:l},u));i=e.model(r,_),e.modelByTable||(e.modelByTable={}),e.modelNameByTable||(e.modelNameByTable={}),e.modelByTable[a]=i,e.modelNameByTable[a]=r}}return i}function buildRouter$1(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.server.Router();return t.forEach(function(t){debug&&console.log("[JOINT] [buildRouter] route def =>",t);var i=t.uri;i&&Object.keys(t).forEach(function(a){objectUtils.includes(supportedMethods,a)&&addRoute(e,n,i,a,t[a],r)})}),n}function addRoute(e,t,r,n,i,a){switch(a&&console.log(n.toUpperCase()+" "+r+" => "+i.method),debug&&console.log("[JOINT] [addRoute] methodDef =>",i),n){case"get":t.get(r,generateRouteLogic(e,i));break;case"post":t.post(r,generateRouteLogic(e,i));break;case"put":t.put(r,generateRouteLogic(e,i));break;case"patch":t.patch(r,generateRouteLogic(e,i));break;case"delete":t.delete(r,generateRouteLogic(e,i))}}function generateRouteLogic(e,t){var r=t.method?t.method.split("."):null;if(2===r.length){var n=r[0],i=r[1],a=objectUtils.get(t,"body",!1),o=objectUtils.get(t,"query",!0),s=objectUtils.get(t,"successStatus",200),l=objectUtils.get(e,"method."+n+"."+i,null),c=objectUtils.get(e,"specByMethod."+n+"."+i,{}),u=c.fields;return debug&&console.log("[JOINT] [generateRouteLogic] jointMethodSpec =>",c),l?function(e,t){var r={};a&&Object.assign(r,e.body),o&&Object.assign(r,e.query),Object.assign(r,e.params),debugRequest&&console.log("[JOINT-ROUTER] inputValues =>",r);var n={};u&&u.length>0&&(n.fields={},u.forEach(function(e){var t=e.name;r[t]&&(n.fields[t]=r[t])})),r.with&&(n.associations=r.with.split(",")),r.load&&(n.loadDirect=r.load.split(",")),(objectUtils.has(r,"skip")||objectUtils.has(r,"limit"))&&(n.paginate={},objectUtils.has(r,"limit")&&(n.paginate.skip=r.skip),objectUtils.has(r,"limit")&&(n.paginate.limit=r.limit)),debugRequest&&console.log("[JOINT-ROUTER] input =>",n),l(n).then(function(e){return handleDataResponse(e,t,s)}).catch(function(e){return handleErrorResponse(e,t)})}:function(e,t){t.end()}}return function(e,t){t.end()}}function handleDataResponse(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;t.status(r).json(e)}function handleErrorResponse(e,t){var r=e.status||500;t.status(r).json(e)}function registerModels(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.service,n=e.serviceKey,i=e.modelConfig;e.model||(e.model={},e.modelByTable={},e.modelNameByTable={}),t&&(console.log("----------------------------------------------------"),console.log("Registering resource models"),console.log("----------------------------------------------------"));var a=null;switch(n){case"bookshelf":a=registerModel}if(!a)throw new JointError({message:"Could not find registerModel logic for service: "+n});i&&Array.isArray(i)&&i.length>0?i.forEach(function(n){var i=n[MODEL.NAME];if(e.model[i])t&&console.log(i+" (already registered)");else{t&&console.log(""+i),debug_registerModels&&(console.log("["+namespace+"] generate:registerModels => (modelDef)"),console.log(n),console.log(""));var o=a(r,n,i,debug_registerModels);e.model[i]=o,e.modelByTable[n.tableName]=o,e.modelNameByTable[n.tableName]=i}}):t&&console.log("no models configured"),t&&console.log("")}function registerMethods(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.methodConfig;e.method||(e.method={},e.specByMethod={}),r&&Array.isArray(r)&&r.length>0&&r.forEach(function(r){var n=r.modelName,i=r.methods;e.method[n]={},e.specByMethod[n]={},t&&(console.log("----------------------------------------------------"),console.log("Registering methods for resource:",n),console.log("----------------------------------------------------")),i&&Array.isArray(i)&&i.length>0?i.forEach(function(r){var i=r[METHOD.NAME],a=r.action,o=r.spec;o[METHOD.MODEL_NAME]=n,debug_registerMethods&&(console.log("["+namespace+"] ============================================ [DEBUG]"),console.log(r),console.log("=============================================================")),e.specByMethod[n][i]=o;var s=generateMethod(e,a,o);s?(e.method[n][i]=s,t&&console.log(n+"."+i)):t&&console.log("x  "+n+"."+i+" (unknown action: "+a+")")}):t&&console.log("no methods configured")}),t&&console.log("")}function generateMethod(e,t,r){return objectUtils.has(e,t)?function(n){return e[t](r,n)}:null}function buildRouter(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.serverKey,n=e.server,i=e.routeConfig;if(t&&(console.log("----------------------------------------------------"),console.log("Building API router ("+r+")"),console.log("----------------------------------------------------")),!n){throw new JointError({message:"A server must be configured to generate a Joint router."})}if(!r){throw new JointError({message:"Could not generate a router. The provided server is either not recognized or not supported by Joint."})}var a=null;switch(r){case"express":a=buildRouter$1}i&&Array.isArray(i)&&i.length>0?e.router=a(e,i,t):t&&console.log("no routes configured"),t&&console.log("")}function prepareAuthContext(e,t){var r={},n=objectUtils.get(e,"settings.auth",{}),i=n.debugBuild,a=objectUtils.has(t,"session");if(i&&(a?console.log("[JOINT] [AUTH-UTILS] Preparing auth context for HTTP request (from "+e.serviceKey+")..."):console.log("[JOINT] [AUTH-UTILS] Preparing auth context for server-side request...")),a){r.request_method=objectUtils.get(t,"method",null),r.request_uri=objectUtils.get(t,"originalUrl",""),r.request_headers=objectUtils.get(t,"headers",null);var o=n.sessionNameForUser;r.user=objectUtils.get(t,"session."+o,{}),i&&(r.user&&(console.log("Authed session info ("+o+"):"),console.log(r.user)),console.log("Request headers:"),console.log(r.request_headers))}else r.user=t,i&&r.user&&(console.log("Authed context info:"),console.log(r.user));return i&&(console.log("[JOINT] [AUTH-UTILS] authContext =>"),console.log(r),console.log("-------------------------------------------\n")),r}function isAllowed(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=!1,i=e.user,a=objectUtils.has(e,"request_method");debugCheck&&(a?console.log("[JOINT] [AUTH-UTILS] Checking if request is allowed on: "+e.request_method+" "+e.request_uri):console.log("[JOINT] [AUTH-UTILS] Checking if request is allowed for:",i),console.log("------------------- authRules"),console.log(t),console.log("------------------- ownerCreds"),console.log(r),console.log(""));var o=t.owner,s=t.delegateRole,l=t.rolesAny,c=t.denyWhenAny;if(o&&(n=isAllowedOwner(o,r,i)),!n&&s&&(n=isAllowedRole(s,i)),!n&&l)for(var u=0;u<l.length&&!(n=isAllowedRole(l[u],i));u++);return n&&c&&isDeniedByAny(c,i)&&(n=!1),debugCheck&&console.log("=========> isAllowed?",n),n}function isAllowedOwner(e,t,r){var n=!1;if(debugCheck&&(console.log("checking owner =>",e),console.log("checking against context info:"),console.log(r)),!r)return!1;if("me"===e){var i=Object.keys(t);if(i.length>0){var a=i[0],o=t[a];Array.isArray(r[a])?(n=objectUtils.includes(r[a],o),debugCheck&&console.log("Does "+o+" exist in context["+a+"] ? "+n)):(n=r[a]===o,debugCheck&&console.log("Does "+a+": "+o+" === context["+a+"]: "+r[a]+" ? "+n))}else debugCheck&&console.log("The ownerCreds provided is empty, so ownership cannot be verified")}return n}function isAllowedRole(e,t){var r=!1;return debugCheck&&(console.log("checking role =>",e),console.log("checking against context info:"),console.log(t)),!!t&&(r=objectUtils.includes(t.roles,e),debugCheck&&console.log("Does role "+e+" exist in set ["+t.roles+"] ? "+r),r)}function isDeniedByAny(e,t){var r=!1;if(debugCheck&&(console.log("checking deny scenarios (any) =>",e),console.log("checking against context info:"),console.log(t)),Array.isArray(e)&&e.length>0)for(var n=0;n<e.length;n++){var i=e[n],a=Object.keys(i)[0],o=i[a];if(r=objectUtils.has(t,a)&&t[a]===o,debugCheck&&console.log("Does "+a+": "+o+" exist in user context ? "+r),r)break}return r}function tryCatcher(){try{var e=tryCatchTarget;return tryCatchTarget=null,e.apply(this,arguments)}catch(e){return errorObj.e=e,errorObj}}function tryCatch(e){return tryCatchTarget=e,tryCatcher}function isPrimitive(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function isObject$2(e){return"function"==typeof e||"object"==typeof e&&null!==e}function maybeWrapAsError(e){return isPrimitive(e)?new Error(safeToString(e)):e}function withAppended(e,t){var r,n=e.length,i=new Array(n+1);for(r=0;r<n;++r)i[r]=e[r];return i[r]=t,i}function getDataPropertyOrDefault(e,t,r){if(!es5.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var n=Object.getOwnPropertyDescriptor(e,t);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function notEnumerableProp(e,t,r){if(isPrimitive(e))return e;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return es5.defineProperty(e,t,n),e}function thrower(e){throw e}function isClass(e){try{if("function"==typeof e){var t=es5.names(e.prototype),r=es5.isES5&&t.length>1,n=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=thisAssignmentPattern.test(e+"")&&es5.names(e).length>0;if(r||n||i)return!0}return!1}catch(e){return!1}}function toFastProperties(e){function t(){}t.prototype=e;for(var r=8;r--;)new t;return e}function isIdentifier(e){return rident.test(e)}function filledRange(e,t,r){for(var n=new Array(e),i=0;i<e;++i)n[i]=t+i+r;return n}function safeToString(e){try{return e+""}catch(e){return"[no string representation]"}}function isError$2(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function markAsOriginatingFromRejection(e){try{notEnumerableProp(e,"isOperational",!0)}catch(e){}}function originatesFromRejection(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function canAttachTrace(e){return isError$2(e)&&es5.propertyIsWritable(e,"stack")}function classString(e){return{}.toString.call(e)}function copyDescriptors(e,t,r){for(var n=es5.names(e),i=0;i<n.length;++i){var a=n[i];if(r(a))try{es5.defineProperty(t,a,es5.getDescriptor(e,a))}catch(e){}}}function env(e){return hasEnvVariables?process.env[e]:void 0}function getNativePromise(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}}function domainBind(e,t){return e.bind(t)}function arrayMove(e,t,r,n,i){for(var a=0;a<i;++a)r[a+n]=e[a+t],e[a+t]=void 0}function Queue(e){this._capacity=e,this._length=0,this._front=0}function Async(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new queue(16),this._normalQueue=new queue(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=schedule_1}function AsyncInvokeLater(e,t,r){this._lateQueue.push(e,t,r),this._queueTick()}function AsyncInvoke(e,t,r){this._normalQueue.push(e,t,r),this._queueTick()}function AsyncSettlePromises(e){this._normalQueue._pushOne(e),this._queueTick()}function subError(e,t){function r(n){if(!(this instanceof r))return new r(n);notEnumerableProp$1(this,"message","string"==typeof n?n:t),notEnumerableProp$1(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return inherits$2(r,Error),r}function OperationalError(e){if(!(this instanceof OperationalError))return new OperationalError(e);notEnumerableProp$1(this,"name","OperationalError"),notEnumerableProp$1(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(notEnumerableProp$1(this,"message",e.message),notEnumerableProp$1(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}function isUntypedError(e){return e instanceof Error&&es5.getPrototypeOf(e)===Error.prototype}function wrapAsOperationalError(e){var t;if(isUntypedError(e)){(t=new OperationalError$1(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var r=es5.keys(e),n=0;n<r.length;++n){var i=r[n];rErrorKey.test(i)||(t[i]=e[i])}return t}return util.markAsOriginatingFromRejection(e),e}function nodebackForPromise(e,t){return function(r,n){if(null!==e){if(r){var i=wrapAsOperationalError(maybeWrapAsError$1(r));e._attachExtraTrace(i),e._reject(i)}else if(t){for(var a=arguments.length,o=new Array(Math.max(a-1,0)),s=1;s<a;++s)o[s-1]=arguments[s];e._fulfill(o)}else e._fulfill(n);e=null}}}function noConflict(){try{Promise===bluebird&&(Promise=old)}catch(e){}return bluebird}function generateMissingFieldsError(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.all||[],r=e.oneOf||[],n=t.length>0,i=r.length>0,a=t.length+r.length>1?"Missing required fields:":"Missing required field:";return n&&(t.length>1?a+=' all of => ("'+t.join('", "')+'")':a+=' "'+t[0]+'"'),n&&i&&(a+=" AND"),i&&(a+=' at least one of => ("'+r.join('", "')+'")'),new JointStatusError({status:400,message:a})}function generateInvalidAssociationPropertiesError(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new JointStatusError({status:400,message:'The association action is invalid due to missing properties: "'+e.join('", "')+'"'})}function generateModelNotRecognizedError(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new JointStatusError({status:400,message:'The model "'+e+'" is not recognized.'})}function generateLookupFieldNotProvidedError(){return new JointStatusError({status:400,message:'A "lookup field" was either not defined or not provided.'})}function generateNotAuthorizedError(){return new JointStatusError({status:403,message:"You are not authorized to perform this action."})}function generateResourceNotFoundError(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new JointStatusError({status:404,message:'The requested "'+e+'" was not found.'})}function generateAssociatedItemDoesNotExistError(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new JointStatusError({status:404,message:'The requested "'+e+'" does exist for the requested resource.'})}function generateAssociatedItemsDoNotExistError(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new JointStatusError({status:404,message:'No instances of "'+e+'" exist for the requested resource.'})}function generateThirdPartyError(e){return new JointStatusError({status:500,message:e.message})}function now(){return moment.utc().format()}function castSlice(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:_baseSlice(e,t,r)}function createCaseFirst(e){return function(t){t=toString_1(t);var r=_hasUnicode(t)?_stringToArray(t):void 0,n=r?r[0]:t.charAt(0),i=r?_castSlice(r,1).join(""):t.slice(1);return n[e]()+i}}function capitalize(e){return upperFirst_1(toString_1(e).toLowerCase())}function basePropertyOf(e){return function(t){return null==e?void 0:e[t]}}function deburr(e){return(e=toString_1(e))&&e.replace(reLatin,_deburrLetter).replace(reComboMark,"")}function asciiWords(e){return e.match(reAsciiWord)||[]}function hasUnicodeWord(e){return reHasUnicodeWord.test(e)}function unicodeWords(e){return e.match(reUnicodeWord)||[]}function words(e,t,r){return e=toString_1(e),void 0===(t=r?void 0:t)?_hasUnicodeWord(e)?_unicodeWords(e):_asciiWords(e):e.match(t)||[]}function createCompounder(e){return function(t){return _arrayReduce(words_1(deburr_1(t).replace(reApos,"")),e,"")}}function endsWith(e,t,r){e=toString_1(e),t=_baseToString(t);var n=e.length,i=r=void 0===r?n:_baseClamp(toInteger_1(r),0,n);return(r-=t.length)>=0&&e.slice(r,i)==t}function escape(e){return(e=toString_1(e))&&reHasUnescapedHtml.test(e)?e.replace(reUnescapedHtml,_escapeHtmlChar):e}function escapeRegExp(e){return(e=toString_1(e))&&reHasRegExpChar.test(e)?e.replace(reRegExpChar$1,"\\$&"):e}function baseRepeat(e,t){var r="";if(!e||t<1||t>MAX_SAFE_INTEGER$4)return r;do{t%2&&(r+=e),(t=nativeFloor$3(t/2))&&(e+=e)}while(t);return r}function createPadding(e,t){var r=(t=void 0===t?" ":_baseToString(t)).length;if(r<2)return r?_baseRepeat(t,e):t;var n=_baseRepeat(t,nativeCeil$2(e/_stringSize(t)));return _hasUnicode(t)?_castSlice(_stringToArray(n),0,e).join(""):n.slice(0,e)}function pad(e,t,r){e=toString_1(e);var n=(t=toInteger_1(t))?_stringSize(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return _createPadding(nativeFloor$2(i),r)+e+_createPadding(nativeCeil$1(i),r)}function padEnd(e,t,r){e=toString_1(e);var n=(t=toInteger_1(t))?_stringSize(e):0;return t&&n<t?e+_createPadding(t-n,r):e}function padStart(e,t,r){e=toString_1(e);var n=(t=toInteger_1(t))?_stringSize(e):0;return t&&n<t?_createPadding(t-n,r)+e:e}function parseInt$1(e,t,r){return r||null==t?t=0:t&&(t=+t),nativeParseInt(toString_1(e).replace(reTrimStart,""),t||0)}function repeat(e,t,r){return t=(r?_isIterateeCall(e,t,r):void 0===t)?1:toInteger_1(t),_baseRepeat(toString_1(e),t)}function replace(){var e=arguments,t=toString_1(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function split(e,t,r){return r&&"number"!=typeof r&&_isIterateeCall(e,t,r)&&(t=r=void 0),(r=void 0===r?MAX_ARRAY_LENGTH$3:r>>>0)?(e=toString_1(e))&&("string"==typeof t||null!=t&&!isRegExp_1(t))&&!(t=_baseToString(t))&&_hasUnicode(e)?_castSlice(_stringToArray(e),0,r):e.split(t,r):[]}function startsWith(e,t,r){return e=toString_1(e),r=null==r?0:_baseClamp(toInteger_1(r),0,e.length),t=_baseToString(t),e.slice(r,r+t.length)==t}function escapeStringChar(e){return"\\"+stringEscapes[e]}function template(e,t,r){var n=templateSettings_1.imports._.templateSettings||templateSettings_1;r&&_isIterateeCall(e,t,r)&&(t=void 0),e=toString_1(e),t=assignInWith_1({},t,n,_customDefaultsAssignIn);var i,a,o=assignInWith_1({},t.imports,n.imports,_customDefaultsAssignIn),s=keys_1(o),l=_baseValues(o,s),c=0,u=t.interpolate||reNoMatch,_="__p += '",f=RegExp((t.escape||reNoMatch).source+"|"+u.source+"|"+(u===_reInterpolate?reEsTemplate:reNoMatch).source+"|"+(t.evaluate||reNoMatch).source+"|$","g"),h="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";e.replace(f,function(t,r,n,o,s,l){return n||(n=o),_+=e.slice(c,l).replace(reUnescapedString,_escapeStringChar),r&&(i=!0,_+="' +\n__e("+r+") +\n'"),s&&(a=!0,_+="';\n"+s+";\n__p += '"),n&&(_+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),_+="';\n";var d=t.variable;d||(_="with (obj) {\n"+_+"\n}\n"),_=(a?_.replace(reEmptyStringLeading,""):_).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),_="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+_+"return __p\n}";var p=attempt_1(function(){return Function(s,h+"return "+_).apply(void 0,l)});if(p.source=_,isError_1(p))throw p;return p}function toLower(e){return toString_1(e).toLowerCase()}function toUpper(e){return toString_1(e).toUpperCase()}function charsEndIndex(e,t){for(var r=e.length;r--&&_baseIndexOf(t,e[r],0)>-1;);return r}function charsStartIndex(e,t){for(var r=-1,n=e.length;++r<n&&_baseIndexOf(t,e[r],0)>-1;);return r}function trim(e,t,r){if((e=toString_1(e))&&(r||void 0===t))return e.replace(reTrim$1,"");if(!e||!(t=_baseToString(t)))return e;var n=_stringToArray(e),i=_stringToArray(t),a=_charsStartIndex(n,i),o=_charsEndIndex(n,i)+1;return _castSlice(n,a,o).join("")}function trimEnd(e,t,r){if((e=toString_1(e))&&(r||void 0===t))return e.replace(reTrimEnd,"");if(!e||!(t=_baseToString(t)))return e;var n=_stringToArray(e),i=_charsEndIndex(n,_stringToArray(t))+1;return _castSlice(n,0,i).join("")}function trimStart(e,t,r){if((e=toString_1(e))&&(r||void 0===t))return e.replace(reTrimStart$1,"");if(!e||!(t=_baseToString(t)))return e;var n=_stringToArray(e),i=_charsStartIndex(n,_stringToArray(t));return _castSlice(n,i).join("")}function truncate(e,t){var r=DEFAULT_TRUNC_LENGTH,n=DEFAULT_TRUNC_OMISSION;if(isObject_1(t)){var i="separator"in t?t.separator:i;r="length"in t?toInteger_1(t.length):r,n="omission"in t?_baseToString(t.omission):n}var a=(e=toString_1(e)).length;if(_hasUnicode(e)){var o=_stringToArray(e);a=o.length}if(r>=a)return e;var s=r-_stringSize(n);if(s<1)return n;var l=o?_castSlice(o,0,s).join(""):e.slice(0,s);if(void 0===i)return l+n;if(o&&(s+=l.length-s),isRegExp_1(i)){if(e.slice(s).search(i)){var c,u=l;for(i.global||(i=RegExp(i.source,toString_1(reFlags$1.exec(i))+"g")),i.lastIndex=0;c=i.exec(u);)var _=c.index;l=l.slice(0,void 0===_?s:_)}}else if(e.indexOf(_baseToString(i),s)!=s){var f=l.lastIndexOf(i);f>-1&&(l=l.slice(0,f))}return l+n}function unescape(e){return(e=toString_1(e))&&reHasEscapedHtml.test(e)?e.replace(reEscapedHtml,_unescapeHtmlChar):e}function toPascalCase(e){return string.startCase(e).replace(/\s/g,"")}function checkRequiredFields(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={satisfied:!0};if(Array.isArray(e)&&e.length>0){var n=[],i=[],a=!1;e.forEach(function(e){var r=objectUtils.get(e,ACTION.SPEC_FIELDS_OPT_NAME,null),o=objectUtils.get(e,ACTION.SPEC_FIELDS_OPT_REQUIRED,!1),s=objectUtils.get(e,ACTION.SPEC_FIELDS_OPT_REQUIRED_OR,!1);r&&o&&!objectUtils.has(t,r)?n.push(r):r&&s&&(i.push(r),objectUtils.has(t,r)&&(a=!0))});var o=n.length>0,s=i.length>0&&!a;(o||s)&&(r.satisfied=!1,r.missing={},o&&(r.missing.all=n),s&&(r.missing.oneOf=i))}return r}function getLookupFieldData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null;if(Array.isArray(e)&&e.length>0)for(var n=[],i=!1,a=0;a<e.length;a++){var o=e[a],s=objectUtils.get(o,ACTION.SPEC_FIELDS_OPT_TYPE,"String"),l=objectUtils.get(o,ACTION.SPEC_FIELDS_OPT_NAME,null);if(l){var c=objectUtils.get(o,ACTION.SPEC_FIELDS_OPT_LOOKUP,!1),u=objectUtils.get(o,ACTION.SPEC_FIELDS_OPT_LOOKUP_OR,!1),_=objectUtils.has(t,l);if(u&&!i&&(n.push(l),_&&(r||(r={}),r[l]=castValue(t[l],s),i=!0)),c){var f=objectUtils.has(o,ACTION.SPEC_FIELDS_OPT_DEFAULT_VALUE);(_||f)&&(r||(r={}),r[l]=_?castValue(t[l],s):castValue(o[ACTION.SPEC_FIELDS_OPT_DEFAULT_VALUE],s))}}}return r}function parseOwnerCreds(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=objectUtils.get(e,ACTION.SPEC_AUTH_OWNER_CREDS,[]),i=0;i<n.length;i++){var a=n[i].replace(/\s+/g,"").split("=>"),o=a[0],s=a.length>1?a[1]:a[0];if(objectUtils.has(t,o)){r[s]=t[o];break}}return r}function parseLoadDirect(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return Array.isArray(e)&&e.length>0&&(t.associations=[],t.colMappings={},e.forEach(function(e){var r=e.split(":"),n=r[0],i=r.length>1?r[r.length-1].trim():null;if(i&&!objectUtils.includes(t.associations,n)){var a=/^{(.+)}/.exec(i),o=a&&a.length>1?a[1].split(","):i;t.associations.push(n),t.colMappings[n]=o}})),t}function processDefaultValue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r=null;if(void 0!==t){var n=/^%(.+)%/.exec(t);if(n&&n.length>1){var i=n[1].trim(),a=/^(.+)\((.+)\)/.exec(i),o=i,s=null;a&&a.length>2&&(o=a[1].trim(),s=a[2].trim()),"now"===o?r=dateUtils.now():"camelCase"===o?r=e[s]?stringUtils.toCamelCase(e[s]):null:"kebabCase"===o?r=e[s]?stringUtils.toKebabCase(e[s]):null:"snakeCase"===o?r=e[s]?stringUtils.toSnakeCase(e[s]):null:"pascalCase"===o&&(r=e[s]?stringUtils.toPascalCase(e[s]):null)}else r=t}return r}function prepareFieldData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};return Array.isArray(e)&&e.length>0&&e.forEach(function(e){var n=objectUtils.get(e,"name",null),i=objectUtils.get(e,"type","String");n&&objectUtils.has(t,n)&&(r[n]=castValue(t[n],i))}),r}function castValue(e,t){if(Array.isArray(e))return e.map(function(e){return castValue(e,t)});switch(t){case"Number":return Number(e);case"Boolean":return isNaN(e)?"true"==e.toLowerCase():Boolean(e);case"JSON":return JSON.stringify(e);default:return String(e)}}function serialize(e,t,r){var n={};if(t){!0===debug$2&&console.log("[Serializer] "+e+" data =>",t);var i={},a=t.attributes?"item":"collection";n="item"===a?buildItemPackage(e,t,i,r):buildCollectionPackage(e,t,i,r),objectUtils.isEmpty(i)||(n.included=[],!0===debug$2&&console.log("[Serializer] relationHash =>",i),Object.keys(i).forEach(function(e){Object.keys(i[e]).forEach(function(t){var r=i[e][t];n.included.push(r)})}))}return n}function buildItemPackage(e,t,r,n){var i={};return i.data=buildItemData(e,t,r,n),i}function buildCollectionPackage(e,t,r,n){var i={};if(i.data=[],i.meta={},t.models&&Array.isArray(t.models)&&t.models.length>0&&t.models.forEach(function(t){i.data.push(buildItemData(e,t,r,n))}),t.pagination){var a=buildPaginationInfo(t.pagination);i.meta=Object.assign(i.meta,a)}else i.meta=Object.assign(i.meta,{total_items:t.length});if(t.filters){var o=buildFilterInfo(t.filters.type,t.filters.data);i.meta.filters=o}return i}function buildItemData(e,t,r,n){var i={};i.type=e;var a=objectUtils.get(t,"attributes",{});i.id=t.id?t.id:null,i.attributes=a,a.id&&delete i.attributes.id;var o=t.relations;return objectUtils.isEmpty(o)||(i.relationships={},Object.keys(o).forEach(function(e){var t=o[e],a=t.relatedData.type;if(!0===debug$2&&console.log("[Serializer] handling relation => "+e+" ("+a+")"),i.relationships[e]={},"belongsTo"===a||"hasOne"===a){var s=buildItemData(resolveDataTypeFromRelationData(t,n),t,r,n);i.relationships[e].data={},i.relationships[e].data.type=s.type,i.relationships[e].data.id=s.id,processRelationItemData(s,r)}else{if("hasMany"!==a&&"belongsToMany"!==a)throw new Error("Unrecognized relationship "+a+".");i.relationships[e].data=[],t.models&&Array.isArray(t.models)&&t.models.length>0&&t.models.forEach(function(a){var o=buildItemData(resolveDataTypeFromRelationData(t,n),a,r,n);i.relationships[e].data.push({type:o.type,id:o.id}),processRelationItemData(o,r)})}})),i}function buildPaginationInfo(e){return{total_items:e.rowCount,skip:e.offset,limit:e.limit}}function buildFilterInfo(e,t,r){var n=[];return t.forEach(function(t){n.push(buildItemData(e,t,r))}),n}function processRelationItemData(e,t){t[e.type]||(t[e.type]={});var r=t[e.type];r[e.id]||(r[e.id]=e)}function resolveDataTypeFromRelationData(e,t){var r="unknown",n=e.relatedData.targetTableName;return t.modelNameByTable&&t.modelNameByTable[n]&&(r=t.modelNameByTable[n]),r}function createItem(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return r[ACTION.INPUT_TRANSACTING]?performCreateItem(e,t,r,n):e.transaction(function(i){var a=Object.assign({},r);return a[ACTION.INPUT_TRANSACTING]=i,performCreateItem(e,t,a,n)})}function performCreateItem(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return new bluebird_1(function(i,a){var o=t[ACTION.SPEC_MODEL_NAME],s=t[ACTION.SPEC_FIELDS],l=t[ACTION.SPEC_AUTH]||{},c=l[ACTION.SPEC_AUTH_RULES],u=prepareFieldData(s,r[ACTION.INPUT_FIELDS]),_=r[ACTION.INPUT_TRANSACTING],f=r[ACTION.INPUT_AUTH_CONTEXT],h=e.model(o);if(!h)return debug$1&&console.log('[JOINT] [action:createItem] The model "'+o+'" is not recognized'),a(generateModelNotRecognizedError(o));var d=checkRequiredFields(s,u);if(!d.satisfied)return debug$1&&console.log("[JOINT] [action:createItem] Action has missing required fields:",d.missing),a(generateMissingFieldsError(d.missing));if(c&&!isAllowed(f,c,parseOwnerCreds(l,u)))return a(generateNotAuthorizedError());var p={};_&&(p.transacting=_);var g={};return u&&s&&s.forEach(function(e){var t=e.name,r=objectUtils.has(e,ACTION.SPEC_FIELDS_OPT_DEFAULT_VALUE),n=r?processDefaultValue(u,e[ACTION.SPEC_FIELDS_OPT_DEFAULT_VALUE]):null,i=objectUtils.has(u,t),a=objectUtils.get(e,ACTION.SPEC_FIELDS_OPT_LOCKED,!1);a||!i&&!r?a&&r&&(g[t]=n):g[t]=i?u[t]:n}),debug$1&&console.log("[JOINT] [action:createItem] EXECUTING => CREATE "+o+" WITH",g),h.forge(g).save(null,p).then(function(t){switch(n){case"json-api":return i(serialize(o,t,e));default:return i(t)}}).catch(function(e){return debug$1&&console.log("[JOINT] [action:createItem] Action encountered an error =>",e),a(generateThirdPartyError(e))})})}function upsertItem(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return r[ACTION.INPUT_TRANSACTING]?performUpsertItem(e,t,r,n):e.transaction(function(i){var a=Object.assign({},r);return a[ACTION.INPUT_TRANSACTING]=i,performUpsertItem(e,t,a,n)})}function performUpsertItem(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return new bluebird_1(function(i,a){var o=t[ACTION.SPEC_MODEL_NAME],s=t[ACTION.SPEC_FIELDS],l=t[ACTION.SPEC_AUTH]||{},c=l[ACTION.SPEC_AUTH_RULES],u=prepareFieldData(s,r[ACTION.INPUT_FIELDS]),_=r[ACTION.INPUT_TRANSACTING],f=r[ACTION.INPUT_AUTH_CONTEXT],h=e.model(o);if(!h)return debug$3&&console.log('[JOINT] [action:upsertItem] The model "'+o+'" is not recognized'),a(generateModelNotRecognizedError(o));var d=checkRequiredFields(s,u);if(!d.satisfied)return debug$3&&console.log("[JOINT] [action:upsertItem] Action has missing required fields:",d.missing),a(generateMissingFieldsError(d.missing));var p=getLookupFieldData(s,u);if(!p)return debug$3&&console.log('[JOINT] [action:upsertItem] Action did not define or provide a "lookup field"'),a(generateLookupFieldNotProvidedError());var g={require:!0};_&&(g.transacting=_);var y={};return u&&s&&s.forEach(function(e){var t=e.name,r=objectUtils.has(e,ACTION.SPEC_FIELDS_OPT_DEFAULT_VALUE),n=r?processDefaultValue(u,e[ACTION.SPEC_FIELDS_OPT_DEFAULT_VALUE]):null,i=objectUtils.has(u,t),a=objectUtils.get(e,ACTION.SPEC_FIELDS_OPT_LOOKUP,!1)||objectUtils.get(e,ACTION.SPEC_FIELDS_OPT_LOOKUP_OR,!1),o=objectUtils.get(e,ACTION.SPEC_FIELDS_OPT_LOCKED,!1);o||a||!i&&!r?o&&!a&&r&&(y[t]=n):y[t]=i?u[t]:n}),h.where(p).fetch(g).then(function(t){if(c){var r=Object.assign({},t.attributes,u),s=parseOwnerCreds(l,r);if(!isAllowed(f,c,s))return a(generateNotAuthorizedError())}return debug$3&&console.log("[JOINT] [action:upsertItem] EXECUTING => UPDATE "+o+" WITH",y),t.save(y,g).then(function(t){switch(n){case"json-api":return i(serialize(o,t,e));default:return i(t)}}).catch(function(e){return debug$3&&console.log("[JOINT] [action:upsertItem] Action encountered an error on update =>",e),a(generateThirdPartyError(e))})}).catch(function(t){if(t.message&&"EmptyResponse"===t.message){if(c){var r=parseOwnerCreds(l,u);if(!isAllowed(f,c,r))return a(generateNotAuthorizedError())}return debug$3&&console.log("[JOINT] [action:upsertItem] EXECUTING => CREATE "+o+" WITH",y),h.forge(p).save(y,g).then(function(t){switch(n){case"json-api":return i(serialize(o,t,e));default:return i(t)}}).catch(function(e){return debug$3&&console.log("[JOINT] [action:upsertItem] Action encountered an error on create =>",e),a(generateThirdPartyError(e))})}return debug$3&&console.log("[JOINT] [action:upsertItem] Action encountered an error =>",t),a(generateThirdPartyError(t))})})}function updateItem(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return r[ACTION.INPUT_TRANSACTING]?performUpdateItem(e,t,r,n):e.transaction(function(i){var a=Object.assign({},r);return a[ACTION.INPUT_TRANSACTING]=i,performUpdateItem(e,t,a,n)})}function performUpdateItem(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return new bluebird_1(function(i,a){var o=t[ACTION.SPEC_MODEL_NAME],s=t[ACTION.SPEC_FIELDS],l=t[ACTION.SPEC_AUTH]||{},c=l[ACTION.SPEC_AUTH_RULES],u=prepareFieldData(s,r[ACTION.INPUT_FIELDS]),_=r[ACTION.INPUT_TRANSACTING],f=r[ACTION.INPUT_AUTH_CONTEXT],h=e.model(o);if(!h)return debug$4&&console.log('[JOINT] [action:updateItem] The model "'+o+'" is not recognized'),a(generateModelNotRecognizedError(o));var d=checkRequiredFields(s,u);if(!d.satisfied)return debug$4&&console.log("[JOINT] [action:updateItem] Action has missing required fields:",d.missing),a(generateMissingFieldsError(d.missing));var p=getLookupFieldData(s,u);if(!p)return debug$4&&console.log('[JOINT] [action:updateItem] Action did not define or provide a "lookup field"'),a(generateLookupFieldNotProvidedError());var g={require:!0};return _&&(g.transacting=_),h.where(p).fetch(g).then(function(t){if(c){var r=Object.assign({},t.attributes,u),h=parseOwnerCreds(l,r);if(!isAllowed(f,c,h))return a(generateNotAuthorizedError())}var d={patch:!0};_&&(d.transacting=_);var p={};return u&&s&&s.forEach(function(e){var t=e.name,r=objectUtils.has(e,ACTION.SPEC_FIELDS_OPT_DEFAULT_VALUE),n=r?processDefaultValue(u,e[ACTION.SPEC_FIELDS_OPT_DEFAULT_VALUE]):null,i=objectUtils.has(u,t),a=objectUtils.get(e,ACTION.SPEC_FIELDS_OPT_LOOKUP,!1)||objectUtils.get(e,ACTION.SPEC_FIELDS_OPT_LOOKUP_OR,!1),o=objectUtils.get(e,ACTION.SPEC_FIELDS_OPT_LOCKED,!1);o||a||!i&&!r?o&&!a&&r&&(p[t]=n):p[t]=i?u[t]:n}),debug$4&&console.log("[JOINT] [action:updateItem] EXECUTING => UPDATE "+o+" WITH",p),t.save(p,d).then(function(t){switch(n){case"json-api":return i(serialize(o,t,e));default:return i(t)}}).catch(function(e){return debug$4&&console.log("[JOINT] [action:updateItem] Action encountered an error =>",e),a(generateThirdPartyError(e))})}).catch(function(e){return e.message&&"EmptyResponse"===e.message?a(generateResourceNotFoundError(o)):(debug$4&&console.log("[JOINT] [action:updateItem] Action encountered an error =>",e),a(generateThirdPartyError(e)))})})}function buildOrderBy(e){var t=[];if(e)for(var r=e.split(","),n=0;n<r.length;n++){var i=r[n].trim(),a="asc";i.length>0&&(i.startsWith("-")&&(i=i.substr(1),a="desc"),t.push({col:i,order:a}))}return t}function loadRelationsToItemBase(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t.associations&&t.associations.forEach(function(n){var i=t.colMappings[n],a=e.relations[n]?e.relations[n]:null,o=null;if(a&&(a.models?(o=[],a.models.forEach(function(e){if(Array.isArray(i)){var t={};i.forEach(function(r){t[r]=e.attributes[r]}),o.push(t)}else"*"===i?o.push(e.attributes):o.push(e.attributes[i])})):Array.isArray(i)?(o={},i.forEach(function(e){o[e]=a.attributes[e]})):o="*"===i?a.attributes:a.attributes[i]),debug_loadDirect&&console.log("[JOINT] [bookshelf-utils:loadRelationsToItemBase] load direct: "+n+":"+i+" => "+o),o){var s=stringUtils.toSnakeCase(n);e.attributes[s]=o}objectUtils.includes(r,n)||delete e.relations[n]})}function getItem(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return new bluebird_1(function(i,a){var o=t[ACTION.SPEC_MODEL_NAME],s=t[ACTION.SPEC_FIELDS],l=t[ACTION.SPEC_AUTH]||{},c=l[ACTION.SPEC_AUTH_RULES],u=t[ACTION.SPEC_FIELDS_TO_RETURN],_=prepareFieldData(s,r[ACTION.INPUT_FIELDS]),f=r[ACTION.INPUT_TRANSACTING],h=r[ACTION.INPUT_AUTH_CONTEXT],d=e.model(o);if(!d)return debug$5&&console.log('[JOINT] [action:getItem] The model "'+o+'" is not recognized'),a(generateModelNotRecognizedError(o));var p=checkRequiredFields(s,_);if(!p.satisfied)return debug$5&&console.log("[JOINT] [action:getItem] Action has missing required fields:",p.missing),a(generateMissingFieldsError(p.missing));var g={require:!0};f&&(g.transacting=f),u&&(Array.isArray(u)?g.columns=u:r[ACTION.INPUT_FIELD_SET]&&objectUtils.has(u,r[ACTION.INPUT_FIELD_SET])?g.columns=u[r[ACTION.INPUT_FIELD_SET]]:u.default&&Array.isArray(u.default)&&(g.columns=u.default));var y=r[ACTION.INPUT_LOAD_DIRECT]||[],m=parseLoadDirect(t[ACTION.SPEC_FORCE_LOAD_DIRECT]?t[ACTION.SPEC_FORCE_LOAD_DIRECT].concat(y):y),b=r[ACTION.INPUT_ASSOCIATIONS]||[],v=t[ACTION.SPEC_FORCE_ASSOCIATIONS]?objectUtils.union(t[ACTION.SPEC_FORCE_ASSOCIATIONS],b):b,T=m.associations&&m.associations.length>0?objectUtils.union(v,m.associations):v;T.length>0&&(g.withRelated=T);var A={};return _&&s&&s.forEach(function(e){var t=e.name,r=objectUtils.has(e,ACTION.SPEC_FIELDS_OPT_DEFAULT_VALUE),n=r?processDefaultValue(_,e[ACTION.SPEC_FIELDS_OPT_DEFAULT_VALUE]):null,i=objectUtils.has(_,t),a=objectUtils.get(e,ACTION.SPEC_FIELDS_OPT_LOCKED,!1);a||!i&&!r?a&&r&&(A[t]=n):A[t]=i?_[t]:n}),debug$5&&console.log("[JOINT] [action:getItem] EXECUTING => GET "+o+" WHERE",A),d.where(A).fetch(g).then(function(t){if(c){var s=Object.assign({},t.attributes,_),u=parseOwnerCreds(l,s);if(!isAllowed(h,c,u))return a(generateNotAuthorizedError())}switch(m.associations&&loadRelationsToItemBase(t,m,r.associations),n){case"json-api":return i(serialize(o,t,e));default:return i(t)}}).catch(function(e){return e.message&&"EmptyResponse"===e.message?a(generateResourceNotFoundError(o)):(debug$5&&console.log("[JOINT] [action:getItem] Action encountered an error =>",e),a(generateThirdPartyError(e)))})})}function getItems(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return new bluebird_1(function(i,a){var o=t[ACTION.SPEC_MODEL_NAME],s=t[ACTION.SPEC_FIELDS],l=t[ACTION.SPEC_AUTH]||{},c=l[ACTION.SPEC_AUTH_RULES],u=t[ACTION.SPEC_FIELDS_TO_RETURN],_=prepareFieldData(s,r[ACTION.INPUT_FIELDS]),f=r[ACTION.INPUT_TRANSACTING],h=r[ACTION.INPUT_AUTH_CONTEXT],d=e.model(o);if(!d)return debug$6&&console.log('[JOINT] [action:getItems] The model "'+o+'" is not recognized'),a(generateModelNotRecognizedError(o));var p=checkRequiredFields(s,_);if(!p.satisfied)return debug$6&&console.log("[JOINT] [action:getItems] Action has missing required fields:",p.missing),a(generateMissingFieldsError(p.missing));if(c&&!isAllowed(h,c,parseOwnerCreds(l,_)))return a(generateNotAuthorizedError());var g={};if(f&&(g.transacting=f),u&&(Array.isArray(u)?g.columns=u:r[ACTION.INPUT_FIELD_SET]&&objectUtils.has(u,r[ACTION.INPUT_FIELD_SET])?g.columns=u[r[ACTION.INPUT_FIELD_SET]]:u.default&&Array.isArray(u.default)&&(g.columns=u.default)),r.paginate){var y=objectUtils.get(r.paginate,ACTION.INPUT_PAGINATE_SKIP,ACTION.DEFAULT_VALUE_PAGINATE_SKIP),m=objectUtils.get(r.paginate,ACTION.INPUT_PAGINATE_LIMIT,ACTION.DEFAULT_VALUE_PAGINATE_LIMIT);g.offset=y,g.limit=m}var b=r[ACTION.INPUT_LOAD_DIRECT]||[],v=parseLoadDirect(t[ACTION.SPEC_FORCE_LOAD_DIRECT]?t[ACTION.SPEC_FORCE_LOAD_DIRECT].concat(b):b),T=r[ACTION.INPUT_ASSOCIATIONS]||[],A=t[ACTION.SPEC_FORCE_ASSOCIATIONS]?objectUtils.union(t[ACTION.SPEC_FORCE_ASSOCIATIONS],T):T,I=v.associations&&v.associations.length>0?objectUtils.union(A,v.associations):A;I.length>0&&(g.withRelated=I);var O=function(e){_&&s&&s.forEach(function(t){var r=t.name,n=objectUtils.has(t,ACTION.SPEC_FIELDS_OPT_DEFAULT_VALUE),i=n?processDefaultValue(_,t[ACTION.SPEC_FIELDS_OPT_DEFAULT_VALUE]):null,a=objectUtils.has(_,r),o=objectUtils.get(t,ACTION.SPEC_FIELDS_OPT_LOCKED,!1);if(o||!a&&!n)o&&n&&(Array.isArray(i)?e.where(r,"IN",i):e.where(r,"=",i));else{var s=a?_[r]:i;Array.isArray(s)?e.where(r,"IN",s):e.where(r,"=",s)}});var n=objectUtils.get(t,ACTION.SPEC_DEFAULT_ORDER_BY,null),i=objectUtils.get(r,ACTION.INPUT_ORDER_BY,null)||n;i&&buildOrderBy(i).map(function(t){return e.orderBy(t.col,t.order)})};return r.paginate?d.query(O).fetchPage(g).then(function(t){switch(v.associations&&t.models.forEach(function(e){return loadRelationsToItemBase(e,v,r.associations)}),n){case"json-api":return i(serialize(o,t,e));default:return i(t)}}).catch(function(e){return debug$6&&console.log("[JOINT] [action:getItems] Action encountered an error =>",e),a(generateThirdPartyError(e))}):d.query(O).fetchAll(g).then(function(t){switch(v.associations&&t.models.forEach(function(e){return loadRelationsToItemBase(e,v,r.associations)}),n){case"json-api":return i(serialize(o,t,e));default:return i(t)}}).catch(function(e){return debug$6&&console.log("[JOINT] [action:getItems] Action encountered an error =>",e),a(generateThirdPartyError(e))})})}function deleteItem(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return r[ACTION.INPUT_TRANSACTING]?performDeleteItem(e,t,r,n):e.transaction(function(i){var a=Object.assign({},r);return a[ACTION.INPUT_TRANSACTING]=i,performDeleteItem(e,t,a,n)})}function performDeleteItem(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],i=t[ACTION.SPEC_MODEL_NAME],a=t[ACTION.SPEC_FIELDS],o=t[ACTION.SPEC_AUTH]||{},s=prepareFieldData(a,r[ACTION.INPUT_FIELDS]),l=r[ACTION.INPUT_TRANSACTING],c=r[ACTION.INPUT_AUTH_CONTEXT];if(!e.model(i))return debug$7&&console.log('[JOINT] [action:deleteItem] The model "'+i+'" is not recognized'),bluebird_1.reject(generateModelNotRecognizedError(i));var u=checkRequiredFields(a,s);if(!u.satisfied)return debug$7&&console.log("[JOINT] [action:deleteItem] Action has missing required fields:",u.missing),bluebird_1.reject(generateMissingFieldsError(u.missing));var _=getLookupFieldData(a,s);return _?doLookupThenAction(e,_,i,a,o,s,c,l,n):doAction(e,i,a,o,null,s,c,l,n)}function doLookupThenAction(e,t,r,n,i,a,o,s,l){var c={require:!0};return s&&(c.transacting=s),e.model(r).where(t).fetch(c).then(function(t){var c=Object.assign({},t.attributes,a),u=parseOwnerCreds(i,c);return doAction(e,r,n,i,u,a,o,s,l)}).catch(function(e){return e.message&&"EmptyResponse"===e.message?bluebird_1.reject(generateResourceNotFoundError(r)):(debug$7&&console.log("[JOINT] [action:deleteItem] Action encountered an error =>",e),bluebird_1.reject(generateThirdPartyError(e)))})}function doAction(e,t,r,n,i,a,o,s,l){var c=n[ACTION.SPEC_AUTH_RULES];if(c&&!isAllowed(o,c,i||parseOwnerCreds(n,a)))return bluebird_1.reject(generateNotAuthorizedError());var u={require:!0};s&&(u.transacting=s);var _={};return a&&r&&r.forEach(function(e){var t=e.name;objectUtils.has(a,t)&&(_[t]=a[t])}),debug$7&&console.log("[JOINT] [action:deleteItem] EXECUTING => DELETE "+t+" WHERE",_),e.model(t).where(_).destroy(u).then(function(r){switch(l){case"json-api":return bluebird_1.resolve(serialize(t,r,e));default:return bluebird_1.resolve(r)}}).catch(function(e){return e.message&&"No Rows Deleted"===e.message?bluebird_1.reject(generateResourceNotFoundError(t)):(debug$7&&console.log("[JOINT] [action:deleteItem] Action encountered an error =>",e),bluebird_1.reject(generateThirdPartyError(e)))})}function addAssociatedItems(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return r[ACTION.INPUT_TRANSACTING]?performAddAssociatedItems(e,t,r,n):e.transaction(function(i){var a=Object.assign({},r);return a[ACTION.INPUT_TRANSACTING]=i,performAddAssociatedItems(e,t,a,n)})}function performAddAssociatedItems(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return new bluebird_1(function(i,a){var o=t[ACTION.RESOURCE_MAIN],s=o?o[ACTION.SPEC_MODEL_NAME]:null,l=t[ACTION.RESOURCE_ASSOCIATION],c=l?l[ACTION.SPEC_ASSOCIATION_NAME]:null,u=r[ACTION.RESOURCE_MAIN],_=r[ACTION.RESOURCE_ASSOCIATION],f=r[ACTION.INPUT_TRANSACTING],h=[];if(o||h.push("spec."+ACTION.RESOURCE_MAIN),l||h.push("spec."+ACTION.RESOURCE_ASSOCIATION),c||h.push("spec."+ACTION.RESOURCE_ASSOCIATION+"."+ACTION.SPEC_ASSOCIATION_NAME),u||h.push("input."+ACTION.RESOURCE_MAIN),_||h.push("input."+ACTION.RESOURCE_ASSOCIATION),h.length>0)return debug$8&&console.log('[JOINT] [action:addAssociatedItems] Required properties missing: "'+h.join('", "')+'"'),a(generateInvalidAssociationPropertiesError(h));var d=l[ACTION.SPEC_MODEL_NAME];return d||(d=e.modelNameForAssoc[s]?e.modelNameForAssoc[s][c]:null,l[ACTION.SPEC_MODEL_NAME]=d),u[ACTION.INPUT_TRANSACTING]=f,_[ACTION.INPUT_TRANSACTING]=f,u[ACTION.INPUT_ASSOCIATIONS]=[c],bluebird_1.all([getItem(e,o,u),getItems(e,l,_)]).then(function(t){var r=slicedToArray(t,2),o=r[0],l=r[1];return 0===l.length?a(generateAssociatedItemsDoNotExistError(d)):o.related(c).attach(l.models,{transacting:f}).then(function(){switch(n){case"json-api":return i(serialize(s,o,e));default:return i(o)}})}).catch(function(e){return a(e)})})}function hasAssociatedItem(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return new bluebird_1(function(i,a){var o=t[ACTION.RESOURCE_MAIN],s=o?o[ACTION.SPEC_MODEL_NAME]:null,l=t[ACTION.RESOURCE_ASSOCIATION],c=l?l[ACTION.SPEC_ASSOCIATION_NAME]:null,u=r[ACTION.RESOURCE_MAIN],_=r[ACTION.RESOURCE_ASSOCIATION],f=r[ACTION.INPUT_TRANSACTING],h=[];if(o||h.push("spec."+ACTION.RESOURCE_MAIN),l||h.push("spec."+ACTION.RESOURCE_ASSOCIATION),c||h.push("spec."+ACTION.RESOURCE_ASSOCIATION+"."+ACTION.SPEC_ASSOCIATION_NAME),u||h.push("input."+ACTION.RESOURCE_MAIN),_||h.push("input."+ACTION.RESOURCE_ASSOCIATION),h.length>0)return debug$9&&console.log('[JOINT] [action:hasAssociatedItem] Required properties missing: "'+h.join('", "')+'"'),a(generateInvalidAssociationPropertiesError(h));var d=l[ACTION.SPEC_MODEL_NAME];return d||(d=e.modelNameForAssoc[s]?e.modelNameForAssoc[s][c]:null,l[ACTION.SPEC_MODEL_NAME]=d),f&&(u[ACTION.INPUT_TRANSACTING]=f,_[ACTION.INPUT_TRANSACTING]=f),u[ACTION.INPUT_ASSOCIATIONS]=[c],bluebird_1.all([getItem(e,o,u),getItem(e,l,_)]).then(function(t){var r=slicedToArray(t,2),o=r[0],s=r[1],l=s.id;if(objectUtils.includes(o.related(c).pluck("id"),l))switch(n){case"json-api":return i(serialize(d,s,e));default:return i(s)}return a(generateAssociatedItemDoesNotExistError(d))}).catch(function(e){return a(e)})})}function getAllAssociatedItems(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return r[ACTION.INPUT_TRANSACTING]?performGetAllAssociatedItems(e,t,r,n):e.transaction(function(i){var a=Object.assign({},r);return a[ACTION.INPUT_TRANSACTING]=i,performGetAllAssociatedItems(e,t,a,n)})}function performGetAllAssociatedItems(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return new bluebird_1(function(i,a){var o=t[ACTION.RESOURCE_MAIN],s=o?o[ACTION.SPEC_MODEL_NAME]:null,l=t[ACTION.RESOURCE_ASSOCIATION],c=l?l[ACTION.SPEC_ASSOCIATION_NAME]:null,u=r[ACTION.RESOURCE_MAIN],_=r[ACTION.INPUT_TRANSACTING],f=[];if(o||f.push("spec."+ACTION.RESOURCE_MAIN),l||f.push("spec."+ACTION.RESOURCE_ASSOCIATION),c||f.push("spec."+ACTION.RESOURCE_ASSOCIATION+"."+ACTION.SPEC_ASSOCIATION_NAME),u||f.push("input."+ACTION.RESOURCE_MAIN),f.length>0)return debug$10&&console.log('[JOINT] [action:getAllAssociatedItems] Required properties missing: "'+f.join('", "')+'"'),a(generateInvalidAssociationPropertiesError(f));var h=l[ACTION.SPEC_MODEL_NAME];return h||(h=e.modelNameForAssoc[s]?e.modelNameForAssoc[s][c]:null,l[ACTION.SPEC_MODEL_NAME]=h),u[ACTION.INPUT_TRANSACTING]=_,u[ACTION.INPUT_ASSOCIATIONS]=[c],getItem(e,o,u).then(function(t){var r=t.related(c);if(0===r.length)return a(generateAssociatedItemsDoNotExistError(h));switch(n){case"json-api":return i(serialize(h,r,e));default:return i(r)}}).catch(function(e){return a(e)})})}function removeAssociatedItems(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return r[ACTION.INPUT_TRANSACTING]?performRemoveAssociatedItems(e,t,r,n):e.transaction(function(i){var a=Object.assign({},r);return a[ACTION.INPUT_TRANSACTING]=i,performRemoveAssociatedItems(e,t,a,n)})}function performRemoveAssociatedItems(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return new bluebird_1(function(i,a){var o=t[ACTION.RESOURCE_MAIN],s=o?o[ACTION.SPEC_MODEL_NAME]:null,l=t[ACTION.RESOURCE_ASSOCIATION],c=l?l[ACTION.SPEC_ASSOCIATION_NAME]:null,u=r[ACTION.RESOURCE_MAIN],_=r[ACTION.RESOURCE_ASSOCIATION],f=r[ACTION.INPUT_TRANSACTING],h=[];if(o||h.push("spec."+ACTION.RESOURCE_MAIN),l||h.push("spec."+ACTION.RESOURCE_ASSOCIATION),c||h.push("spec."+ACTION.RESOURCE_ASSOCIATION+"."+ACTION.SPEC_ASSOCIATION_NAME),u||h.push("input."+ACTION.RESOURCE_MAIN),_||h.push("input."+ACTION.RESOURCE_ASSOCIATION),h.length>0)return debug$11&&console.log('[JOINT] [action:removeAssociatedItems] Required properties missing: "'+h.join('", "')+'"'),a(generateInvalidAssociationPropertiesError(h));var d=l[ACTION.SPEC_MODEL_NAME];return d||(d=e.modelNameForAssoc[s]?e.modelNameForAssoc[s][c]:null,l[ACTION.SPEC_MODEL_NAME]=d),u[ACTION.INPUT_TRANSACTING]=f,_[ACTION.INPUT_TRANSACTING]=f,u[ACTION.INPUT_ASSOCIATIONS]=[c],bluebird_1.all([getItem(e,o,u),getItems(e,l,_)]).then(function(t){var r=slicedToArray(t,2),o=r[0],l=r[1];return 0===l.length?a(generateAssociatedItemsDoNotExistError(d)):o.related(c).detach(l.models,{transacting:f}).then(function(){switch(n){case"json-api":return i(serialize(s,o,e));default:return i(o)}})}).catch(function(e){return a(e)})})}function removeAllAssociatedItems(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return r[ACTION.INPUT_TRANSACTING]?performRemoveAllAssociatedItems(e,t,r,n):e.transaction(function(i){var a=Object.assign({},r);return a[ACTION.INPUT_TRANSACTING]=i,performRemoveAllAssociatedItems(e,t,a,n)})}function performRemoveAllAssociatedItems(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return new bluebird_1(function(i,a){var o=t[ACTION.RESOURCE_MAIN],s=o?o[ACTION.SPEC_MODEL_NAME]:null,l=t[ACTION.RESOURCE_ASSOCIATION],c=l?l[ACTION.SPEC_ASSOCIATION_NAME]:null,u=r[ACTION.RESOURCE_MAIN],_=r[ACTION.INPUT_TRANSACTING],f=[];return o||f.push("spec."+ACTION.RESOURCE_MAIN),l||f.push("spec."+ACTION.RESOURCE_ASSOCIATION),c||f.push("spec."+ACTION.RESOURCE_ASSOCIATION+"."+ACTION.SPEC_ASSOCIATION_NAME),u||f.push("input."+ACTION.RESOURCE_MAIN),f.length>0?(debug$12&&console.log('[JOINT] [action:removeAllAssociatedItems] Required properties missing: "'+f.join('", "')+'"'),a(generateInvalidAssociationPropertiesError(f))):(u[ACTION.INPUT_TRANSACTING]=_,u[ACTION.INPUT_ASSOCIATIONS]=[c],getItem(e,o,u).then(function(t){return t.related(c).detach(null,{transacting:_}).then(function(){switch(n){case"json-api":return i(serialize(s,t,e));default:return i(t)}})}).catch(function(e){return a(e)}))})}var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=_freeGlobal||freeSelf||Function("return this")(),_root=root,Symbol$1=_root.Symbol,_Symbol=Symbol$1,objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty,nativeObjectToString=objectProto$3.toString,symToStringTag$1=_Symbol?_Symbol.toStringTag:void 0,_getRawTag=getRawTag,objectProto$4=Object.prototype,nativeObjectToString$1=objectProto$4.toString,_objectToString=objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=_Symbol?_Symbol.toStringTag:void 0,_baseGetTag=baseGetTag,isObject_1=isObject,asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]",isFunction_1=isFunction,coreJsData=_root["__core-js_shared__"],_coreJsData=coreJsData,maskSrcKey=function(){var e=/[^.]+$/.exec(_coreJsData&&_coreJsData.keys&&_coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),_isMasked=isMasked,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString,_toSource=toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$2=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$2=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$2).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_baseIsNative=baseIsNative,_getValue=getValue,_getNative=getNative,defineProperty=function(){try{var e=_getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),_defineProperty=defineProperty,_baseAssignValue=baseAssignValue,eq_1=eq,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty,_assignValue=assignValue,_copyObject=copyObject,identity_1=identity,_apply=apply,nativeMax=Math.max,_overRest=overRest,constant_1=constant,baseSetToString=_defineProperty?function(e,t){return _defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:constant_1(t),writable:!0})}:identity_1,_baseSetToString=baseSetToString,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now,_shortOut=shortOut,setToString=_shortOut(_baseSetToString),_setToString=setToString,_baseRest=baseRest,MAX_SAFE_INTEGER=9007199254740991,isLength_1=isLength,isArrayLike_1=isArrayLike,MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/,_isIndex=isIndex,_isIterateeCall=isIterateeCall,_createAssigner=createAssigner,objectProto$5=Object.prototype,_isPrototype=isPrototype,_baseTimes=baseTimes,isObjectLike_1=isObjectLike,argsTag="[object Arguments]",_baseIsArguments=baseIsArguments,objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty,propertyIsEnumerable=objectProto$7.propertyIsEnumerable,isArguments=_baseIsArguments(function(){return arguments}())?_baseIsArguments:function(e){return isObjectLike_1(e)&&hasOwnProperty$5.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArguments_1=isArguments,isArray=Array.isArray,isArray_1=isArray,stubFalse_1=stubFalse,isBuffer_1=createCommonjsModule(function(e,t){var r=t&&!t.nodeType&&t,n=r&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===r?_root.Buffer:void 0,a=(i?i.isBuffer:void 0)||stubFalse_1;e.exports=a}),argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var _baseIsTypedArray=baseIsTypedArray,_baseUnary=baseUnary,_nodeUtil=createCommonjsModule(function(e,t){var r=t&&!t.nodeType&&t,n=r&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===r&&_freeGlobal.process,a=function(){try{return i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}),nodeIsTypedArray=_nodeUtil&&_nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?_baseUnary(nodeIsTypedArray):_baseIsTypedArray,isTypedArray_1=isTypedArray,objectProto$6=Object.prototype,hasOwnProperty$4=objectProto$6.hasOwnProperty,_arrayLikeKeys=arrayLikeKeys,_overArg=overArg,nativeKeys=_overArg(Object.keys,Object),_nativeKeys=nativeKeys,objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty,_baseKeys=baseKeys,keys_1=keys,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,assign=_createAssigner(function(e,t){if(_isPrototype(t)||isArrayLike_1(t))_copyObject(t,keys_1(t),e);else for(var r in t)hasOwnProperty.call(t,r)&&_assignValue(e,r,t[r])}),assign_1=assign,_nativeKeysIn=nativeKeysIn,objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty,_baseKeysIn=baseKeysIn,keysIn_1=keysIn$1,assignIn=_createAssigner(function(e,t){_copyObject(t,keysIn_1(t),e)}),assignIn_1=assignIn,assignInWith=_createAssigner(function(e,t,r,n){_copyObject(t,keysIn_1(t),e,n)}),assignInWith_1=assignInWith,assignWith=_createAssigner(function(e,t,r,n){_copyObject(t,keys_1(t),e,n)}),assignWith_1=assignWith,symbolTag="[object Symbol]",isSymbol_1=isSymbol,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,_isKey=isKey,nativeCreate=_getNative(Object,"create"),_nativeCreate=nativeCreate,_hashClear=hashClear,_hashDelete=hashDelete,HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$10=Object.prototype,hasOwnProperty$8=objectProto$10.hasOwnProperty,_hashGet=hashGet,objectProto$11=Object.prototype,hasOwnProperty$9=objectProto$11.hasOwnProperty,_hashHas=hashHas,HASH_UNDEFINED$1="__lodash_hash_undefined__",_hashSet=hashSet;Hash.prototype.clear=_hashClear,Hash.prototype.delete=_hashDelete,Hash.prototype.get=_hashGet,Hash.prototype.has=_hashHas,Hash.prototype.set=_hashSet;var _Hash=Hash,_listCacheClear=listCacheClear,_assocIndexOf=assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice,_listCacheDelete=listCacheDelete,_listCacheGet=listCacheGet,_listCacheHas=listCacheHas,_listCacheSet=listCacheSet;ListCache.prototype.clear=_listCacheClear,ListCache.prototype.delete=_listCacheDelete,ListCache.prototype.get=_listCacheGet,ListCache.prototype.has=_listCacheHas,ListCache.prototype.set=_listCacheSet;var _ListCache=ListCache,Map$1=_getNative(_root,"Map"),_Map=Map$1,_mapCacheClear=mapCacheClear,_isKeyable=isKeyable,_getMapData=getMapData,_mapCacheDelete=mapCacheDelete,_mapCacheGet=mapCacheGet,_mapCacheHas=mapCacheHas,_mapCacheSet=mapCacheSet;MapCache.prototype.clear=_mapCacheClear,MapCache.prototype.delete=_mapCacheDelete,MapCache.prototype.get=_mapCacheGet,MapCache.prototype.has=_mapCacheHas,MapCache.prototype.set=_mapCacheSet;var _MapCache=MapCache,FUNC_ERROR_TEXT="Expected a function";memoize.Cache=_MapCache;var memoize_1=memoize,MAX_MEMOIZE_SIZE=500,_memoizeCapped=memoizeCapped,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=_memoizeCapped(function(e){var t=[];return reLeadingDot.test(e)&&t.push(""),e.replace(rePropName,function(e,r,n,i){t.push(n?i.replace(reEscapeChar,"$1"):r||e)}),t}),_stringToPath=stringToPath,_arrayMap=arrayMap,INFINITY=1/0,symbolProto=_Symbol?_Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0,_baseToString=baseToString,toString_1=toString,_castPath=castPath,INFINITY$1=1/0,_toKey=toKey,_baseGet=baseGet,get_1=get,_baseAt=baseAt,_arrayPush=arrayPush,spreadableSymbol=_Symbol?_Symbol.isConcatSpreadable:void 0,_isFlattenable=isFlattenable,_baseFlatten=baseFlatten,flatten_1=flatten,_flatRest=flatRest,at=_flatRest(_baseAt),at_1=at,_baseAssign=baseAssign,objectCreate=Object.create,baseCreate=function(){function e(){}return function(t){if(!isObject_1(t))return{};if(objectCreate)return objectCreate(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),_baseCreate=baseCreate,create_1=create,objectProto$12=Object.prototype,hasOwnProperty$10=objectProto$12.hasOwnProperty,_customDefaultsAssignIn=customDefaultsAssignIn,defaults=_baseRest(function(e){return e.push(void 0,_customDefaultsAssignIn),_apply(assignInWith_1,void 0,e)}),defaults_1=defaults,_stackClear=stackClear,_stackDelete=stackDelete,_stackGet=stackGet,_stackHas=stackHas,LARGE_ARRAY_SIZE=200,_stackSet=stackSet;Stack.prototype.clear=_stackClear,Stack.prototype.delete=_stackDelete,Stack.prototype.get=_stackGet,Stack.prototype.has=_stackHas,Stack.prototype.set=_stackSet;var _Stack=Stack,_assignMergeValue=assignMergeValue,_createBaseFor=createBaseFor,baseFor=_createBaseFor(),_baseFor=baseFor,_cloneBuffer=createCommonjsModule(function(e,t){var r=t&&!t.nodeType&&t,n=r&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===r?_root.Buffer:void 0,a=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}}),Uint8Array=_root.Uint8Array,_Uint8Array=Uint8Array,_cloneArrayBuffer=cloneArrayBuffer,_cloneTypedArray=cloneTypedArray,_copyArray=copyArray,getPrototype=_overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype,_initCloneObject=initCloneObject,isArrayLikeObject_1=isArrayLikeObject,objectTag$1="[object Object]",funcProto$2=Function.prototype,objectProto$13=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$11=objectProto$13.hasOwnProperty,objectCtorString=funcToString$2.call(Object),isPlainObject_1=isPlainObject,toPlainObject_1=toPlainObject,_baseMergeDeep=baseMergeDeep,_baseMerge=baseMerge,_customDefaultsMerge=customDefaultsMerge,mergeWith=_createAssigner(function(e,t,r,n){_baseMerge(e,t,r,n)}),mergeWith_1=mergeWith,defaultsDeep=_baseRest(function(e){return e.push(void 0,_customDefaultsMerge),_apply(mergeWith_1,void 0,e)}),defaultsDeep_1=defaultsDeep,_baseToPairs=baseToPairs,DataView=_getNative(_root,"DataView"),_DataView=DataView,Promise$1=_getNative(_root,"Promise"),_Promise=Promise$1,Set=_getNative(_root,"Set"),_Set=Set,WeakMap=_getNative(_root,"WeakMap"),_WeakMap=WeakMap,mapTag$2="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$2="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=_toSource(_DataView),mapCtorString=_toSource(_Map),promiseCtorString=_toSource(_Promise),setCtorString=_toSource(_Set),weakMapCtorString=_toSource(_WeakMap),getTag=_baseGetTag;(_DataView&&getTag(new _DataView(new ArrayBuffer(1)))!=dataViewTag$1||_Map&&getTag(new _Map)!=mapTag$2||_Promise&&getTag(_Promise.resolve())!=promiseTag||_Set&&getTag(new _Set)!=setTag$2||_WeakMap&&getTag(new _WeakMap)!=weakMapTag$1)&&(getTag=function(e){var t=_baseGetTag(e),r=t==objectTag$2?e.constructor:void 0,n=r?_toSource(r):"";if(n)switch(n){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$2;case promiseCtorString:return promiseTag;case setCtorString:return setTag$2;case weakMapCtorString:return weakMapTag$1}return t});var _getTag=getTag,_mapToArray=mapToArray,_setToPairs=setToPairs,mapTag$1="[object Map]",setTag$1="[object Set]",_createToPairs=createToPairs,toPairs=_createToPairs(keys_1),toPairs_1=toPairs,entries=toPairs_1,toPairsIn=_createToPairs(keysIn_1),toPairsIn_1=toPairsIn,entriesIn=toPairsIn_1,extend=assignIn_1,extendWith=assignInWith_1,_baseFindKey=baseFindKey,_baseForOwn=baseForOwn,HASH_UNDEFINED$2="__lodash_hash_undefined__",_setCacheAdd=setCacheAdd,_setCacheHas=setCacheHas;SetCache.prototype.add=SetCache.prototype.push=_setCacheAdd,SetCache.prototype.has=_setCacheHas;var _SetCache=SetCache,_arraySome=arraySome,_cacheHas=cacheHas,COMPARE_PARTIAL_FLAG$2=1,COMPARE_UNORDERED_FLAG$1=2,_equalArrays=equalArrays,_setToArray=setToArray,COMPARE_PARTIAL_FLAG$3=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$3="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$3="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",symbolProto$1=_Symbol?_Symbol.prototype:void 0,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:void 0,_equalByTag=equalByTag,_baseGetAllKeys=baseGetAllKeys,_arrayFilter=arrayFilter,stubArray_1=stubArray,objectProto$16=Object.prototype,propertyIsEnumerable$1=objectProto$16.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(e){return null==e?[]:(e=Object(e),_arrayFilter(nativeGetSymbols(e),function(t){return propertyIsEnumerable$1.call(e,t)}))}:stubArray_1,_getSymbols=getSymbols,_getAllKeys=getAllKeys,COMPARE_PARTIAL_FLAG$4=1,objectProto$15=Object.prototype,hasOwnProperty$13=objectProto$15.hasOwnProperty,_equalObjects=equalObjects,COMPARE_PARTIAL_FLAG$1=1,argsTag$2="[object Arguments]",arrayTag$1="[object Array]",objectTag$3="[object Object]",objectProto$14=Object.prototype,hasOwnProperty$12=objectProto$14.hasOwnProperty,_baseIsEqualDeep=baseIsEqualDeep,_baseIsEqual=baseIsEqual,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,_baseIsMatch=baseIsMatch,_isStrictComparable=isStrictComparable,_getMatchData=getMatchData,_matchesStrictComparable=matchesStrictComparable,_baseMatches=baseMatches,_baseHasIn=baseHasIn,_hasPath=hasPath,hasIn_1=hasIn,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2,_baseMatchesProperty=baseMatchesProperty,_baseProperty=baseProperty,_basePropertyDeep=basePropertyDeep,property_1=property,_baseIteratee=baseIteratee,findKey_1=findKey,baseForRight=_createBaseFor(!0),_baseForRight=baseForRight,_baseForOwnRight=baseForOwnRight,findLastKey_1=findLastKey,_castFunction=castFunction,forIn_1=forIn,forInRight_1=forInRight,forOwn_1=forOwn,forOwnRight_1=forOwnRight,_baseFunctions=baseFunctions,functions_1=functions,functionsIn_1=functionsIn,objectProto$17=Object.prototype,hasOwnProperty$14=objectProto$17.hasOwnProperty,_baseHas=baseHas,has_1=has,_baseInverter=baseInverter,_createInverter=createInverter,invert=_createInverter(function(e,t,r){e[t]=r},constant_1(identity_1)),invert_1=invert,objectProto$18=Object.prototype,hasOwnProperty$15=objectProto$18.hasOwnProperty,invertBy=_createInverter(function(e,t,r){hasOwnProperty$15.call(e,t)?e[t].push(r):e[t]=[r]},_baseIteratee),invertBy_1=invertBy,last_1=last,_baseSlice=baseSlice,_parent=parent,_baseInvoke=baseInvoke,invoke=_baseRest(_baseInvoke),invoke_1=invoke,mapKeys_1=mapKeys,mapValues_1=mapValues,merge=_createAssigner(function(e,t,r){_baseMerge(e,t,r)}),merge_1=merge,_arrayEach=arrayEach,_baseAssignIn=baseAssignIn,_copySymbols=copySymbols,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols$1?function(e){for(var t=[];e;)_arrayPush(t,_getSymbols(e)),e=_getPrototype(e);return t}:stubArray_1,_getSymbolsIn=getSymbolsIn,_copySymbolsIn=copySymbolsIn,_getAllKeysIn=getAllKeysIn,objectProto$19=Object.prototype,hasOwnProperty$16=objectProto$19.hasOwnProperty,_initCloneArray=initCloneArray,_cloneDataView=cloneDataView,_addMapEntry=addMapEntry,_arrayReduce=arrayReduce,CLONE_DEEP_FLAG$2=1,_cloneMap=cloneMap,reFlags=/\w*$/,_cloneRegExp=cloneRegExp,_addSetEntry=addSetEntry,CLONE_DEEP_FLAG$3=1,_cloneSet=cloneSet,symbolProto$2=_Symbol?_Symbol.prototype:void 0,symbolValueOf$1=symbolProto$2?symbolProto$2.valueOf:void 0,_cloneSymbol=cloneSymbol,boolTag$3="[object Boolean]",dateTag$3="[object Date]",mapTag$5="[object Map]",numberTag$3="[object Number]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",symbolTag$3="[object Symbol]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",_initCloneByTag=initCloneByTag,CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$1=4,argsTag$3="[object Arguments]",arrayTag$2="[object Array]",boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$2="[object Error]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",mapTag$4="[object Map]",numberTag$2="[object Number]",objectTag$4="[object Object]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",weakMapTag$2="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$3]=cloneableTags[arrayTag$2]=cloneableTags[arrayBufferTag$2]=cloneableTags[dataViewTag$3]=cloneableTags[boolTag$2]=cloneableTags[dateTag$2]=cloneableTags[float32Tag$1]=cloneableTags[float64Tag$1]=cloneableTags[int8Tag$1]=cloneableTags[int16Tag$1]=cloneableTags[int32Tag$1]=cloneableTags[mapTag$4]=cloneableTags[numberTag$2]=cloneableTags[objectTag$4]=cloneableTags[regexpTag$2]=cloneableTags[setTag$4]=cloneableTags[stringTag$2]=cloneableTags[symbolTag$2]=cloneableTags[uint8Tag$1]=cloneableTags[uint8ClampedTag$1]=cloneableTags[uint16Tag$1]=cloneableTags[uint32Tag$1]=!0,cloneableTags[errorTag$2]=cloneableTags[funcTag$2]=cloneableTags[weakMapTag$2]=!1;var _baseClone=baseClone,_baseUnset=baseUnset,_customOmitClone=customOmitClone,CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,omit=_flatRest(function(e,t){var r={};if(null==e)return r;var n=!1;t=_arrayMap(t,function(t){return t=_castPath(t,e),n||(n=t.length>1),t}),_copyObject(e,_getAllKeysIn(e),r),n&&(r=_baseClone(r,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,_customOmitClone));for(var i=t.length;i--;)_baseUnset(r,t[i]);return r}),omit_1=omit,FUNC_ERROR_TEXT$1="Expected a function",negate_1=negate,_baseSet=baseSet,_basePickBy=basePickBy,pickBy_1=pickBy,omitBy_1=omitBy,_basePick=basePick,pick=_flatRest(function(e,t){return null==e?{}:_basePick(e,t)}),pick_1=pick,result_1=result,set_1=set,setWith_1=setWith,transform_1=transform,unset_1=unset,_baseUpdate=baseUpdate,update_1=update,updateWith_1=updateWith,_baseValues=baseValues,values_1=values,valuesIn_1=valuesIn,object={assign:assign_1,assignIn:assignIn_1,assignInWith:assignInWith_1,assignWith:assignWith_1,at:at_1,create:create_1,defaults:defaults_1,defaultsDeep:defaultsDeep_1,entries:entries,entriesIn:entriesIn,extend:extend,extendWith:extendWith,findKey:findKey_1,findLastKey:findLastKey_1,forIn:forIn_1,forInRight:forInRight_1,forOwn:forOwn_1,forOwnRight:forOwnRight_1,functions:functions_1,functionsIn:functionsIn_1,get:get_1,has:has_1,hasIn:hasIn_1,invert:invert_1,invertBy:invertBy_1,invoke:invoke_1,keys:keys_1,keysIn:keysIn_1,mapKeys:mapKeys_1,mapValues:mapValues_1,merge:merge_1,mergeWith:mergeWith_1,omit:omit_1,omitBy:omitBy_1,pick:pick_1,pickBy:pickBy_1,result:result_1,set:set_1,setWith:setWith_1,toPairs:toPairs_1,toPairsIn:toPairsIn_1,transform:transform_1,unset:unset_1,update:update_1,updateWith:updateWith_1,values:values_1,valuesIn:valuesIn_1},castArray_1=castArray,CLONE_SYMBOLS_FLAG$2=4,clone_1=clone,CLONE_DEEP_FLAG$4=1,CLONE_SYMBOLS_FLAG$3=4,cloneDeep_1=cloneDeep,CLONE_DEEP_FLAG$5=1,CLONE_SYMBOLS_FLAG$4=4,cloneDeepWith_1=cloneDeepWith,CLONE_SYMBOLS_FLAG$5=4,cloneWith_1=cloneWith,_baseConformsTo=baseConformsTo,conformsTo_1=conformsTo,_baseGt=baseGt,NAN=NaN,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,toNumber_1=toNumber,_createRelationalOperation=createRelationalOperation,gt=_createRelationalOperation(_baseGt),gt_1=gt,gte=_createRelationalOperation(function(e,t){return e>=t}),gte_1=gte,arrayBufferTag$4="[object ArrayBuffer]",_baseIsArrayBuffer=baseIsArrayBuffer,nodeIsArrayBuffer=_nodeUtil&&_nodeUtil.isArrayBuffer,isArrayBuffer=nodeIsArrayBuffer?_baseUnary(nodeIsArrayBuffer):_baseIsArrayBuffer,isArrayBuffer_1=isArrayBuffer,boolTag$4="[object Boolean]",isBoolean_1=isBoolean,dateTag$4="[object Date]",_baseIsDate=baseIsDate,nodeIsDate=_nodeUtil&&_nodeUtil.isDate,isDate=nodeIsDate?_baseUnary(nodeIsDate):_baseIsDate,isDate_1=isDate,isElement_1=isElement,mapTag$6="[object Map]",setTag$6="[object Set]",objectProto$20=Object.prototype,hasOwnProperty$17=objectProto$20.hasOwnProperty,isEmpty_1=isEmpty,isEqual_1=isEqual,isEqualWith_1=isEqualWith,domExcTag="[object DOMException]",errorTag$3="[object Error]",isError_1=isError,nativeIsFinite=_root.isFinite,_isFinite=isFinite$1,INFINITY$2=1/0,MAX_INTEGER=1.7976931348623157e308,toFinite_1=toFinite,toInteger_1=toInteger,isInteger_1=isInteger,mapTag$7="[object Map]",_baseIsMap=baseIsMap,nodeIsMap=_nodeUtil&&_nodeUtil.isMap,isMap=nodeIsMap?_baseUnary(nodeIsMap):_baseIsMap,isMap_1=isMap,isMatch_1=isMatch,isMatchWith_1=isMatchWith,numberTag$4="[object Number]",isNumber_1=isNumber,_isNaN=isNaN$1,isMaskable=_coreJsData?isFunction_1:stubFalse_1,_isMaskable=isMaskable,CORE_ERROR_TEXT="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",isNative_1=isNative,isNil_1=isNil,isNull_1=isNull,regexpTag$4="[object RegExp]",_baseIsRegExp=baseIsRegExp,nodeIsRegExp=_nodeUtil&&_nodeUtil.isRegExp,isRegExp=nodeIsRegExp?_baseUnary(nodeIsRegExp):_baseIsRegExp,isRegExp_1=isRegExp,MAX_SAFE_INTEGER$2=9007199254740991,isSafeInteger_1=isSafeInteger,setTag$7="[object Set]",_baseIsSet=baseIsSet,nodeIsSet=_nodeUtil&&_nodeUtil.isSet,isSet=nodeIsSet?_baseUnary(nodeIsSet):_baseIsSet,isSet_1=isSet,stringTag$4="[object String]",isString_1=isString,isUndefined_1=isUndefined,weakMapTag$3="[object WeakMap]",isWeakMap_1=isWeakMap,weakSetTag="[object WeakSet]",isWeakSet_1=isWeakSet,_baseLt=baseLt,lt=_createRelationalOperation(_baseLt),lt_1=lt,lte=_createRelationalOperation(function(e,t){return e<=t}),lte_1=lte,_iteratorToArray=iteratorToArray,_asciiToArray=asciiToArray,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsZWJ="\\u200d",reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+"]"),_hasUnicode=hasUnicode,rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange$1+"]",rsCombo="["+rsComboRange$1+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange$1+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange$1+"]?",rsOptJoin="(?:"+rsZWJ$1+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g"),_unicodeToArray=unicodeToArray,_stringToArray=stringToArray,mapTag$8="[object Map]",setTag$8="[object Set]",symIterator=_Symbol?_Symbol.iterator:void 0,toArray_1=toArray,_baseClamp=baseClamp,MAX_ARRAY_LENGTH=4294967295,toLength_1=toLength,MAX_SAFE_INTEGER$3=9007199254740991,toSafeInteger_1=toSafeInteger,lang={castArray:castArray_1,clone:clone_1,cloneDeep:cloneDeep_1,cloneDeepWith:cloneDeepWith_1,cloneWith:cloneWith_1,conformsTo:conformsTo_1,eq:eq_1,gt:gt_1,gte:gte_1,isArguments:isArguments_1,isArray:isArray_1,isArrayBuffer:isArrayBuffer_1,isArrayLike:isArrayLike_1,isArrayLikeObject:isArrayLikeObject_1,isBoolean:isBoolean_1,isBuffer:isBuffer_1,isDate:isDate_1,isElement:isElement_1,isEmpty:isEmpty_1,isEqual:isEqual_1,isEqualWith:isEqualWith_1,isError:isError_1,isFinite:_isFinite,isFunction:isFunction_1,isInteger:isInteger_1,isLength:isLength_1,isMap:isMap_1,isMatch:isMatch_1,isMatchWith:isMatchWith_1,isNaN:_isNaN,isNative:isNative_1,isNil:isNil_1,isNull:isNull_1,isNumber:isNumber_1,isObject:isObject_1,isObjectLike:isObjectLike_1,isPlainObject:isPlainObject_1,isRegExp:isRegExp_1,isSafeInteger:isSafeInteger_1,isSet:isSet_1,isString:isString_1,isSymbol:isSymbol_1,isTypedArray:isTypedArray_1,isUndefined:isUndefined_1,isWeakMap:isWeakMap_1,isWeakSet:isWeakSet_1,lt:lt_1,lte:lte_1,toArray:toArray_1,toFinite:toFinite_1,toInteger:toInteger_1,toLength:toLength_1,toNumber:toNumber_1,toPlainObject:toPlainObject_1,toSafeInteger:toSafeInteger_1,toString:toString_1},nativeCeil=Math.ceil,nativeMax$1=Math.max,chunk_1=chunk,compact_1=compact,concat_1=concat,_baseFindIndex=baseFindIndex,_baseIsNaN=baseIsNaN,_strictIndexOf=strictIndexOf,_baseIndexOf=baseIndexOf,_arrayIncludes=arrayIncludes,_arrayIncludesWith=arrayIncludesWith,LARGE_ARRAY_SIZE$1=200,_baseDifference=baseDifference,difference=_baseRest(function(e,t){return isArrayLikeObject_1(e)?_baseDifference(e,_baseFlatten(t,1,isArrayLikeObject_1,!0)):[]}),difference_1=difference,differenceBy=_baseRest(function(e,t){var r=last_1(t);return isArrayLikeObject_1(r)&&(r=void 0),isArrayLikeObject_1(e)?_baseDifference(e,_baseFlatten(t,1,isArrayLikeObject_1,!0),_baseIteratee(r,2)):[]}),differenceBy_1=differenceBy,differenceWith=_baseRest(function(e,t){var r=last_1(t);return isArrayLikeObject_1(r)&&(r=void 0),isArrayLikeObject_1(e)?_baseDifference(e,_baseFlatten(t,1,isArrayLikeObject_1,!0),void 0,r):[]}),differenceWith_1=differenceWith,drop_1=drop,dropRight_1=dropRight,_baseWhile=baseWhile,dropRightWhile_1=dropRightWhile,dropWhile_1=dropWhile,_baseFill=baseFill,fill_1=fill,nativeMax$2=Math.max,findIndex_1=findIndex,nativeMax$3=Math.max,nativeMin=Math.min,findLastIndex_1=findLastIndex,head_1=head,first=head_1,INFINITY$3=1/0,flattenDeep_1=flattenDeep,flattenDepth_1=flattenDepth,fromPairs_1=fromPairs,nativeMax$4=Math.max,indexOf_1=indexOf,initial_1=initial,nativeMin$1=Math.min,_baseIntersection=baseIntersection,_castArrayLikeObject=castArrayLikeObject,intersection=_baseRest(function(e){var t=_arrayMap(e,_castArrayLikeObject);return t.length&&t[0]===e[0]?_baseIntersection(t):[]}),intersection_1=intersection,intersectionBy=_baseRest(function(e){var t=last_1(e),r=_arrayMap(e,_castArrayLikeObject);return t===last_1(r)?t=void 0:r.pop(),r.length&&r[0]===e[0]?_baseIntersection(r,_baseIteratee(t,2)):[]}),intersectionBy_1=intersectionBy,intersectionWith=_baseRest(function(e){var t=last_1(e),r=_arrayMap(e,_castArrayLikeObject);return(t="function"==typeof t?t:void 0)&&r.pop(),r.length&&r[0]===e[0]?_baseIntersection(r,void 0,t):[]}),intersectionWith_1=intersectionWith,arrayProto$1=Array.prototype,nativeJoin=arrayProto$1.join,join_1=join,_strictLastIndexOf=strictLastIndexOf,nativeMax$5=Math.max,nativeMin$2=Math.min,lastIndexOf_1=lastIndexOf,_baseNth=baseNth,nth_1=nth,_baseIndexOfWith=baseIndexOfWith,arrayProto$2=Array.prototype,splice$1=arrayProto$2.splice,_basePullAll=basePullAll,pullAll_1=pullAll,pull=_baseRest(pullAll_1),pull_1=pull,pullAllBy_1=pullAllBy,pullAllWith_1=pullAllWith,arrayProto$3=Array.prototype,splice$2=arrayProto$3.splice,_basePullAt=basePullAt,_compareAscending=compareAscending,pullAt=_flatRest(function(e,t){var r=null==e?0:e.length,n=_baseAt(e,t);return _basePullAt(e,_arrayMap(t,function(e){return _isIndex(e,r)?+e:e}).sort(_compareAscending)),n}),pullAt_1=pullAt,remove_1=remove,arrayProto$4=Array.prototype,nativeReverse=arrayProto$4.reverse,reverse_1=reverse,slice_1=slice,MAX_ARRAY_LENGTH$2=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH$2-1,nativeFloor=Math.floor,nativeMin$3=Math.min,_baseSortedIndexBy=baseSortedIndexBy,MAX_ARRAY_LENGTH$1=4294967295,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH$1>>>1,_baseSortedIndex=baseSortedIndex,sortedIndex_1=sortedIndex,sortedIndexBy_1=sortedIndexBy,sortedIndexOf_1=sortedIndexOf,sortedLastIndex_1=sortedLastIndex,sortedLastIndexBy_1=sortedLastIndexBy,sortedLastIndexOf_1=sortedLastIndexOf,_baseSortedUniq=baseSortedUniq,sortedUniq_1=sortedUniq,sortedUniqBy_1=sortedUniqBy,tail_1=tail,take_1=take,takeRight_1=takeRight,takeRightWhile_1=takeRightWhile,takeWhile_1=takeWhile,noop_1=noop,INFINITY$4=1/0,createSet=_Set&&1/_setToArray(new _Set([,-0]))[1]==INFINITY$4?function(e){return new _Set(e)}:noop_1,_createSet=createSet,LARGE_ARRAY_SIZE$2=200,_baseUniq=baseUniq,union=_baseRest(function(e){return _baseUniq(_baseFlatten(e,1,isArrayLikeObject_1,!0))}),union_1=union,unionBy=_baseRest(function(e){var t=last_1(e);return isArrayLikeObject_1(t)&&(t=void 0),_baseUniq(_baseFlatten(e,1,isArrayLikeObject_1,!0),_baseIteratee(t,2))}),unionBy_1=unionBy,unionWith=_baseRest(function(e){var t=last_1(e);return t="function"==typeof t?t:void 0,_baseUniq(_baseFlatten(e,1,isArrayLikeObject_1,!0),void 0,t)}),unionWith_1=unionWith,uniq_1=uniq,uniqBy_1=uniqBy,uniqWith_1=uniqWith,nativeMax$6=Math.max,unzip_1=unzip,unzipWith_1=unzipWith,without=_baseRest(function(e,t){return isArrayLikeObject_1(e)?_baseDifference(e,t):[]}),without_1=without,_baseXor=baseXor,xor=_baseRest(function(e){return _baseXor(_arrayFilter(e,isArrayLikeObject_1))}),xor_1=xor,xorBy=_baseRest(function(e){var t=last_1(e);return isArrayLikeObject_1(t)&&(t=void 0),_baseXor(_arrayFilter(e,isArrayLikeObject_1),_baseIteratee(t,2))}),xorBy_1=xorBy,xorWith=_baseRest(function(e){var t=last_1(e);return t="function"==typeof t?t:void 0,_baseXor(_arrayFilter(e,isArrayLikeObject_1),void 0,t)}),xorWith_1=xorWith,zip=_baseRest(unzip_1),zip_1=zip,_baseZipObject=baseZipObject,zipObject_1=zipObject,zipObjectDeep_1=zipObjectDeep,zipWith=_baseRest(function(e){var t=e.length,r=t>1?e[t-1]:void 0;return r="function"==typeof r?(e.pop(),r):void 0,unzipWith_1(e,r)}),zipWith_1=zipWith,array={chunk:chunk_1,compact:compact_1,concat:concat_1,difference:difference_1,differenceBy:differenceBy_1,differenceWith:differenceWith_1,drop:drop_1,dropRight:dropRight_1,dropRightWhile:dropRightWhile_1,dropWhile:dropWhile_1,fill:fill_1,findIndex:findIndex_1,findLastIndex:findLastIndex_1,first:first,flatten:flatten_1,flattenDeep:flattenDeep_1,flattenDepth:flattenDepth_1,fromPairs:fromPairs_1,head:head_1,indexOf:indexOf_1,initial:initial_1,intersection:intersection_1,intersectionBy:intersectionBy_1,intersectionWith:intersectionWith_1,join:join_1,last:last_1,lastIndexOf:lastIndexOf_1,nth:nth_1,pull:pull_1,pullAll:pullAll_1,pullAllBy:pullAllBy_1,pullAllWith:pullAllWith_1,pullAt:pullAt_1,remove:remove_1,reverse:reverse_1,slice:slice_1,sortedIndex:sortedIndex_1,sortedIndexBy:sortedIndexBy_1,sortedIndexOf:sortedIndexOf_1,sortedLastIndex:sortedLastIndex_1,sortedLastIndexBy:sortedLastIndexBy_1,sortedLastIndexOf:sortedLastIndexOf_1,sortedUniq:sortedUniq_1,sortedUniqBy:sortedUniqBy_1,tail:tail_1,take:take_1,takeRight:takeRight_1,takeRightWhile:takeRightWhile_1,takeWhile:takeWhile_1,union:union_1,unionBy:unionBy_1,unionWith:unionWith_1,uniq:uniq_1,uniqBy:uniqBy_1,uniqWith:uniqWith_1,unzip:unzip_1,unzipWith:unzipWith_1,without:without_1,xor:xor_1,xorBy:xorBy_1,xorWith:xorWith_1,zip:zip_1,zipObject:zipObject_1,zipObjectDeep:zipObjectDeep_1,zipWith:zipWith_1},_arrayAggregator=arrayAggregator,_createBaseEach=createBaseEach,baseEach=_createBaseEach(_baseForOwn),_baseEach=baseEach,_baseAggregator=baseAggregator,_createAggregator=createAggregator,objectProto$21=Object.prototype,hasOwnProperty$18=objectProto$21.hasOwnProperty,countBy=_createAggregator(function(e,t,r){hasOwnProperty$18.call(e,r)?++e[r]:_baseAssignValue(e,r,1)}),countBy_1=countBy,forEach_1=forEach,each=forEach_1,_arrayEachRight=arrayEachRight,baseEachRight=_createBaseEach(_baseForOwnRight,!0),_baseEachRight=baseEachRight,forEachRight_1=forEachRight,eachRight=forEachRight_1,_arrayEvery=arrayEvery,_baseEvery=baseEvery,every_1=every,_baseFilter=baseFilter,filter_1=filter,_createFind=createFind,find=_createFind(findIndex_1),find_1=find,findLast=_createFind(findLastIndex_1),findLast_1=findLast,_baseMap=baseMap,map_1=map,flatMap_1=flatMap,INFINITY$5=1/0,flatMapDeep_1=flatMapDeep,flatMapDepth_1=flatMapDepth,objectProto$22=Object.prototype,hasOwnProperty$19=objectProto$22.hasOwnProperty,groupBy=_createAggregator(function(e,t,r){hasOwnProperty$19.call(e,r)?e[r].push(t):_baseAssignValue(e,r,[t])}),groupBy_1=groupBy,nativeMax$7=Math.max,includes_1=includes,invokeMap=_baseRest(function(e,t,r){var n=-1,i="function"==typeof t,a=isArrayLike_1(e)?Array(e.length):[];return _baseEach(e,function(e){a[++n]=i?_apply(t,e,r):_baseInvoke(e,t,r)}),a}),invokeMap_1=invokeMap,keyBy=_createAggregator(function(e,t,r){_baseAssignValue(e,r,t)}),keyBy_1=keyBy,_baseSortBy=baseSortBy,_compareMultiple=compareMultiple,_baseOrderBy=baseOrderBy,orderBy_1=orderBy,partition=_createAggregator(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),partition_1=partition,_baseReduce=baseReduce,reduce_1=reduce,_arrayReduceRight=arrayReduceRight,reduceRight_1=reduceRight,reject_1=reject,nativeFloor$1=Math.floor,nativeRandom=Math.random,_baseRandom=baseRandom,_arraySample=arraySample,_baseSample=baseSample,sample_1=sample,_shuffleSelf=shuffleSelf,_arraySampleSize=arraySampleSize,_baseSampleSize=baseSampleSize,sampleSize_1=sampleSize,_arrayShuffle=arrayShuffle,_baseShuffle=baseShuffle,shuffle_1=shuffle,asciiSize=_baseProperty("length"),_asciiSize=asciiSize,rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$2+reComboHalfMarksRange$2+rsComboSymbolsRange$2,rsVarRange$2="\\ufe0e\\ufe0f",rsAstral$1="["+rsAstralRange$2+"]",rsCombo$1="["+rsComboRange$2+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$1+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$2+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$2="\\u200d",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$2+"]?",rsOptJoin$1="(?:"+rsZWJ$2+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsSymbol$1="(?:"+[rsNonAstral$1+rsCombo$1+"?",rsCombo$1,rsRegional$1,rsSurrPair$1,rsAstral$1].join("|")+")",reUnicode$1=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol$1+rsSeq$1,"g"),_unicodeSize=unicodeSize,_stringSize=stringSize,mapTag$9="[object Map]",setTag$9="[object Set]",size_1=size,_baseSome=baseSome,some_1=some,sortBy=_baseRest(function(e,t){if(null==e)return[];var r=t.length;return r>1&&_isIterateeCall(e,t[0],t[1])?t=[]:r>2&&_isIterateeCall(t[0],t[1],t[2])&&(t=[t[0]]),_baseOrderBy(e,_baseFlatten(t,1),[])}),sortBy_1=sortBy,collection={countBy:countBy_1,each:each,eachRight:eachRight,every:every_1,filter:filter_1,find:find_1,findLast:findLast_1,flatMap:flatMap_1,flatMapDeep:flatMapDeep_1,flatMapDepth:flatMapDepth_1,forEach:forEach_1,forEachRight:forEachRight_1,groupBy:groupBy_1,includes:includes_1,invokeMap:invokeMap_1,keyBy:keyBy_1,map:map_1,orderBy:orderBy_1,partition:partition_1,reduce:reduce_1,reduceRight:reduceRight_1,reject:reject_1,sample:sample_1,sampleSize:sampleSize_1,shuffle:shuffle_1,size:size_1,some:some_1,sortBy:sortBy_1},objectUtils={get:object.get,has:object.has,isEmpty:lang.isEmpty,cloneDeep:lang.cloneDeep,union:array.union,includes:collection.includes},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},slicedToArray=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),JointError=function(e){function t(e){classCallCheck(this,t);var r=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.name="JointError",r.module=objectUtils.get(e,"module",null),r.message=objectUtils.get(e,"message",null),r}return inherits(t,e),t}(Error),defaultSettings={model:{debugGenerate:!1},method:{debugGenerate:!1},route:{debugGenerate:!1},auth:{attributeForRoles:"roles",sessionNameForUser:"joint_user",debugBuild:!1,debugCheck:!1}},MODEL={NAME:"name",TABLE_NAME:"tableName",ID_FIELD:"idField",DEFAULT_VALUE_ID_FIELD:"id",TIMESTAMPS:"timestamps",TIMESTAMPS_CREATED:"created",TIMESTAMPS_UPDATED:"updated",ASSOCIATIONS:"associations",ASSOCIATIONS_TYPE:"type",ASSOCIATIONS_PATH:"path",ASSOCIATIONS_ORDER_BY:"orderBy"},METHOD={MODEL_NAME:"modelName",METHOD_SET:"methods",NAME:"name",ACTION:"action",SPEC:"spec"},namespace$1="JOINT",debug=!1,debugRequest=!1,supportedMethods=["get","post","put","patch","delete"],namespace="JOINT",debug_registerModels=!1,debug_registerMethods=!1,debugCheck=!1,es5=createCommonjsModule(function(e){var t=function(){return void 0===this}();if(t)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:t,propertyIsWritable:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!(r&&!r.writable&&!r.set)}};else{var r={}.hasOwnProperty,n={}.toString,i={}.constructor.prototype,a=function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(n);return t};e.exports={isArray:function(e){try{return"[object Array]"===n.call(e)}catch(e){return!1}},keys:a,names:a,defineProperty:function(e,t,r){return e[t]=r.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return i}},isES5:t,propertyIsWritable:function(){return!0}}}}),canEvaluate="undefined"==typeof navigator,errorObj={e:{}},tryCatchTarget,globalObject="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==commonjsGlobal?commonjsGlobal:void 0!==commonjsGlobal?commonjsGlobal:null,inherits$1=function(e,t){function r(){this.constructor=e,this.constructor$=t;for(var r in t.prototype)n.call(t.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=t.prototype[r])}var n={}.hasOwnProperty;return r.prototype=t.prototype,e.prototype=new r,e.prototype},inheritedDataKeys=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1};if(es5.isES5){var r=Object.getOwnPropertyNames;return function(e){for(var n=[],i=Object.create(null);null!=e&&!t(e);){var a;try{a=r(e)}catch(e){return n}for(var o=0;o<a.length;++o){var s=a[o];if(!i[s]){i[s]=!0;var l=Object.getOwnPropertyDescriptor(e,s);null!=l&&null==l.get&&null==l.set&&n.push(s)}}e=es5.getPrototypeOf(e)}return n}}var n={}.hasOwnProperty;return function(r){if(t(r))return[];var i=[];e:for(var a in r)if(n.call(r,a))i.push(a);else{for(var o=0;o<e.length;++o)if(n.call(e[o],a))continue e;i.push(a)}return i}}(),thisAssignmentPattern=/this\s*\.\s*\S+\s*=/,rident=/^[a-z$_][a-z$_0-9]*$/i,ensureErrorObject="stack"in new Error?function(e){return canAttachTrace(e)?e:new Error(safeToString(e))}:function(e){if(canAttachTrace(e))return e;try{throw new Error(safeToString(e))}catch(e){return e}},asArray=function(e){return es5.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var ArrayFrom="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,r=[],n=e[Symbol.iterator]();!(t=n.next()).done;)r.push(t.value);return r};asArray=function(e){return es5.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?ArrayFrom(e):null}}var isNode="undefined"!=typeof process&&"[object process]"===classString(process).toLowerCase(),hasEnvVariables="undefined"!=typeof process&&void 0!==process.env,ret={isClass:isClass,isIdentifier:isIdentifier,inheritedDataKeys:inheritedDataKeys,getDataPropertyOrDefault:getDataPropertyOrDefault,thrower:thrower,isArray:es5.isArray,asArray:asArray,notEnumerableProp:notEnumerableProp,isPrimitive:isPrimitive,isObject:isObject$2,isError:isError$2,canEvaluate:canEvaluate,errorObj:errorObj,tryCatch:tryCatch,inherits:inherits$1,withAppended:withAppended,maybeWrapAsError:maybeWrapAsError,toFastProperties:toFastProperties,filledRange:filledRange,toString:safeToString,canAttachTrace:canAttachTrace,ensureErrorObject:ensureErrorObject,originatesFromRejection:originatesFromRejection,markAsOriginatingFromRejection:markAsOriginatingFromRejection,classString:classString,copyDescriptors:copyDescriptors,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:isNode,hasEnvVariables:hasEnvVariables,env:env,global:globalObject,getNativePromise:getNativePromise,domainBind:domainBind};ret.isRecentNode=ret.isNode&&function(){var e=process.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),ret.isNode&&ret.toFastProperties(process);try{throw new Error}catch(e){ret.lastLineError=e}var util=ret,schedule,noAsyncScheduler=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},NativePromise=util.getNativePromise();if(util.isNode&&"undefined"==typeof MutationObserver){var GlobalSetImmediate=commonjsGlobal.setImmediate,ProcessNextTick=process.nextTick;schedule=util.isRecentNode?function(e){GlobalSetImmediate.call(commonjsGlobal,e)}:function(e){ProcessNextTick.call(process,e)}}else if("function"==typeof NativePromise&&"function"==typeof NativePromise.resolve){var nativePromise=NativePromise.resolve();schedule=function(e){nativePromise.then(e)}}else schedule="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:noAsyncScheduler:function(){var e=document.createElement("div"),t={attributes:!0},r=!1,n=document.createElement("div");new MutationObserver(function(){e.classList.toggle("foo"),r=!1}).observe(n,t);var i=function(){r||(r=!0,n.classList.toggle("foo"))};return function(r){var n=new MutationObserver(function(){n.disconnect(),r()});n.observe(e,t),i()}}();var schedule_1=schedule;Queue.prototype._willBeOverCapacity=function(e){return this._capacity<e},Queue.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},Queue.prototype.push=function(e,t,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(e),this._pushOne(t),void this._pushOne(r);var i=this._front+n-3;this._checkCapacity(n);var a=this._capacity-1;this[i+0&a]=e,this[i+1&a]=t,this[i+2&a]=r,this._length=n},Queue.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},Queue.prototype.length=function(){return this._length},Queue.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},Queue.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,arrayMove(this,0,this,t,this._front+this._length&t-1)};var queue=Queue,firstLineError;try{throw new Error}catch(e){firstLineError=e}Async.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},Async.prototype.hasCustomScheduler=function(){return this._customScheduler},Async.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},Async.prototype.disableTrampolineIfNecessary=function(){util.hasDevTools&&(this._trampolineEnabled=!1)},Async.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},Async.prototype.fatalError=function(e,t){t?(process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),process.exit(2)):this.throwLater(e)},Async.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},util.hasDevTools?(Async.prototype.invokeLater=function(e,t,r){this._trampolineEnabled?AsyncInvokeLater.call(this,e,t,r):this._schedule(function(){setTimeout(function(){e.call(t,r)},100)})},Async.prototype.invoke=function(e,t,r){this._trampolineEnabled?AsyncInvoke.call(this,e,t,r):this._schedule(function(){e.call(t,r)})},Async.prototype.settlePromises=function(e){this._trampolineEnabled?AsyncSettlePromises.call(this,e):this._schedule(function(){e._settlePromises()})}):(Async.prototype.invokeLater=AsyncInvokeLater,Async.prototype.invoke=AsyncInvoke,Async.prototype.settlePromises=AsyncSettlePromises),Async.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var r=e.shift(),n=e.shift();t.call(r,n)}else t._settlePromises()}},Async.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},Async.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},Async.prototype._reset=function(){this._isTickUsed=!1};var async=Async,firstLineError_1=firstLineError;async.firstLineError=firstLineError_1;var Objectfreeze=es5.freeze,inherits$2=util.inherits,notEnumerableProp$1=util.notEnumerableProp,_TypeError,_RangeError,Warning=subError("Warning","warning"),CancellationError=subError("CancellationError","cancellation error"),TimeoutError=subError("TimeoutError","timeout error"),AggregateError=subError("AggregateError","aggregate error");try{_TypeError=TypeError,_RangeError=RangeError}catch(e){_TypeError=subError("TypeError","type error"),_RangeError=subError("RangeError","range error")}for(var methods="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),i=0;i<methods.length;++i)"function"==typeof Array.prototype[methods[i]]&&(AggregateError.prototype[methods[i]]=Array.prototype[methods[i]]);es5.defineProperty(AggregateError.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),AggregateError.prototype.isOperational=!0;var level=0;AggregateError.prototype.toString=function(){var e=Array(4*level+1).join(" "),t="\n"+e+"AggregateError of:\n";level++,e=Array(4*level+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split("\n"),a=0;a<i.length;++a)i[a]=e+i[a];t+=(n=i.join("\n"))+"\n"}return level--,t},inherits$2(OperationalError,Error);var errorTypes=Error.__BluebirdErrorTypes__;errorTypes||(errorTypes=Objectfreeze({CancellationError:CancellationError,TimeoutError:TimeoutError,OperationalError:OperationalError,RejectionError:OperationalError,AggregateError:AggregateError}),es5.defineProperty(Error,"__BluebirdErrorTypes__",{value:errorTypes,writable:!1,enumerable:!1,configurable:!1}));var errors={Error:Error,TypeError:_TypeError,RangeError:_RangeError,CancellationError:errorTypes.CancellationError,OperationalError:errorTypes.OperationalError,TimeoutError:errorTypes.TimeoutError,AggregateError:errorTypes.AggregateError,Warning:Warning},thenables=function(e,t){function r(e){return e.then}function n(e){try{return r(e)}catch(e){return s.e=e,s}}function i(e){try{return c.call(e,"_promise0")}catch(e){return!1}}function a(r,n,i){var a=new e(t),l=a;i&&i._pushContext(),a._captureStackTrace(),i&&i._popContext();var c=!0,u=o.tryCatch(n).call(r,function(e){a&&(a._resolveCallback(e),a=null)},function(e){a&&(a._rejectCallback(e,c,!0),a=null)});return c=!1,a&&u===s&&(a._rejectCallback(u.e,!0,!0),a=null),l}var o=util,s=o.errorObj,l=o.isObject,c={}.hasOwnProperty;return function(r,o){if(l(r)){if(r instanceof e)return r;var c=n(r);if(c===s)return o&&o._pushContext(),u=e.reject(c.e),o&&o._popContext(),u;if("function"==typeof c){if(i(r)){var u=new e(t);return r._then(u._fulfill,u._reject,void 0,u,null),u}return a(r,c,o)}}return r}},promise_array=function(e,t,r,n,i){function a(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}function o(r){var n=this._promise=new e(t);r instanceof e&&n._propagateFrom(r,3),n._setOnCancel(this),this._values=r,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var s=util;s.isArray;return s.inherits(o,i),o.prototype.length=function(){return this._length},o.prototype.promise=function(){return this._promise},o.prototype._init=function t(i,o){var l=r(this._values,this._promise);if(l instanceof e){var c=(l=l._target())._bitField;if(this._values=l,0==(50397184&c))return this._promise._setAsyncGuaranteed(),l._then(t,this._reject,void 0,this,o);if(0==(33554432&c))return 0!=(16777216&c)?this._reject(l._reason()):this._cancel();l=l._value()}if(null!==(l=s.asArray(l)))0!==l.length?this._iterate(l):-5===o?this._resolveEmptyArray():this._resolve(a(o));else{var u=n("expecting an array or an iterable object but got "+s.classString(l)).reason();this._promise._rejectCallback(u,!1)}},o.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,a=!1,o=null,s=0;s<n;++s){var l=r(t[s],i);o=l instanceof e?(l=l._target())._bitField:null,a?null!==o&&l.suppressUnhandledRejections():null!==o?0==(50397184&o)?(l._proxy(this,s),this._values[s]=l):a=0!=(33554432&o)?this._promiseFulfilled(l._value(),s):0!=(16777216&o)?this._promiseRejected(l._reason(),s):this._promiseCancelled(s):a=this._promiseFulfilled(l,s)}a||i._setAsyncGuaranteed()},o.prototype._isResolved=function(){return null===this._values},o.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},o.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},o.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},o.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseCancelled=function(){return this._cancel(),!0},o.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},o.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var r=0;r<t.length;++r)t[r]instanceof e&&t[r].cancel()}},o.prototype.shouldCopyValues=function(){return!0},o.prototype.getActualLength=function(e){return e},o},context=function(e){function t(){this._trace=new t.CapturedTrace(r())}function r(){var e=i.length-1;if(e>=0)return i[e]}var n=!1,i=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,i.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=i.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=function(){if(n)return new t},t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var i=e.prototype._pushContext,a=e.prototype._popContext,o=e._peekContext,s=e.prototype._peekContext,l=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=i,e.prototype._popContext=a,e._peekContext=o,e.prototype._peekContext=s,e.prototype._promiseCreated=l,n=!1},n=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=r,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t},debuggability=function(e,t){function r(e,t){return{promise:t}}function n(){return!1}function i(e,t,r){var n=this;try{e(t,r,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+k.toString(e));n._attachCancellationCallback(e)})}catch(e){return e}}function a(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?k.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function o(){return this._onCancelField}function s(e){this._onCancelField=e}function l(){this._cancellationParent=void 0,this._onCancelField=void 0}function c(e,t){if(0!=(1&t)){this._cancellationParent=e;var r=e._branchesRemainingToCancel;void 0===r&&(r=0),e._branchesRemainingToCancel=r+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function u(){var t=this._boundTo;return void 0!==t&&t instanceof e?t.isFulfilled()?t.value():void 0:t}function _(){this._trace=new C(this._peekContext())}function f(e,t){if(M(e)){var r=this._trace;if(void 0!==r&&t&&(r=r._parent),void 0!==r)r.attachExtraTrace(e);else if(!e.__stackCleaned__){var n=b(e);k.notEnumerableProp(e,"stack",n.message+"\n"+n.stack.join("\n")),k.notEnumerableProp(e,"__stackCleaned__",!0)}}}function h(t,r,n){if(ee.warnings){var i,a=new j(t);if(r)n._attachExtraTrace(a);else if(ee.longStackTraces&&(i=e._peekContext()))i.attachExtraTrace(a);else{var o=b(a);a.stack=o.message+"\n"+o.stack.join("\n")}K("warning",a)||v(a,"",!0)}}function d(e,t){for(var r=0;r<t.length-1;++r)t[r].push("From previous event:"),t[r]=t[r].join("\n");return r<t.length&&(t[r]=t[r].join("\n")),e+"\n"+t.join("\n")}function p(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function g(e){for(var t=e[0],r=1;r<e.length;++r){for(var n=e[r],i=t.length-1,a=t[i],o=-1,s=n.length-1;s>=0;--s)if(n[s]===a){o=s;break}for(s=o;s>=0;--s){var l=n[s];if(t[i]!==l)break;t.pop(),i--}t=n}}function y(e){for(var t=[],r=0;r<e.length;++r){var n=e[r],i="    (No stack trace)"===n||U.test(n),a=i&&X(n);i&&!a&&(x&&" "!==n.charAt(0)&&(n="    "+n),t.push(n))}return t}function m(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),r=0;r<t.length;++r){var n=t[r];if("    (No stack trace)"===n||U.test(n))break}return r>0&&"SyntaxError"!=e.name&&(t=t.slice(r)),t}function b(e){var t=e.stack,r=e.toString();return t="string"==typeof t&&t.length>0?m(e):["    (No stack trace)"],{message:r,stack:"SyntaxError"==e.name?t:y(t)}}function v(e,t,r){if("undefined"!=typeof console){var n;if(k.isObject(e)){var i=e.stack;n=t+L(i,e)}else n=t+String(e);"function"==typeof w?w(n,r):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(n)}}function T(e,t,r,n){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(n):t(r,n))}catch(e){R.throwLater(e)}"unhandledRejection"===e?K(e,r,n)||i||v(r,"Unhandled rejection "):K(e,n)}function A(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{if(t=e&&"function"==typeof e.toString?e.toString():k.toString(e),/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+I(t)+">, no stack trace)"}function I(e){return e.length<41?e:e.substr(0,38)+"..."}function O(){return"function"==typeof Q}function S(e){var t=e.match(Z);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function C(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);Q(this,C),t>32&&this.uncycle()}var E,N,w,P=e._getDomain,R=e._async,j=errors.Warning,k=util,M=k.canAttachTrace,F=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,D=/\((?:timers\.js):\d+:\d+\)/,$=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,U=null,L=null,x=!1,W=!(0==k.env("BLUEBIRD_DEBUG")||!k.env("BLUEBIRD_DEBUG")&&"development"!==k.env("NODE_ENV")),B=!(0==k.env("BLUEBIRD_WARNINGS")||!W&&!k.env("BLUEBIRD_WARNINGS")),G=!(0==k.env("BLUEBIRD_LONG_STACK_TRACES")||!W&&!k.env("BLUEBIRD_LONG_STACK_TRACES")),H=0!=k.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(B||!!k.env("BLUEBIRD_W_FORGOTTEN_RETURN"));e.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},e.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}},e.prototype._notifyUnhandledRejectionIsHandled=function(){T("rejectionHandled",E,void 0,this)},e.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},e.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),T("unhandledRejection",N,e,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},e.prototype._warn=function(e,t,r){return h(e,t,r||this)},e.onPossiblyUnhandledRejection=function(e){var t=P();N="function"==typeof e?null===t?e:k.domainBind(t,e):void 0},e.onUnhandledRejectionHandled=function(e){var t=P();E="function"==typeof e?null===t?e:k.domainBind(t,e):void 0};var V=function(){};e.longStackTraces=function(){if(R.haveItemsQueued()&&!ee.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ee.longStackTraces&&O()){var r=e.prototype._captureStackTrace,n=e.prototype._attachExtraTrace;ee.longStackTraces=!0,V=function(){if(R.haveItemsQueued()&&!ee.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");e.prototype._captureStackTrace=r,e.prototype._attachExtraTrace=n,t.deactivateLongStackTraces(),R.enableTrampoline(),ee.longStackTraces=!1},e.prototype._captureStackTrace=_,e.prototype._attachExtraTrace=f,t.activateLongStackTraces(),R.disableTrampolineIfNecessary()}},e.hasLongStackTraces=function(){return ee.longStackTraces&&O()};var Y=function(){try{if("function"==typeof CustomEvent){e=new CustomEvent("CustomEvent");return k.global.dispatchEvent(e),function(e,t){var r=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!k.global.dispatchEvent(r)}}if("function"==typeof Event){var e=new Event("CustomEvent");return k.global.dispatchEvent(e),function(e,t){var r=new Event(e.toLowerCase(),{cancelable:!0});return r.detail=t,!k.global.dispatchEvent(r)}}return(e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),k.global.dispatchEvent(e),function(e,t){var r=document.createEvent("CustomEvent");return r.initCustomEvent(e.toLowerCase(),!1,!0,t),!k.global.dispatchEvent(r)}}catch(e){}return function(){return!1}}(),z=k.isNode?function(){return process.emit.apply(process,arguments)}:k.global?function(e){var t="on"+e.toLowerCase(),r=k.global[t];return!!r&&(r.apply(k.global,[].slice.call(arguments,1)),!0)}:function(){return!1},q={promiseCreated:r,promiseFulfilled:r,promiseRejected:r,promiseResolved:r,promiseCancelled:r,promiseChained:function(e,t,r){return{promise:t,child:r}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,r){return{reason:t,promise:r}},rejectionHandled:r},K=function(e){var t=!1;try{t=z.apply(null,arguments)}catch(e){R.throwLater(e),t=!0}var r=!1;try{r=Y(e,q[e].apply(null,arguments))}catch(e){R.throwLater(e),r=!0}return r||t};e.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?e.longStackTraces():!t.longStackTraces&&e.hasLongStackTraces()&&V()),"warnings"in t){var r=t.warnings;ee.warnings=!!r,H=ee.warnings,k.isObject(r)&&"wForgottenReturn"in r&&(H=!!r.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!ee.cancellation){if(R.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");e.prototype._clearCancellationData=l,e.prototype._propagateFrom=c,e.prototype._onCancel=o,e.prototype._setOnCancel=s,e.prototype._attachCancellationCallback=a,e.prototype._execute=i,J=c,ee.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!ee.monitoring?(ee.monitoring=!0,e.prototype._fireEvent=K):!t.monitoring&&ee.monitoring&&(ee.monitoring=!1,e.prototype._fireEvent=n)),e},e.prototype._fireEvent=n,e.prototype._execute=function(e,t,r){try{e(t,r)}catch(e){return e}},e.prototype._onCancel=function(){},e.prototype._setOnCancel=function(e){},e.prototype._attachCancellationCallback=function(e){},e.prototype._captureStackTrace=function(){},e.prototype._attachExtraTrace=function(){},e.prototype._clearCancellationData=function(){},e.prototype._propagateFrom=function(e,t){};var J=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)},X=function(){return!1},Z=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;k.inherits(C,Error),t.CapturedTrace=C,C.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],r={},n=0,i=this;void 0!==i;++n)t.push(i),i=i._parent;for(n=(e=this._length=n)-1;n>=0;--n){var a=t[n].stack;void 0===r[a]&&(r[a]=n)}for(n=0;n<e;++n){var o=r[t[n].stack];if(void 0!==o&&o!==n){o>0&&(t[o-1]._parent=void 0,t[o-1]._length=1),t[n]._parent=void 0,t[n]._length=1;var s=n>0?t[n-1]:this;o<e-1?(s._parent=t[o+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var l=s._length+1,c=n-2;c>=0;--c)t[c]._length=l,l++;return}}}},C.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=b(e),r=t.message,n=[t.stack],i=this;void 0!==i;)n.push(y(i.stack.split("\n"))),i=i._parent;g(n),p(n),k.notEnumerableProp(e,"stack",d(r,n)),k.notEnumerableProp(e,"__stackCleaned__",!0)}};var Q=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():A(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,U=e,L=t;var r=Error.captureStackTrace;return X=function(e){return F.test(e)},function(e,t){Error.stackTraceLimit+=6,r(e,t),Error.stackTraceLimit-=6}}var n=new Error;if("string"==typeof n.stack&&n.stack.split("\n")[0].indexOf("stackDetection@")>=0)return U=/@/,L=t,x=!0,function(e){e.stack=(new Error).stack};var i;try{throw new Error}catch(e){i="stack"in e}return"stack"in n||!i||"number"!=typeof Error.stackTraceLimit?(L=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?A(t):t.toString()},null):(U=e,L=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(w=function(e){console.warn(e)},k.isNode&&process.stderr.isTTY?w=function(e,t){var r=t?"[33m":"[31m";console.warn(r+e+"[0m\n")}:k.isNode||"string"!=typeof(new Error).stack||(w=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var ee={warnings:B,longStackTraces:!1,cancellation:!1,monitoring:!1};return G&&e.longStackTraces(),{longStackTraces:function(){return ee.longStackTraces},warnings:function(){return ee.warnings},cancellation:function(){return ee.cancellation},monitoring:function(){return ee.monitoring},propagateFromFunction:function(){return J},boundValueFunction:function(){return u},checkForgottenReturns:function(e,t,r,n,i){if(void 0===e&&null!==t&&H){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&n._bitField))return;r&&(r+=" ");var a="",o="";if(t._trace){for(var s=t._trace.stack.split("\n"),l=y(s),c=l.length-1;c>=0;--c){var u=l[c];if(!D.test(u)){var _=u.match($);_&&(a="at "+_[1]+":"+_[2]+":"+_[3]+" ");break}}if(l.length>0)for(var f=l[0],c=0;c<s.length;++c)if(s[c]===f){c>0&&(o="\n"+s[c-1]);break}}var h="a promise was created in a "+r+"handler "+a+"but was not returned from it, see http://goo.gl/rRqMUw"+o;n._warn(h,!0,t)}},setBounds:function(e,t){if(O()){for(var r,n,i=e.stack.split("\n"),a=t.stack.split("\n"),o=-1,s=-1,l=0;l<i.length;++l)if(c=S(i[l])){r=c.fileName,o=c.line;break}for(l=0;l<a.length;++l){var c=S(a[l]);if(c){n=c.fileName,s=c.line;break}}o<0||s<0||!r||!n||r!==n||o>=s||(X=function(e){if(F.test(e))return!0;var t=S(e);return!!(t&&t.fileName===r&&o<=t.line&&t.line<=s)})}},warn:h,deprecated:function(e,t){var r=e+" is deprecated and will be removed in a future version.";return t&&(r+=" Use "+t+" instead."),h(r)},CapturedTrace:C,fireDomEvent:Y,fireGlobalEvent:z}},catch_filter=function(e){var t=util,r=es5.keys,n=t.tryCatch,i=t.errorObj;return function(a,o,s){return function(l){var c=s._boundValue();e:for(var u=0;u<a.length;++u){var _=a[u];if(_===Error||null!=_&&_.prototype instanceof Error){if(l instanceof _)return n(o).call(c,l)}else if("function"==typeof _){var f=n(_).call(c,l);if(f===i)return f;if(f)return n(o).call(c,l)}else if(t.isObject(l)){for(var h=r(_),d=0;d<h.length;++d){var p=h[d];if(_[p]!=l[p])continue e}return n(o).call(c,l)}}return e}}},_finally=function(e,t,r){function n(e,t,r){this.promise=e,this.type=t,this.handler=r,this.called=!1,this.cancelPromise=null}function i(e){this.finallyHandler=e}function a(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function o(){return l.call(this,this.promise._target()._settledValue())}function s(e){if(!a(this,e))return _.e=e,_}function l(n){var l=this.promise,c=this.handler;if(!this.called){this.called=!0;var f=this.isFinallyHandler()?c.call(l._boundValue()):c.call(l._boundValue(),n);if(f===r)return f;if(void 0!==f){l._setReturnedNonUndefined();var h=t(f,l);if(h instanceof e){if(null!=this.cancelPromise){if(h._isCancelled()){var d=new u("late cancellation observer");return l._attachExtraTrace(d),_.e=d,_}h.isPending()&&h._attachCancellationCallback(new i(this))}return h._then(o,s,void 0,this,void 0)}}}return l.isRejected()?(a(this),_.e=n,_):(a(this),n)}var c=util,u=e.CancellationError,_=c.errorObj,f=catch_filter(r);return n.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){a(this.finallyHandler)},e.prototype._passThrough=function(e,t,r,i){return"function"!=typeof e?this.then():this._then(r,i,void 0,new n(this,t,e),void 0)},e.prototype.lastly=e.prototype.finally=function(e){return this._passThrough(e,0,l,l)},e.prototype.tap=function(e){return this._passThrough(e,1,l)},e.prototype.tapCatch=function(t){var r=arguments.length;if(1===r)return this._passThrough(t,1,void 0,l);var n,i=new Array(r-1),a=0;for(n=0;n<r-1;++n){var o=arguments[n];if(!c.isObject(o))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+c.classString(o)));i[a++]=o}i.length=a;var s=arguments[n];return this._passThrough(f(i,s,this),1,void 0,l)},n},maybeWrapAsError$1=util.maybeWrapAsError,OperationalError$1=errors.OperationalError,rErrorKey=/^(?:name|message|stack|cause)$/,nodeback=nodebackForPromise,method=function(e,t,r,n,i){var a=util,o=a.tryCatch;e.method=function(r){if("function"!=typeof r)throw new e.TypeError("expecting a function but got "+a.classString(r));return function(){var n=new e(t);n._captureStackTrace(),n._pushContext();var a=o(r).apply(this,arguments),s=n._popContext();return i.checkForgottenReturns(a,s,"Promise.method",n),n._resolveFromSyncValue(a),n}},e.attempt=e.try=function(r){if("function"!=typeof r)return n("expecting a function but got "+a.classString(r));var s=new e(t);s._captureStackTrace(),s._pushContext();var l;if(arguments.length>1){i.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],u=arguments[2];l=a.isArray(c)?o(r).apply(u,c):o(r).call(u,c)}else l=o(r)();var _=s._popContext();return i.checkForgottenReturns(l,_,"Promise.try",s),s._resolveFromSyncValue(l),s},e.prototype._resolveFromSyncValue=function(e){e===a.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}},bind=function(e,t,r,n){var i=!1,a=function(e,t){this._reject(t)},o=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(a,a,null,this,e)},s=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},l=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(a){i||(i=!0,e.prototype._propagateFrom=n.propagateFromFunction(),e.prototype._boundValue=n.boundValueFunction());var c=r(a),u=new e(t);u._propagateFrom(this,1);var _=this._target();if(u._setBoundTo(c),c instanceof e){var f={promiseRejectionQueued:!1,promise:u,target:_,bindingPromise:c};_._then(t,o,void 0,u,f),c._then(s,l,void 0,u,f),u._setOnCancel(c)}else u._resolveCallback(_);return u},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,r){return e.resolve(r).bind(t)}},cancel=function(e,t,r,n){var i=util,a=i.tryCatch,o=i.errorObj,s=e._async;e.prototype.break=e.prototype.cancel=function(){if(!n.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var r=e._cancellationParent;if(null==r||!r._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=r}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),s.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(e,t){if(i.isArray(e))for(var r=0;r<e.length;++r)this._doInvokeOnCancel(e[r],t);else if(void 0!==e)if("function"==typeof e){if(!t){var n=a(e).call(this._boundValue());n===o&&(this._attachExtraTrace(n.e),s.throwLater(n.e))}}else e._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),s.invoke(this._doInvokeOnCancel,this,e)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}},direct_resolve=function(e){function t(){return this.value}function r(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(r){return r instanceof e&&r.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:r},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(r,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:e},void 0);var t=arguments[1];return this.caught(e,function(){throw t})},e.prototype.catchReturn=function(r){if(arguments.length<=1)return r instanceof e&&r.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:r},void 0);var n=arguments[1];n instanceof e&&n.suppressUnhandledRejections();return this.caught(r,function(){return n})}},synchronous_inspection=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var r=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},a=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},o=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return o.call(this._target())},e.prototype.isRejected=function(){return a.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return r.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),n.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t},join$1=function(e,t,r,n,i,a){var o,s=util,l=s.canEvaluate,c=s.tryCatch,u=s.errorObj;if(l){for(var _=[],f=[],h=[],d=0;d<8;++d)_.push(function(t){for(var r=new Array(t),n=0;n<r.length;++n)r[n]="this.p"+(n+1);var a=r.join(" = ")+" = null;",o="var promise;\n"+r.map(function(e){return"                                                         \n                promise = "+e+";                                      \n                if (promise instanceof Promise) {                            \n                    promise.cancel();                                        \n                }                                                            \n            "}).join("\n"),s=r.join(", "),l="Holder$"+t,_="return function(tryCatch, errorObj, Promise, async) {    \n            'use strict';                                                    \n            function [TheName](fn) {                                         \n                [TheProperties]                                              \n                this.fn = fn;                                                \n                this.asyncNeeded = true;                                     \n                this.now = 0;                                                \n            }                                                                \n                                                                             \n            [TheName].prototype._callFunction = function(promise) {          \n                promise._pushContext();                                      \n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \n                promise._popContext();                                       \n                if (ret === errorObj) {                                      \n                    promise._rejectCallback(ret.e, false);                   \n                } else {                                                     \n                    promise._resolveCallback(ret);                           \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype.checkFulfillment = function(promise) {       \n                var now = ++this.now;                                        \n                if (now === [TheTotal]) {                                    \n                    if (this.asyncNeeded) {                                  \n                        async.invoke(this._callFunction, this, promise);     \n                    } else {                                                 \n                        this._callFunction(promise);                         \n                    }                                                        \n                                                                             \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype._resultCancelled = function() {              \n                [CancellationCode]                                           \n            };                                                               \n                                                                             \n            return [TheName];                                                \n        }(tryCatch, errorObj, Promise, async);                               \n        ";return _=_.replace(/\[TheName\]/g,l).replace(/\[TheTotal\]/g,t).replace(/\[ThePassedArguments\]/g,s).replace(/\[TheProperties\]/g,a).replace(/\[CancellationCode\]/g,o),new Function("tryCatch","errorObj","Promise","async",_)(c,u,e,i)}(d+1)),f.push(function(e){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,e))}(d+1)),h.push(function(e){return new Function("promise","holder","                           \n            'use strict';                                                    \n            holder.pIndex = promise;                                         \n            ".replace(/Index/g,e))}(d+1));o=function(e){this._reject(e)}}e.join=function(){var i,c=arguments.length-1;if(c>0&&"function"==typeof arguments[c]&&(i=arguments[c],c<=8&&l)){(A=new e(n))._captureStackTrace();for(var u=new(0,_[c-1])(i),d=f,p=0;p<c;++p){var g=r(arguments[p],A);if(g instanceof e){var y=(g=g._target())._bitField;0==(50397184&y)?(g._then(d[p],o,void 0,A,u),h[p](g,u),u.asyncNeeded=!1):0!=(33554432&y)?d[p].call(A,g._value(),u):0!=(16777216&y)?A._reject(g._reason()):A._cancel()}else d[p].call(A,g,u)}if(!A._isFateSealed()){if(u.asyncNeeded){var m=a();null!==m&&(u.fn=s.domainBind(m,u.fn))}A._setAsyncGuaranteed(),A._setOnCancel(u)}return A}for(var b=arguments.length,v=new Array(b),T=0;T<b;++T)v[T]=arguments[T];i&&v.pop();var A=new t(v).promise();return void 0!==i?A.spread(i):A}},map$2=function(e,t,r,n,i,a){function o(e,t,r,n){this.constructor$(e),this._promise._captureStackTrace();var a=l();this._callback=null===a?t:c.domainBind(a,t),this._preservedValues=n===i?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=[],f.invoke(this._asyncInit,this,void 0)}function s(t,n,i,a){if("function"!=typeof n)return r("expecting a function but got "+c.classString(n));var s=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+c.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(i.concurrency)));s=i.concurrency}return s="number"==typeof s&&isFinite(s)&&s>=1?s:0,new o(t,n,s,a).promise()}var l=e._getDomain,c=util,u=c.tryCatch,_=c.errorObj,f=e._async;c.inherits(o,t),o.prototype._asyncInit=function(){this._init$(void 0,-2)},o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,r){var i=this._values,o=this.length(),s=this._preservedValues,l=this._limit;if(r<0){if(r=-1*r-1,i[r]=t,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(l>=1&&this._inFlight>=l)return i[r]=t,this._queue.push(r),!1;null!==s&&(s[r]=t);var c=this._promise,f=this._callback,h=c._boundValue();c._pushContext();var d=u(f).call(h,t,r,o),p=c._popContext();if(a.checkForgottenReturns(d,p,null!==s?"Promise.filter":"Promise.map",c),d===_)return this._reject(d.e),!0;var g=n(d,this._promise);if(g instanceof e){var y=(g=g._target())._bitField;if(0==(50397184&y))return l>=1&&this._inFlight++,i[r]=g,g._proxy(this,-1*(r+1)),!1;if(0==(33554432&y))return 0!=(16777216&y)?(this._reject(g._reason()),!0):(this._cancel(),!0);d=g._value()}i[r]=d}return++this._totalResolved>=o&&(null!==s?this._filter(i,s):this._resolve(i),!0)},o.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,r=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var n=e.pop();this._promiseFulfilled(r[n],n)}},o.prototype._filter=function(e,t){for(var r=t.length,n=new Array(r),i=0,a=0;a<r;++a)e[a]&&(n[i++]=t[a]);n.length=i,this._resolve(n)},o.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(e,t){return s(this,e,t,null)},e.map=function(e,t,r,n){return s(e,t,r,n)}},cr=Object.create;if(cr){var callerCache=cr(null),getterCache=cr(null);callerCache[" size"]=getterCache[" size"]=0}var call_get=function(e){function t(t,r){var n;if(null!=t&&(n=t[r]),"function"!=typeof n){var i="Object "+s.classString(t)+" has no method '"+s.toString(r)+"'";throw new e.TypeError(i)}return n}function r(e){return t(e,this.pop()).apply(e,this)}function n(e){return e[this]}function i(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}var a,o,s=util,l=s.canEvaluate,c=s.isIdentifier,u=function(e){return new Function("ensureMethod","                                    \n        return function(obj) {                                               \n            'use strict'                                                     \n            var len = this.length;                                           \n            ensureMethod(obj, 'methodName');                                 \n            switch(len) {                                                    \n                case 1: return obj.methodName(this[0]);                      \n                case 2: return obj.methodName(this[0], this[1]);             \n                case 3: return obj.methodName(this[0], this[1], this[2]);    \n                case 0: return obj.methodName();                             \n                default:                                                     \n                    return obj.methodName.apply(obj, this);                  \n            }                                                                \n        };                                                                   \n        ".replace(/methodName/g,e))(t)},_=function(e){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",e))},f=function(e,t,r){var n=r[e];if("function"!=typeof n){if(!c(e))return null;if(n=t(e),r[e]=n,r[" size"]++,r[" size"]>512){for(var i=Object.keys(r),a=0;a<256;++a)delete r[i[a]];r[" size"]=i.length-256}}return n};a=function(e){return f(e,u,callerCache)},o=function(e){return f(e,_,getterCache)},e.prototype.call=function(e){for(var t=arguments.length,n=new Array(Math.max(t-1,0)),i=1;i<t;++i)n[i-1]=arguments[i];if(l){var o=a(e);if(null!==o)return this._then(o,void 0,void 0,n,void 0)}return n.push(e),this._then(r,void 0,void 0,n,void 0)},e.prototype.get=function(e){var t;if("number"==typeof e)t=i;else if(l){var r=o(e);t=null!==r?r:n}else t=n;return this._then(t,void 0,void 0,e,void 0)}},using=function(e,t,r,n,i,a){function o(e){setTimeout(function(){throw e},0)}function s(e){var t=r(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function l(t,n){function a(){if(l>=c)return u._fulfill();var i=s(t[l++]);if(i instanceof e&&i._isDisposable()){try{i=r(i._getDisposer().tryDispose(n),t.promise)}catch(e){return o(e)}if(i instanceof e)return i._then(a,o,null,null,null)}a()}var l=0,c=t.length,u=new e(i);return a(),u}function c(e,t,r){this._data=e,this._promise=t,this._context=r}function u(e,t,r){this.constructor$(e,t,r)}function _(e){return c.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function f(e){this.length=e,this.promise=null,this[e-1]=null}var h=util,d=errors.TypeError,p=util.inherits,g=h.errorObj,y=h.tryCatch,m={};c.prototype.data=function(){return this._data},c.prototype.promise=function(){return this._promise},c.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():m},c.prototype.tryDispose=function(e){var t=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=t!==m?this.doDispose(t,e):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},c.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},p(u,c),u.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},f.prototype._resultCancelled=function(){for(var t=this.length,r=0;r<t;++r){var n=this[r];n instanceof e&&n.cancel()}},e.using=function(){var n=arguments.length;if(n<2)return t("you must pass at least 2 arguments to Promise.using");var i=arguments[n-1];if("function"!=typeof i)return t("expecting a function but got "+h.classString(i));var o,s=!0;2===n&&Array.isArray(arguments[0])?(n=(o=arguments[0]).length,s=!1):(o=arguments,n--);for(var u=new f(n),d=0;d<n;++d){var p=o[d];if(c.isDisposer(p)){var m=p;(p=p.promise())._setDisposable(m)}else{var b=r(p);b instanceof e&&(p=b._then(_,null,null,{resources:u,index:d},void 0))}u[d]=p}for(var v=new Array(u.length),d=0;d<v.length;++d)v[d]=e.resolve(u[d]).reflect();var T=e.all(v).then(function(e){for(var t=0;t<e.length;++t){var r=e[t];if(r.isRejected())return g.e=r.error(),g;if(!r.isFulfilled())return void T.cancel();e[t]=r.value()}A._pushContext(),i=y(i);var n=s?i.apply(void 0,e):i(e),o=A._popContext();return a.checkForgottenReturns(n,o,"Promise.using",A),n}),A=T.lastly(function(){var t=new e.PromiseInspection(T);return l(u,t)});return u.promise=A,A._setOnCancel(u),A},e.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(e){if("function"==typeof e)return new u(e,this,n());throw new d}},timers=function(e,t,r){function n(e){this.handle=e}function i(e){return clearTimeout(this.handle),e}function a(e){throw clearTimeout(this.handle),e}var o=util,s=e.TimeoutError;n.prototype._resultCancelled=function(){clearTimeout(this.handle)};var l=function(e){return c(+this).thenReturn(e)},c=e.delay=function(i,a){var o,s;return void 0!==a?(o=e.resolve(a)._then(l,null,null,i,void 0),r.cancellation()&&a instanceof e&&o._setOnCancel(a)):(o=new e(t),s=setTimeout(function(){o._fulfill()},+i),r.cancellation()&&o._setOnCancel(new n(s)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};e.prototype.delay=function(e){return c(e,this)};var u=function(e,t,r){var n;n="string"!=typeof t?t instanceof Error?t:new s("operation timed out"):new s(t),o.markAsOriginatingFromRejection(n),e._attachExtraTrace(n),e._reject(n),null!=r&&r.cancel()};e.prototype.timeout=function(e,t){e=+e;var o,s,l=new n(setTimeout(function(){o.isPending()&&u(o,t,s)},e));return r.cancellation()?(s=this.then(),(o=s._then(i,a,void 0,l,void 0))._setOnCancel(l)):o=this._then(i,a,void 0,l,void 0),o}},generators=function(e,t,r,n,i,a){function o(t,r,i){for(var a=0;a<r.length;++a){i._pushContext();var o=_(r[a])(t);if(i._popContext(),o===u){i._pushContext();var s=e.reject(u.e);return i._popContext(),s}var l=n(o,i);if(l instanceof e)return l}return null}function s(t,n,i,o){if(a.cancellation()){var s=new e(r),l=this._finallyPromise=new e(r);this._promise=s.lastly(function(){return l}),s._captureStackTrace(),s._setOnCancel(this)}else(this._promise=new e(r))._captureStackTrace();this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(f):f,this._yieldedPromise=null,this._cancellationPhase=!1}var l=errors.TypeError,c=util,u=c.errorObj,_=c.tryCatch,f=[];c.inherits(s,i),s.prototype._isResolved=function(){return null===this._promise},s.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},s.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if(void 0!==this._generator.return)this._promise._pushContext(),t=_(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=_(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},s.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=_(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},s.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=_(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},s.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},s.prototype._continue=function(t){var r=this._promise;if(t===u)return this._cleanup(),this._cancellationPhase?r.cancel():r._rejectCallback(t.e,!1);var i=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?r.cancel():r._resolveCallback(i);var a=n(i,this._promise);if(a instanceof e||null!==(a=o(a,this._yieldHandlers,this._promise))){var s=(a=a._target())._bitField;0==(50397184&s)?(this._yieldedPromise=a,a._proxy(this,null)):0!=(33554432&s)?e._async.invoke(this._promiseFulfilled,this,a._value()):0!=(16777216&s)?e._async.invoke(this._promiseRejected,this,a._reason()):this._promiseCancelled()}else this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(i))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},e.coroutine=function(e,t){if("function"!=typeof e)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=Object(t).yieldHandler,n=s,i=(new Error).stack;return function(){var t=e.apply(this,arguments),a=new n(void 0,void 0,r,i),o=a.promise();return a._generator=t,a._promiseFulfilled(void 0),o}},e.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new l("expecting a function but got "+c.classString(e));f.push(e)},e.spawn=function(r){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof r)return t("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new s(r,this),i=n.promise();return n._run(e.spawn),i}},nodeify=function(e){function t(e,t){var n=this;if(!i.isArray(e))return r.call(n,e,t);var l=o(t).apply(n._boundValue(),[null].concat(e));l===s&&a.throwLater(l.e)}function r(e,t){var r=this._boundValue(),n=void 0===e?o(t).call(r,null):o(t).call(r,null,e);n===s&&a.throwLater(n.e)}function n(e,t){var r=this;if(!e){var n=new Error(e+"");n.cause=e,e=n}var i=o(t).call(r._boundValue(),e);i===s&&a.throwLater(i.e)}var i=util,a=e._async,o=i.tryCatch,s=i.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(e,i){if("function"==typeof e){var a=r;void 0!==i&&Object(i).spread&&(a=t),this._then(a,n,void 0,this,e)}return this}},promisify=function(e,t){function r(e){return!b.test(e)}function n(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function i(e,t,r){var i=_.getDataPropertyOrDefault(e,t+r,y);return!!i&&n(i)}function a(e,t,r){for(var n=0;n<e.length;n+=2){var i=e[n];if(r.test(i))for(var a=i.replace(r,""),o=0;o<e.length;o+=2)if(e[o]===a)throw new g("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}function o(e,t,r,o){for(var s=_.inheritedDataKeys(e),l=[],c=0;c<s.length;++c){var u=s[c],f=e[u],h=o===v||v(u,f,e);"function"!=typeof f||n(f)||i(e,u,t)||!o(u,f,e,h)||l.push(u,f)}return a(l,t,r),l}function s(e,t,r,n,i){for(var a=new RegExp(T(t)+"$"),s=o(e,t,a,r),l=0,c=s.length;l<c;l+=2){var f=s[l],h=s[l+1],d=f+t;if(n===C)e[d]=C(f,u,f,h,t,i);else{var p=n(h,function(){return C(f,u,f,h,t,i)});_.notEnumerableProp(p,"__isPromisified__",!0),e[d]=p}}return _.toFastProperties(e),e}function l(e,t,r){return C(e,t,void 0,e,null,r)}var c,u={},_=util,f=nodeback,h=_.withAppended,d=_.maybeWrapAsError,p=_.canEvaluate,g=errors.TypeError,y={__isPromisified__:!0},m=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],b=new RegExp("^(?:"+m.join("|")+")$"),v=function(e){return _.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},T=function(e){return e.replace(/([$])/,"\\$")},A=function(e){for(var t=[e],r=Math.max(0,e-1-3),n=e-1;n>=r;--n)t.push(n);for(n=e+1;n<=3;++n)t.push(n);return t},I=function(e){return _.filledRange(e,"_arg","")},O=function(e){return _.filledRange(Math.max(e,3),"_arg","")},S=function(e){return"number"==typeof e.length?Math.max(Math.min(e.length,1024),0):0};c=function(r,n,i,a,o,s){function l(e){var t=I(e).join(", "),r=e>0?", ":"";return(g?"ret = callback.call(this, {{args}}, nodeback); break;\n":void 0===n?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n").replace("{{args}}",t).replace(", ",r)}var c=Math.max(0,S(a)-1),p=A(c),g="string"==typeof r||n===u,y="string"==typeof r?"this != null ? this['"+r+"'] : fn":"fn",m="'use strict';                                                \n        var ret = function (Parameters) {                                    \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._captureStackTrace();                                    \n            var nodeback = nodebackForPromise(promise, "+s+");   \n            var ret;                                                         \n            var callback = tryCatch([GetFunctionCode]);                      \n            switch(len) {                                                    \n                [CodeForSwitchCase]                                          \n            }                                                                \n            if (ret === errorObj) {                                          \n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n            }                                                                \n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \n            return promise;                                                  \n        };                                                                   \n        notEnumerableProp(ret, '__isPromisified__', true);                   \n        return ret;                                                          \n    ".replace("[CodeForSwitchCase]",function(){for(var e="",t=0;t<p.length;++t)e+="case "+p[t]+":"+l(p[t]);return e+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = nodeback;                                              \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",g?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n")}()).replace("[GetFunctionCode]",y);return m=m.replace("Parameters",O(c)),new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",m)(e,a,n,h,d,f,_.tryCatch,_.errorObj,_.notEnumerableProp,t)};var C=p?c:function(r,n,i,a,o,s){function l(){var i=n;n===u&&(i=this);var a=new e(t);a._captureStackTrace();var o="string"==typeof p&&this!==c?this[p]:r,l=f(a,s);try{o.apply(i,h(arguments,l))}catch(e){a._rejectCallback(d(e),!0,!0)}return a._isFateSealed()||a._setAsyncGuaranteed(),a}var c=function(){return this}(),p=r;return"string"==typeof p&&(r=a),_.notEnumerableProp(l,"__isPromisified__",!0),l};e.promisify=function(e,t){if("function"!=typeof e)throw new g("expecting a function but got "+_.classString(e));if(n(e))return e;var i=l(e,void 0===(t=Object(t)).context?u:t.context,!!t.multiArgs);return _.copyDescriptors(e,i,r),i},e.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new g("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var r=!!(t=Object(t)).multiArgs,n=t.suffix;"string"!=typeof n&&(n="Async");var i=t.filter;"function"!=typeof i&&(i=v);var a=t.promisifier;if("function"!=typeof a&&(a=C),!_.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var o=_.inheritedDataKeys(e),l=0;l<o.length;++l){var c=e[o[l]];"constructor"!==o[l]&&_.isClass(c)&&(s(c.prototype,n,i,a,r),s(c,n,i,a,r))}return s(e,n,i,a,r)}},props=function(e,t,r,n){function i(e){var t,r=!1;if(void 0!==o&&e instanceof o)t=u(e),r=!0;else{var n=c.keys(e),i=n.length;t=new Array(2*i);for(var a=0;a<i;++a){var s=n[a];t[a]=e[s],t[a+i]=s}}this.constructor$(t),this._isMap=r,this._init$(void 0,r?-6:-3)}function a(t){var a,o=r(t);return l(o)?(a=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new i(o).promise(),o instanceof e&&a._propagateFrom(o,2),a):n("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var o,s=util,l=s.isObject,c=es5;"function"==typeof Map&&(o=Map);var u=function(){function e(e,n){this[t]=e,this[t+r]=n,t++}var t=0,r=0;return function(n){r=n.size,t=0;var i=new Array(2*n.size);return n.forEach(e,i),i}}(),_=function(e){for(var t=new o,r=e.length/2|0,n=0;n<r;++n){var i=e[r+n],a=e[n];t.set(i,a)}return t};s.inherits(i,t),i.prototype._init=function(){},i.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var r;if(this._isMap)r=_(this._values);else{r={};for(var n=this.length(),i=0,a=this.length();i<a;++i)r[this._values[i+n]]=this._values[i]}return this._resolve(r),!0}return!1},i.prototype.shouldCopyValues=function(){return!1},i.prototype.getActualLength=function(e){return e>>1},e.prototype.props=function(){return a(this)},e.props=function(e){return a(e)}},race=function(e,t,r,n){function i(i,s){var l=r(i);if(l instanceof e)return o(l);if(null===(i=a.asArray(i)))return n("expecting an array or an iterable object but got "+a.classString(i));var c=new e(t);void 0!==s&&c._propagateFrom(s,3);for(var u=c._fulfill,_=c._reject,f=0,h=i.length;f<h;++f){var d=i[f];(void 0!==d||f in i)&&e.cast(d)._then(u,_,void 0,c,null)}return c}var a=util,o=function(e){return e.then(function(t){return i(t,e)})};e.race=function(e){return i(e,void 0)},e.prototype.race=function(){return i(this,void 0)}},reduce$1=function(e,t,r,n,i,a){function o(t,r,n,a){this.constructor$(t);var o=_();this._fn=null===o?r:f.domainBind(o,r),void 0!==n&&(n=e.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=a===i?Array(this._length):0===a?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function s(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function l(e,t,n,i){return"function"!=typeof t?r("expecting a function but got "+f.classString(t)):new o(e,t,n,i).promise()}function c(t){this.accum=t,this.array._gotAccum(t);var r=n(this.value,this.array._promise);return r instanceof e?(this.array._currentCancellable=r,r._then(u,void 0,void 0,this,void 0)):u.call(this,r)}function u(t){var r=this.array,n=r._promise,i=h(r._fn);n._pushContext();var o;(o=void 0!==r._eachValues?i.call(n._boundValue(),t,this.index,this.length):i.call(n._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(r._currentCancellable=o);var s=n._popContext();return a.checkForgottenReturns(o,s,void 0!==r._eachValues?"Promise.each":"Promise.reduce",n),o}var _=e._getDomain,f=util,h=f.tryCatch;f.inherits(o,t),o.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==i&&this._eachValues.push(e)},o.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},o.prototype._init=function(){},o.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},o.prototype.shouldCopyValues=function(){return!1},o.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},o.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},o.prototype._iterate=function(t){this._values=t;var r,n,i=t.length;if(void 0!==this._initialValue?(r=this._initialValue,n=0):(r=e.resolve(t[0]),n=1),this._currentCancellable=r,!r.isRejected())for(;n<i;++n){var a={accum:null,value:t[n],index:n,length:i,array:this};r=r._then(c,void 0,void 0,a,void 0)}void 0!==this._eachValues&&(r=r._then(this._eachComplete,void 0,void 0,this,void 0)),r._then(s,s,void 0,r,this)},e.prototype.reduce=function(e,t){return l(this,e,t,null)},e.reduce=function(e,t,r,n){return l(e,t,r,n)}},settle=function(e,t,r){function n(e){this.constructor$(e)}var i=e.PromiseInspection;util.inherits(n,t),n.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},n.prototype._promiseFulfilled=function(e,t){var r=new i;return r._bitField=33554432,r._settledValueField=e,this._promiseResolved(t,r)},n.prototype._promiseRejected=function(e,t){var r=new i;return r._bitField=16777216,r._settledValueField=e,this._promiseResolved(t,r)},e.settle=function(e){return r.deprecated(".settle()",".reflect()"),new n(e).promise()},e.prototype.settle=function(){return e.settle(this)}},some$1=function(e,t,r){function n(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function i(e,t){if((0|t)!==t||t<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var i=new n(e),a=i.promise();return i.setHowMany(t),i.init(),a}var a=util,o=errors.RangeError,s=errors.AggregateError,l=a.isArray,c={};a.inherits(n,t),n.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=l(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},n.prototype.init=function(){this._initialized=!0,this._init()},n.prototype.setUnwrap=function(){this._unwrap=!0},n.prototype.howMany=function(){return this._howMany},n.prototype.setHowMany=function(e){this._howMany=e},n.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},n.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},n.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},n.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new s,t=this.length();t<this._values.length;++t)this._values[t]!==c&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},n.prototype._fulfilled=function(){return this._totalResolved},n.prototype._rejected=function(){return this._values.length-this.length()},n.prototype._addRejected=function(e){this._values.push(e)},n.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},n.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},n.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new o(t)},n.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(e,t){return i(e,t)},e.prototype.some=function(e){return i(this,e)},e._SomePromiseArray=n},filter$1=function(e,t){var r=e.map;e.prototype.filter=function(e,n){return r(this,e,n,t)},e.filter=function(e,n,i){return r(e,n,i,t)}},each$2=function(e,t){function r(){return i(this)}var n=e.reduce,i=e.all;e.prototype.each=function(e){return n(this,e,t,0)._then(r,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return n(this,e,t,t)},e.each=function(e,i){return n(e,i,t,0)._then(r,void 0,void 0,e,void 0)},e.mapSeries=function(e,r){return n(e,r,t,t)}},any=function(e){function t(e){var t=new r(e),n=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),n}var r=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}},promise=createCommonjsModule(function(e){e.exports=function(){function t(){}function r(e,t){if(null==e||e.constructor!==n)throw new y("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new y("expecting a function but got "+f.classString(t))}function n(e){e!==b&&r(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function i(e){this.promise._resolveCallback(e)}function a(e){this.promise._rejectCallback(e,!1)}function o(e){var t=new n(b);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var s,l=function(){return new y("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},c=function(){return new n.PromiseInspection(this._target())},u=function(e){return n.reject(new y(e))},_={},f=util;s=f.isNode?function(){var e=process.domain;return void 0===e&&(e=null),e}:function(){return null},f.notEnumerableProp(n,"_getDomain",s);var h=es5,d=async,p=new d;h.defineProperty(n,"_async",{value:p});var g=errors,y=n.TypeError=g.TypeError;n.RangeError=g.RangeError;var m=n.CancellationError=g.CancellationError;n.TimeoutError=g.TimeoutError,n.OperationalError=g.OperationalError,n.RejectionError=g.OperationalError,n.AggregateError=g.AggregateError;var b=function(){},v={},T={},A=thenables(n,b),I=promise_array(n,b,A,u,t),O=context(n),S=O.create,C=debuggability(n,O),E=(C.CapturedTrace,_finally(n,A,T)),N=catch_filter(T),w=nodeback,P=f.errorObj,R=f.tryCatch;return n.prototype.toString=function(){return"[object Promise]"},n.prototype.caught=n.prototype.catch=function(e){var t=arguments.length;if(t>1){var r,n=new Array(t-1),i=0;for(r=0;r<t-1;++r){var a=arguments[r];if(!f.isObject(a))return u("Catch statement predicate: expecting an object but got "+f.classString(a));n[i++]=a}return n.length=i,e=arguments[r],this.then(void 0,N(n,e,this))}return this.then(void 0,e)},n.prototype.reflect=function(){return this._then(c,c,void 0,this,void 0)},n.prototype.then=function(e,t){if(C.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var r=".then() only accepts functions but was passed: "+f.classString(e);arguments.length>1&&(r+=", "+f.classString(t)),this._warn(r)}return this._then(e,t,void 0,void 0,void 0)},n.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},n.prototype.spread=function(e){return"function"!=typeof e?u("expecting a function but got "+f.classString(e)):this.all()._then(e,void 0,void 0,v,void 0)},n.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},n.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new I(this).promise()},n.prototype.error=function(e){return this.caught(f.originatesFromRejection,e)},n.getNewLibraryCopy=e.exports,n.is=function(e){return e instanceof n},n.fromNode=n.fromCallback=function(e){var t=new n(b);t._captureStackTrace();var r=arguments.length>1&&!!Object(arguments[1]).multiArgs,i=R(e)(w(t,r));return i===P&&t._rejectCallback(i.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},n.all=function(e){return new I(e).promise()},n.cast=function(e){var t=A(e);return t instanceof n||((t=new n(b))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},n.resolve=n.fulfilled=n.cast,n.reject=n.rejected=function(e){var t=new n(b);return t._captureStackTrace(),t._rejectCallback(e,!0),t},n.setScheduler=function(e){if("function"!=typeof e)throw new y("expecting a function but got "+f.classString(e));return p.setScheduler(e)},n.prototype._then=function(e,t,r,i,a){var o=void 0!==a,l=o?a:new n(b),c=this._target(),u=c._bitField;o||(l._propagateFrom(this,3),l._captureStackTrace(),void 0===i&&0!=(2097152&this._bitField)&&(i=0!=(50397184&u)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,l));var _=s();if(0!=(50397184&u)){var h,d,g=c._settlePromiseCtx;0!=(33554432&u)?(d=c._rejectionHandler0,h=e):0!=(16777216&u)?(d=c._fulfillmentHandler0,h=t,c._unsetRejectionIsUnhandled()):(g=c._settlePromiseLateCancellationObserver,d=new m("late cancellation observer"),c._attachExtraTrace(d),h=t),p.invoke(g,c,{handler:null===_?h:"function"==typeof h&&f.domainBind(_,h),promise:l,receiver:i,value:d})}else c._addCallbacks(e,t,l,i,_);return l},n.prototype._length=function(){return 65535&this._bitField},n.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},n.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},n.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},n.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},n.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},n.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},n.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},n.prototype._isFinal=function(){return(4194304&this._bitField)>0},n.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},n.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},n.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},n.prototype._setAsyncGuaranteed=function(){p.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},n.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==_)return void 0===t&&this._isBound()?this._boundValue():t},n.prototype._promiseAt=function(e){return this[4*e-4+2]},n.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},n.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},n.prototype._boundValue=function(){},n.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,r=e._rejectionHandler0,n=e._promise0,i=e._receiverAt(0);void 0===i&&(i=_),this._addCallbacks(t,r,n,i,null)},n.prototype._migrateCallbackAt=function(e,t){var r=e._fulfillmentHandlerAt(t),n=e._rejectionHandlerAt(t),i=e._promiseAt(t),a=e._receiverAt(t);void 0===a&&(a=_),this._addCallbacks(r,n,i,a,null)},n.prototype._addCallbacks=function(e,t,r,n,i){var a=this._length();if(a>=65531&&(a=0,this._setLength(0)),0===a)this._promise0=r,this._receiver0=n,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:f.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:f.domainBind(i,t));else{var o=4*a-4;this[o+2]=r,this[o+3]=n,"function"==typeof e&&(this[o+0]=null===i?e:f.domainBind(i,e)),"function"==typeof t&&(this[o+1]=null===i?t:f.domainBind(i,t))}return this._setLength(a+1),a},n.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},n.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(l(),!1);var r=A(e,this);if(!(r instanceof n))return this._fulfill(e);t&&this._propagateFrom(r,2);var i=r._target();if(i!==this){var a=i._bitField;if(0==(50397184&a)){var o=this._length();o>0&&i._migrateCallback0(this);for(var s=1;s<o;++s)i._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!=(33554432&a))this._fulfill(i._value());else if(0!=(16777216&a))this._reject(i._reason());else{var c=new m("late cancellation observer");i._attachExtraTrace(c),this._reject(c)}}else this._reject(l())}},n.prototype._rejectCallback=function(e,t,r){var n=f.ensureErrorObject(e),i=n===e;if(!i&&!r&&C.warnings()){var a="a promise was rejected with a non-error: "+f.classString(e);this._warn(a,!0)}this._attachExtraTrace(n,!!t&&i),this._reject(e)},n.prototype._resolveFromExecutor=function(e){if(e!==b){var t=this;this._captureStackTrace(),this._pushContext();var r=!0,n=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,r)});r=!1,this._popContext(),void 0!==n&&t._rejectCallback(n,!0)}},n.prototype._settlePromiseFromHandler=function(e,t,r,n){var i=n._bitField;if(0==(65536&i)){n._pushContext();var a;t===v?r&&"number"==typeof r.length?a=R(e).apply(this._boundValue(),r):(a=P).e=new y("cannot .spread() a non-array: "+f.classString(r)):a=R(e).call(t,r);var o=n._popContext();0==(65536&(i=n._bitField))&&(a===T?n._reject(r):a===P?n._rejectCallback(a.e,!1):(C.checkForgottenReturns(a,o,"",n,this),n._resolveCallback(a)))}},n.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},n.prototype._followee=function(){return this._rejectionHandler0},n.prototype._setFollowee=function(e){this._rejectionHandler0=e},n.prototype._settlePromise=function(e,r,i,a){var o=e instanceof n,s=this._bitField,l=0!=(134217728&s);0!=(65536&s)?(o&&e._invokeInternalOnCancel(),i instanceof E&&i.isFinallyHandler()?(i.cancelPromise=e,R(r).call(i,a)===P&&e._reject(P.e)):r===c?e._fulfill(c.call(i)):i instanceof t?i._promiseCancelled(e):o||e instanceof I?e._cancel():i.cancel()):"function"==typeof r?o?(l&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(r,i,a,e)):r.call(i,a,e):i instanceof t?i._isResolved()||(0!=(33554432&s)?i._promiseFulfilled(a,e):i._promiseRejected(a,e)):o&&(l&&e._setAsyncGuaranteed(),0!=(33554432&s)?e._fulfill(a):e._reject(a))},n.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,r=e.promise,i=e.receiver,a=e.value;"function"==typeof t?r instanceof n?this._settlePromiseFromHandler(t,i,a,r):t.call(i,a,r):r instanceof n&&r._reject(a)},n.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},n.prototype._settlePromise0=function(e,t,r){var n=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,e,i,t)},n.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},n.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var r=l();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():p.settlePromises(this))}},n.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return p.fatalError(e,f.isNode);(65535&t)>0?p.settlePromises(this):this._ensurePossibleRejectionHandled()}},n.prototype._fulfillPromises=function(e,t){for(var r=1;r<e;r++){var n=this._fulfillmentHandlerAt(r),i=this._promiseAt(r),a=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,a,t)}},n.prototype._rejectPromises=function(e,t){for(var r=1;r<e;r++){var n=this._rejectionHandlerAt(r),i=this._promiseAt(r),a=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,a,t)}},n.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var r=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,r,e),this._rejectPromises(t,r)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,e),this._fulfillPromises(t,n)}this._setLength(0)}this._clearCancellationData()},n.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},n.defer=n.pending=function(){return C.deprecated("Promise.defer","new Promise"),{promise:new n(b),resolve:i,reject:a}},f.notEnumerableProp(n,"_makeSelfResolutionError",l),method(n,b,A,u,C),bind(n,b,A,C),cancel(n,I,u,C),direct_resolve(n),synchronous_inspection(n),join$1(n,I,A,b,p,s),n.Promise=n,n.version="3.5.1",map$2(n,I,u,A,b,C),call_get(n),using(n,u,A,S,b,C),timers(n,b,C),generators(n,u,b,A,t,C),nodeify(n),promisify(n,b),props(n,I,A,u),race(n,b,A,u),reduce$1(n,I,u,A,b,C),settle(n,I,C),some$1(n,I,u),filter$1(n,b),each$2(n,b),any(n),f.toFastProperties(n),f.toFastProperties(n.prototype),o({a:1}),o({b:2}),o({c:3}),o(1),o(function(){}),o(void 0),o(!1),o(new n(b)),C.setBounds(d.firstLineError,f.lastLineError),n}}),old;"undefined"!=typeof Promise&&(old=Promise);var bluebird=promise();bluebird.noConflict=noConflict;var bluebird_1=bluebird,JointStatusError=function(e){function t(e){classCallCheck(this,t);var r=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.name="JointStatusError",r.status=objectUtils.get(e,"status",null),r.message=objectUtils.get(e,"message",null),r}return inherits(t,e),t}(Error),moment=createCommonjsModule(function(e,t){!function(t,r){e.exports=r()}(0,function(){function t(){return Ct.apply(null,arguments)}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function n(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function i(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}function a(e){return void 0===e}function o(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function l(e,t){var r,n=[];for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var r in t)c(t,r)&&(e[r]=t[r]);return c(t,"toString")&&(e.toString=t.toString),c(t,"valueOf")&&(e.valueOf=t.valueOf),e}function _(e,t,r,n){return Be(e,t,r,n,!0).utc()}function f(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function h(e){return null==e._pf&&(e._pf=f()),e._pf}function d(e){if(null==e._isValid){var t=h(e),r=Et.call(t.parsedDateParts,function(e){return null!=e}),n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function p(e){var t=_(NaN);return null!=e?u(h(t),e):h(t).userInvalidated=!0,t}function g(e,t){var r,n,i;if(a(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),a(t._i)||(e._i=t._i),a(t._f)||(e._f=t._f),a(t._l)||(e._l=t._l),a(t._strict)||(e._strict=t._strict),a(t._tzm)||(e._tzm=t._tzm),a(t._isUTC)||(e._isUTC=t._isUTC),a(t._offset)||(e._offset=t._offset),a(t._pf)||(e._pf=h(t)),a(t._locale)||(e._locale=t._locale),Nt.length>0)for(r=0;r<Nt.length;r++)a(i=t[n=Nt[r]])||(e[n]=i);return e}function y(e){g(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===wt&&(wt=!0,t.updateOffset(this),wt=!1)}function m(e){return e instanceof y||null!=e&&null!=e._isAMomentObject}function b(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function v(e){var t=+e,r=0;return 0!==t&&isFinite(t)&&(r=b(t)),r}function T(e,t,r){var n,i=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(n=0;n<i;n++)(r&&e[n]!==t[n]||!r&&v(e[n])!==v(t[n]))&&o++;return o+a}function A(e){!1===t.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function I(e,r){var n=!0;return u(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),n){for(var i,a=[],o=0;o<arguments.length;o++){if(i="","object"==typeof arguments[o]){i+="\n["+o+"] ";for(var s in arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[o];a.push(i)}A(e+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),n=!1}return r.apply(this,arguments)},r)}function O(e,r){null!=t.deprecationHandler&&t.deprecationHandler(e,r),Pt[e]||(A(r),Pt[e]=!0)}function S(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function C(e,t){var r,i=u({},e);for(r in t)c(t,r)&&(n(e[r])&&n(t[r])?(i[r]={},u(i[r],e[r]),u(i[r],t[r])):null!=t[r]?i[r]=t[r]:delete i[r]);for(r in e)c(e,r)&&!c(t,r)&&n(e[r])&&(i[r]=u({},i[r]));return i}function E(e){null!=e&&this.set(e)}function N(e,t){var r=e.toLowerCase();Dt[r]=Dt[r+"s"]=Dt[t]=e}function w(e){return"string"==typeof e?Dt[e]||Dt[e.toLowerCase()]:void 0}function P(e){var t,r,n={};for(r in e)c(e,r)&&(t=w(r))&&(n[t]=e[r]);return n}function R(e,t){$t[e]=t}function j(e){var t=[];for(var r in e)t.push({unit:r,priority:$t[r]});return t.sort(function(e,t){return e.priority-t.priority}),t}function k(e,t,r){var n=""+Math.abs(e),i=t-n.length;return(e>=0?r?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+n}function M(e,t,r,n){var i=n;"string"==typeof n&&(i=function(){return this[n]()}),e&&(Wt[e]=i),t&&(Wt[t[0]]=function(){return k(i.apply(this,arguments),t[1],t[2])}),r&&(Wt[r]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function F(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function D(e){var t,r,n=e.match(Ut);for(t=0,r=n.length;t<r;t++)Wt[n[t]]?n[t]=Wt[n[t]]:n[t]=F(n[t]);return function(t){var i,a="";for(i=0;i<r;i++)a+=S(n[i])?n[i].call(t,e):n[i];return a}}function $(e,t){return e.isValid()?(t=U(t,e.localeData()),xt[t]=xt[t]||D(t),xt[t](e)):e.localeData().invalidDate()}function U(e,t){var r=5;for(Lt.lastIndex=0;r>=0&&Lt.test(e);)e=e.replace(Lt,function(e){return t.longDateFormat(e)||e}),Lt.lastIndex=0,r-=1;return e}function L(e,t,r){ar[e]=S(t)?t:function(e,n){return e&&r?r:t}}function x(e,t){return c(ar,e)?ar[e](t._strict,t._locale):new RegExp(W(e))}function W(e){return B(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,r,n,i){return t||r||n||i}))}function B(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function G(e,t){var r,n=t;for("string"==typeof e&&(e=[e]),o(t)&&(n=function(e,r){r[t]=v(e)}),r=0;r<e.length;r++)or[e[r]]=n}function H(e,t){G(e,function(e,r,n,i){n._w=n._w||{},t(e,n._w,n,i)})}function V(e,t,r){null!=t&&c(or,e)&&or[e](t,r._a,r,e)}function Y(e){return z(e)?366:365}function z(e){return e%4==0&&e%100!=0||e%400==0}function q(e,r){return function(n){return null!=n?(J(this,e,n),t.updateOffset(this,r),this):K(this,e)}}function K(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function J(e,t,r){e.isValid()&&!isNaN(r)&&("FullYear"===t&&z(e.year())?e._d["set"+(e._isUTC?"UTC":"")+t](r,e.month(),Z(r,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](r))}function X(e,t){return(e%t+t)%t}function Z(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=X(t,12);return e+=(t-r)/12,1===r?z(e)?29:28:31-r%7%2}function Q(e,t,r){var n,i,a,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)a=_([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(a,"").toLocaleLowerCase();return r?"MMM"===t?-1!==(i=gr.call(this._shortMonthsParse,o))?i:null:-1!==(i=gr.call(this._longMonthsParse,o))?i:null:"MMM"===t?-1!==(i=gr.call(this._shortMonthsParse,o))?i:-1!==(i=gr.call(this._longMonthsParse,o))?i:null:-1!==(i=gr.call(this._longMonthsParse,o))?i:-1!==(i=gr.call(this._shortMonthsParse,o))?i:null}function ee(e,t){var r;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=v(t);else if(t=e.localeData().monthsParse(t),!o(t))return e;return r=Math.min(e.date(),Z(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,r),e}function te(e){return null!=e?(ee(this,e),t.updateOffset(this,!0),this):K(this,"Month")}function re(){function e(e,t){return t.length-e.length}var t,r,n=[],i=[],a=[];for(t=0;t<12;t++)r=_([2e3,t]),n.push(this.monthsShort(r,"")),i.push(this.months(r,"")),a.push(this.months(r,"")),a.push(this.monthsShort(r,""));for(n.sort(e),i.sort(e),a.sort(e),t=0;t<12;t++)n[t]=B(n[t]),i[t]=B(i[t]);for(t=0;t<24;t++)a[t]=B(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function ne(e,t,r,n,i,a,o){var s=new Date(e,t,r,n,i,a,o);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function ie(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function ae(e,t,r){var n=7+t-r;return-((7+ie(e,0,n).getUTCDay()-t)%7)+n-1}function oe(e,t,r,n,i){var a,o,s=1+7*(t-1)+(7+r-n)%7+ae(e,n,i);return s<=0?o=Y(a=e-1)+s:s>Y(e)?(a=e+1,o=s-Y(e)):(a=e,o=s),{year:a,dayOfYear:o}}function se(e,t,r){var n,i,a=ae(e.year(),t,r),o=Math.floor((e.dayOfYear()-a-1)/7)+1;return o<1?n=o+le(i=e.year()-1,t,r):o>le(e.year(),t,r)?(n=o-le(e.year(),t,r),i=e.year()+1):(i=e.year(),n=o),{week:n,year:i}}function le(e,t,r){var n=ae(e,t,r),i=ae(e+1,t,r);return(Y(e)-n+i)/7}function ce(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function ue(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function _e(e,t,r){var n,i,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)a=_([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(a,"").toLocaleLowerCase();return r?"dddd"===t?-1!==(i=gr.call(this._weekdaysParse,o))?i:null:"ddd"===t?-1!==(i=gr.call(this._shortWeekdaysParse,o))?i:null:-1!==(i=gr.call(this._minWeekdaysParse,o))?i:null:"dddd"===t?-1!==(i=gr.call(this._weekdaysParse,o))?i:-1!==(i=gr.call(this._shortWeekdaysParse,o))?i:-1!==(i=gr.call(this._minWeekdaysParse,o))?i:null:"ddd"===t?-1!==(i=gr.call(this._shortWeekdaysParse,o))?i:-1!==(i=gr.call(this._weekdaysParse,o))?i:-1!==(i=gr.call(this._minWeekdaysParse,o))?i:null:-1!==(i=gr.call(this._minWeekdaysParse,o))?i:-1!==(i=gr.call(this._weekdaysParse,o))?i:-1!==(i=gr.call(this._shortWeekdaysParse,o))?i:null}function fe(){function e(e,t){return t.length-e.length}var t,r,n,i,a,o=[],s=[],l=[],c=[];for(t=0;t<7;t++)r=_([2e3,1]).day(t),n=this.weekdaysMin(r,""),i=this.weekdaysShort(r,""),a=this.weekdays(r,""),o.push(n),s.push(i),l.push(a),c.push(n),c.push(i),c.push(a);for(o.sort(e),s.sort(e),l.sort(e),c.sort(e),t=0;t<7;t++)s[t]=B(s[t]),l[t]=B(l[t]),c[t]=B(c[t]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function he(){return this.hours()%12||12}function de(e,t){M(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function pe(e,t){return t._meridiemParse}function ge(e){return e?e.toLowerCase().replace("_","-"):e}function ye(e){for(var t,r,n,i,a=0;a<e.length;){for(t=(i=ge(e[a]).split("-")).length,r=(r=ge(e[a+1]))?r.split("-"):null;t>0;){if(n=me(i.slice(0,t).join("-")))return n;if(r&&r.length>=t&&T(i,r,!0)>=t-1)break;t--}a++}return null}function me(t){var r=null;if(!Mr[t]&&e&&e.exports)try{r=Pr._abbr,commonjsRequire("./locale/"+t),be(r)}catch(e){}return Mr[t]}function be(e,t){var r;return e&&(r=a(t)?Te(e):ve(e,t))&&(Pr=r),Pr._abbr}function ve(e,t){if(null!==t){var r=kr;if(t.abbr=e,null!=Mr[e])O("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Mr[e]._config;else if(null!=t.parentLocale){if(null==Mr[t.parentLocale])return Fr[t.parentLocale]||(Fr[t.parentLocale]=[]),Fr[t.parentLocale].push({name:e,config:t}),null;r=Mr[t.parentLocale]._config}return Mr[e]=new E(C(r,t)),Fr[e]&&Fr[e].forEach(function(e){ve(e.name,e.config)}),be(e),Mr[e]}return delete Mr[e],null}function Te(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Pr;if(!r(e)){if(t=me(e))return t;e=[e]}return ye(e)}function Ae(e){var t,r=e._a;return r&&-2===h(e).overflow&&(t=r[lr]<0||r[lr]>11?lr:r[cr]<1||r[cr]>Z(r[sr],r[lr])?cr:r[ur]<0||r[ur]>24||24===r[ur]&&(0!==r[_r]||0!==r[fr]||0!==r[hr])?ur:r[_r]<0||r[_r]>59?_r:r[fr]<0||r[fr]>59?fr:r[hr]<0||r[hr]>999?hr:-1,h(e)._overflowDayOfYear&&(t<sr||t>cr)&&(t=cr),h(e)._overflowWeeks&&-1===t&&(t=dr),h(e)._overflowWeekday&&-1===t&&(t=pr),h(e).overflow=t),e}function Ie(e,t,r){return null!=e?e:null!=t?t:r}function Oe(e){var r=new Date(t.now());return e._useUTC?[r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()]:[r.getFullYear(),r.getMonth(),r.getDate()]}function Se(e){var t,r,n,i,a=[];if(!e._d){for(n=Oe(e),e._w&&null==e._a[cr]&&null==e._a[lr]&&Ce(e),null!=e._dayOfYear&&(i=Ie(e._a[sr],n[sr]),(e._dayOfYear>Y(i)||0===e._dayOfYear)&&(h(e)._overflowDayOfYear=!0),r=ie(i,0,e._dayOfYear),e._a[lr]=r.getUTCMonth(),e._a[cr]=r.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=n[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ur]&&0===e._a[_r]&&0===e._a[fr]&&0===e._a[hr]&&(e._nextDay=!0,e._a[ur]=0),e._d=(e._useUTC?ie:ne).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ur]=24),e._w&&void 0!==e._w.d&&e._w.d!==e._d.getDay()&&(h(e).weekdayMismatch=!0)}}function Ce(e){var t,r,n,i,a,o,s,l;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)a=1,o=4,r=Ie(t.GG,e._a[sr],se(Ge(),1,4).year),n=Ie(t.W,1),((i=Ie(t.E,1))<1||i>7)&&(l=!0);else{a=e._locale._week.dow,o=e._locale._week.doy;var c=se(Ge(),a,o);r=Ie(t.gg,e._a[sr],c.year),n=Ie(t.w,c.week),null!=t.d?((i=t.d)<0||i>6)&&(l=!0):null!=t.e?(i=t.e+a,(t.e<0||t.e>6)&&(l=!0)):i=a}n<1||n>le(r,a,o)?h(e)._overflowWeeks=!0:null!=l?h(e)._overflowWeekday=!0:(s=oe(r,n,i,a,o),e._a[sr]=s.year,e._dayOfYear=s.dayOfYear)}function Ee(e){var t,r,n,i,a,o,s=e._i,l=Dr.exec(s)||$r.exec(s);if(l){for(h(e).iso=!0,t=0,r=Lr.length;t<r;t++)if(Lr[t][1].exec(l[1])){i=Lr[t][0],n=!1!==Lr[t][2];break}if(null==i)return void(e._isValid=!1);if(l[3]){for(t=0,r=xr.length;t<r;t++)if(xr[t][1].exec(l[3])){a=(l[2]||" ")+xr[t][0];break}if(null==a)return void(e._isValid=!1)}if(!n&&null!=a)return void(e._isValid=!1);if(l[4]){if(!Ur.exec(l[4]))return void(e._isValid=!1);o="Z"}e._f=i+(a||"")+(o||""),Fe(e)}else e._isValid=!1}function Ne(e,t,r,n,i,a){var o=[we(e),vr.indexOf(t),parseInt(r,10),parseInt(n,10),parseInt(i,10)];return a&&o.push(parseInt(a,10)),o}function we(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Pe(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function Re(e,t,r){return!e||Sr.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(h(r).weekdayMismatch=!0,r._isValid=!1,!1)}function je(e,t,r){if(e)return Gr[e];if(t)return 0;var n=parseInt(r,10),i=n%100;return 60*((n-i)/100)+i}function ke(e){var t=Br.exec(Pe(e._i));if(t){var r=Ne(t[4],t[3],t[2],t[5],t[6],t[7]);if(!Re(t[1],r,e))return;e._a=r,e._tzm=je(t[8],t[9],t[10]),e._d=ie.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),h(e).rfc2822=!0}else e._isValid=!1}function Me(e){var r=Wr.exec(e._i);null===r?(Ee(e),!1===e._isValid&&(delete e._isValid,ke(e),!1===e._isValid&&(delete e._isValid,t.createFromInputFallback(e)))):e._d=new Date(+r[1])}function Fe(e){if(e._f!==t.ISO_8601)if(e._f!==t.RFC_2822){e._a=[],h(e).empty=!0;var r,n,i,a,o,s=""+e._i,l=s.length,c=0;for(i=U(e._f,e._locale).match(Ut)||[],r=0;r<i.length;r++)a=i[r],(n=(s.match(x(a,e))||[])[0])&&((o=s.substr(0,s.indexOf(n))).length>0&&h(e).unusedInput.push(o),s=s.slice(s.indexOf(n)+n.length),c+=n.length),Wt[a]?(n?h(e).empty=!1:h(e).unusedTokens.push(a),V(a,n,e)):e._strict&&!n&&h(e).unusedTokens.push(a);h(e).charsLeftOver=l-c,s.length>0&&h(e).unusedInput.push(s),e._a[ur]<=12&&!0===h(e).bigHour&&e._a[ur]>0&&(h(e).bigHour=void 0),h(e).parsedDateParts=e._a.slice(0),h(e).meridiem=e._meridiem,e._a[ur]=De(e._locale,e._a[ur],e._meridiem),Se(e),Ae(e)}else ke(e);else Ee(e)}function De(e,t,r){var n;return null==r?t:null!=e.meridiemHour?e.meridiemHour(t,r):null!=e.isPM?((n=e.isPM(r))&&t<12&&(t+=12),n||12!==t||(t=0),t):t}function $e(e){var t,r,n,i,a;if(0===e._f.length)return h(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)a=0,t=g({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Fe(t),d(t)&&(a+=h(t).charsLeftOver,a+=10*h(t).unusedTokens.length,h(t).score=a,(null==n||a<n)&&(n=a,r=t));u(e,r||t)}function Ue(e){if(!e._d){var t=P(e._i);e._a=l([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Se(e)}}function Le(e){var t=new y(Ae(xe(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function xe(e){var t=e._i,n=e._f;return e._locale=e._locale||Te(e._l),null===t||void 0===n&&""===t?p({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),m(t)?new y(Ae(t)):(s(t)?e._d=t:r(n)?$e(e):n?Fe(e):We(e),d(e)||(e._d=null),e))}function We(e){var i=e._i;a(i)?e._d=new Date(t.now()):s(i)?e._d=new Date(i.valueOf()):"string"==typeof i?Me(e):r(i)?(e._a=l(i.slice(0),function(e){return parseInt(e,10)}),Se(e)):n(i)?Ue(e):o(i)?e._d=new Date(i):t.createFromInputFallback(e)}function Be(e,t,a,o,s){var l={};return!0!==a&&!1!==a||(o=a,a=void 0),(n(e)&&i(e)||r(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=s,l._l=a,l._i=e,l._f=t,l._strict=o,Le(l)}function Ge(e,t,r,n){return Be(e,t,r,n,!1)}function He(e,t){var n,i;if(1===t.length&&r(t[0])&&(t=t[0]),!t.length)return Ge();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}function Ve(e){for(var t in e)if(-1===gr.call(Yr,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var r=!1,n=0;n<Yr.length;++n)if(e[Yr[n]]){if(r)return!1;parseFloat(e[Yr[n]])!==v(e[Yr[n]])&&(r=!0)}return!0}function Ye(e){var t=P(e),r=t.year||0,n=t.quarter||0,i=t.month||0,a=t.week||0,o=t.day||0,s=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._isValid=Ve(t),this._milliseconds=+u+1e3*c+6e4*l+1e3*s*60*60,this._days=+o+7*a,this._months=+i+3*n+12*r,this._data={},this._locale=Te(),this._bubble()}function ze(e){return e instanceof Ye}function qe(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ke(e,t){M(e,0,0,function(){var e=this.utcOffset(),r="+";return e<0&&(e=-e,r="-"),r+k(~~(e/60),2)+t+k(~~e%60,2)})}function Je(e,t){var r=(t||"").match(e);if(null===r)return null;var n=((r[r.length-1]||[])+"").match(zr)||["-",0,0],i=60*n[1]+v(n[2]);return 0===i?0:"+"===n[0]?i:-i}function Xe(e,r){var n,i;return r._isUTC?(n=r.clone(),i=(m(e)||s(e)?e.valueOf():Ge(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),t.updateOffset(n,!1),n):Ge(e).local()}function Ze(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Qe(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function et(e,t){var r,n,i,a=e,s=null;return ze(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:o(e)?(a={},t?a[t]=e:a.milliseconds=e):(s=qr.exec(e))?(r="-"===s[1]?-1:1,a={y:0,d:v(s[cr])*r,h:v(s[ur])*r,m:v(s[_r])*r,s:v(s[fr])*r,ms:v(qe(1e3*s[hr]))*r}):(s=Kr.exec(e))?(r="-"===s[1]?-1:(s[1],1),a={y:tt(s[2],r),M:tt(s[3],r),w:tt(s[4],r),d:tt(s[5],r),h:tt(s[6],r),m:tt(s[7],r),s:tt(s[8],r)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(i=nt(Ge(a.from),Ge(a.to)),(a={}).ms=i.milliseconds,a.M=i.months),n=new Ye(a),ze(e)&&c(e,"_locale")&&(n._locale=e._locale),n}function tt(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function rt(e,t){var r={milliseconds:0,months:0};return r.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function nt(e,t){var r;return e.isValid()&&t.isValid()?(t=Xe(t,e),e.isBefore(t)?r=rt(e,t):((r=rt(t,e)).milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function it(e,t){return function(r,n){var i,a;return null===n||isNaN(+n)||(O(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=r,r=n,n=a),r="string"==typeof r?+r:r,i=et(r,n),at(this,i,e),this}}function at(e,r,n,i){var a=r._milliseconds,o=qe(r._days),s=qe(r._months);e.isValid()&&(i=null==i||i,s&&ee(e,K(e,"Month")+s*n),o&&J(e,"Date",K(e,"Date")+o*n),a&&e._d.setTime(e._d.valueOf()+a*n),i&&t.updateOffset(e,o||s))}function ot(e,t){var r,n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return r=t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(n+1,"months")-i),-(n+r)||0}function st(e){var t;return void 0===e?this._locale._abbr:(null!=(t=Te(e))&&(this._locale=t),this)}function lt(){return this._locale}function ct(e,t){M(0,[e,e.length],0,t)}function ut(e,t,r,n,i){var a;return null==e?se(this,n,i).year:(a=le(e,n,i),t>a&&(t=a),_t.call(this,e,t,r,n,i))}function _t(e,t,r,n,i){var a=oe(e,t,r,n,i),o=ie(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function ft(e){return e}function ht(e,t,r,n){var i=Te(),a=_().set(n,t);return i[r](a,e)}function dt(e,t,r){if(o(e)&&(t=e,e=void 0),e=e||"",null!=t)return ht(e,t,r,"month");var n,i=[];for(n=0;n<12;n++)i[n]=ht(e,n,r,"month");return i}function pt(e,t,r,n){"boolean"==typeof e?(o(t)&&(r=t,t=void 0),t=t||""):(r=t=e,e=!1,o(t)&&(r=t,t=void 0),t=t||"");var i=Te(),a=e?i._week.dow:0;if(null!=r)return ht(t,(r+a)%7,n,"day");var s,l=[];for(s=0;s<7;s++)l[s]=ht(t,(s+a)%7,n,"day");return l}function gt(e,t,r,n){var i=et(t,r);return e._milliseconds+=n*i._milliseconds,e._days+=n*i._days,e._months+=n*i._months,e._bubble()}function yt(e){return e<0?Math.floor(e):Math.ceil(e)}function mt(e){return 4800*e/146097}function bt(e){return 146097*e/4800}function vt(e){return function(){return this.as(e)}}function Tt(e){return function(){return this.isValid()?this._data[e]:NaN}}function At(e,t,r,n,i){return i.relativeTime(t||1,!!r,e,n)}function It(e,t,r){var n=et(e).abs(),i=In(n.as("s")),a=In(n.as("m")),o=In(n.as("h")),s=In(n.as("d")),l=In(n.as("M")),c=In(n.as("y")),u=i<=On.ss&&["s",i]||i<On.s&&["ss",i]||a<=1&&["m"]||a<On.m&&["mm",a]||o<=1&&["h"]||o<On.h&&["hh",o]||s<=1&&["d"]||s<On.d&&["dd",s]||l<=1&&["M"]||l<On.M&&["MM",l]||c<=1&&["y"]||["yy",c];return u[2]=t,u[3]=+e>0,u[4]=r,At.apply(null,u)}function Ot(e){return(e>0)-(e<0)||+e}function St(){if(!this.isValid())return this.localeData().invalidDate();var e,t,r,n=Sn(this._milliseconds)/1e3,i=Sn(this._days),a=Sn(this._months);t=b((e=b(n/60))/60),n%=60,e%=60;var o=r=b(a/12),s=a%=12,l=i,c=t,u=e,_=n?n.toFixed(3).replace(/\.?0+$/,""):"",f=this.asSeconds();if(!f)return"P0D";var h=f<0?"-":"",d=Ot(this._months)!==Ot(f)?"-":"",p=Ot(this._days)!==Ot(f)?"-":"",g=Ot(this._milliseconds)!==Ot(f)?"-":"";return h+"P"+(o?d+o+"Y":"")+(s?d+s+"M":"")+(l?p+l+"D":"")+(c||u||_?"T":"")+(c?g+c+"H":"")+(u?g+u+"M":"")+(_?g+_+"S":"")}var Ct,Et;Et=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),r=t.length>>>0,n=0;n<r;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};var Nt=t.momentProperties=[],wt=!1,Pt={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var Rt;Rt=Object.keys?Object.keys:function(e){var t,r=[];for(t in e)c(e,t)&&r.push(t);return r};var jt={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},kt={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Mt=/\d{1,2}/,Ft={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Dt={},$t={},Ut=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Lt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,xt={},Wt={},Bt=/\d/,Gt=/\d\d/,Ht=/\d{3}/,Vt=/\d{4}/,Yt=/[+-]?\d{6}/,zt=/\d\d?/,qt=/\d\d\d\d?/,Kt=/\d\d\d\d\d\d?/,Jt=/\d{1,3}/,Xt=/\d{1,4}/,Zt=/[+-]?\d{1,6}/,Qt=/\d+/,er=/[+-]?\d+/,tr=/Z|[+-]\d\d:?\d\d/gi,rr=/Z|[+-]\d\d(?::?\d\d)?/gi,nr=/[+-]?\d+(\.\d{1,3})?/,ir=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ar={},or={},sr=0,lr=1,cr=2,ur=3,_r=4,fr=5,hr=6,dr=7,pr=8;M("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),M(0,["YY",2],0,function(){return this.year()%100}),M(0,["YYYY",4],0,"year"),M(0,["YYYYY",5],0,"year"),M(0,["YYYYYY",6,!0],0,"year"),N("year","y"),R("year",1),L("Y",er),L("YY",zt,Gt),L("YYYY",Xt,Vt),L("YYYYY",Zt,Yt),L("YYYYYY",Zt,Yt),G(["YYYYY","YYYYYY"],sr),G("YYYY",function(e,r){r[sr]=2===e.length?t.parseTwoDigitYear(e):v(e)}),G("YY",function(e,r){r[sr]=t.parseTwoDigitYear(e)}),G("Y",function(e,t){t[sr]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return v(e)+(v(e)>68?1900:2e3)};var gr,yr=q("FullYear",!0);gr=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},M("M",["MM",2],"Mo",function(){return this.month()+1}),M("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),M("MMMM",0,0,function(e){return this.localeData().months(this,e)}),N("month","M"),R("month",8),L("M",zt),L("MM",zt,Gt),L("MMM",function(e,t){return t.monthsShortRegex(e)}),L("MMMM",function(e,t){return t.monthsRegex(e)}),G(["M","MM"],function(e,t){t[lr]=v(e)-1}),G(["MMM","MMMM"],function(e,t,r,n){var i=r._locale.monthsParse(e,n,r._strict);null!=i?t[lr]=i:h(r).invalidMonth=e});var mr=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,br="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),vr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Tr=ir,Ar=ir;M("w",["ww",2],"wo","week"),M("W",["WW",2],"Wo","isoWeek"),N("week","w"),N("isoWeek","W"),R("week",5),R("isoWeek",5),L("w",zt),L("ww",zt,Gt),L("W",zt),L("WW",zt,Gt),H(["w","ww","W","WW"],function(e,t,r,n){t[n.substr(0,1)]=v(e)});var Ir={dow:0,doy:6};M("d",0,"do","day"),M("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),M("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),M("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),M("e",0,0,"weekday"),M("E",0,0,"isoWeekday"),N("day","d"),N("weekday","e"),N("isoWeekday","E"),R("day",11),R("weekday",11),R("isoWeekday",11),L("d",zt),L("e",zt),L("E",zt),L("dd",function(e,t){return t.weekdaysMinRegex(e)}),L("ddd",function(e,t){return t.weekdaysShortRegex(e)}),L("dddd",function(e,t){return t.weekdaysRegex(e)}),H(["dd","ddd","dddd"],function(e,t,r,n){var i=r._locale.weekdaysParse(e,n,r._strict);null!=i?t.d=i:h(r).invalidWeekday=e}),H(["d","e","E"],function(e,t,r,n){t[n]=v(e)});var Or="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Sr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Cr="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Er=ir,Nr=ir,wr=ir;M("H",["HH",2],0,"hour"),M("h",["hh",2],0,he),M("k",["kk",2],0,function(){return this.hours()||24}),M("hmm",0,0,function(){return""+he.apply(this)+k(this.minutes(),2)}),M("hmmss",0,0,function(){return""+he.apply(this)+k(this.minutes(),2)+k(this.seconds(),2)}),M("Hmm",0,0,function(){return""+this.hours()+k(this.minutes(),2)}),M("Hmmss",0,0,function(){return""+this.hours()+k(this.minutes(),2)+k(this.seconds(),2)}),de("a",!0),de("A",!1),N("hour","h"),R("hour",13),L("a",pe),L("A",pe),L("H",zt),L("h",zt),L("k",zt),L("HH",zt,Gt),L("hh",zt,Gt),L("kk",zt,Gt),L("hmm",qt),L("hmmss",Kt),L("Hmm",qt),L("Hmmss",Kt),G(["H","HH"],ur),G(["k","kk"],function(e,t,r){var n=v(e);t[ur]=24===n?0:n}),G(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e}),G(["h","hh"],function(e,t,r){t[ur]=v(e),h(r).bigHour=!0}),G("hmm",function(e,t,r){var n=e.length-2;t[ur]=v(e.substr(0,n)),t[_r]=v(e.substr(n)),h(r).bigHour=!0}),G("hmmss",function(e,t,r){var n=e.length-4,i=e.length-2;t[ur]=v(e.substr(0,n)),t[_r]=v(e.substr(n,2)),t[fr]=v(e.substr(i)),h(r).bigHour=!0}),G("Hmm",function(e,t,r){var n=e.length-2;t[ur]=v(e.substr(0,n)),t[_r]=v(e.substr(n))}),G("Hmmss",function(e,t,r){var n=e.length-4,i=e.length-2;t[ur]=v(e.substr(0,n)),t[_r]=v(e.substr(n,2)),t[fr]=v(e.substr(i))});var Pr,Rr=/[ap]\.?m?\.?/i,jr=q("Hours",!0),kr={calendar:jt,longDateFormat:kt,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:Mt,relativeTime:Ft,months:br,monthsShort:vr,week:Ir,weekdays:Or,weekdaysMin:Cr,weekdaysShort:Sr,meridiemParse:Rr},Mr={},Fr={},Dr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,$r=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ur=/Z|[+-]\d\d(?::?\d\d)?/,Lr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],xr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Wr=/^\/?Date\((\-?\d+)/i,Br=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Gr={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};t.createFromInputFallback=I("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var Hr=I("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ge.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:p()}),Vr=I("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ge.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:p()}),Yr=["year","quarter","month","week","day","hour","minute","second","millisecond"];Ke("Z",":"),Ke("ZZ",""),L("Z",rr),L("ZZ",rr),G(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=Je(rr,e)});var zr=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var qr=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Kr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;et.fn=Ye.prototype,et.invalid=function(){return et(NaN)};var Jr=it(1,"add"),Xr=it(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Zr=I("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});M(0,["gg",2],0,function(){return this.weekYear()%100}),M(0,["GG",2],0,function(){return this.isoWeekYear()%100}),ct("gggg","weekYear"),ct("ggggg","weekYear"),ct("GGGG","isoWeekYear"),ct("GGGGG","isoWeekYear"),N("weekYear","gg"),N("isoWeekYear","GG"),R("weekYear",1),R("isoWeekYear",1),L("G",er),L("g",er),L("GG",zt,Gt),L("gg",zt,Gt),L("GGGG",Xt,Vt),L("gggg",Xt,Vt),L("GGGGG",Zt,Yt),L("ggggg",Zt,Yt),H(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,n){t[n.substr(0,2)]=v(e)}),H(["gg","GG"],function(e,r,n,i){r[i]=t.parseTwoDigitYear(e)}),M("Q",0,"Qo","quarter"),N("quarter","Q"),R("quarter",7),L("Q",Bt),G("Q",function(e,t){t[lr]=3*(v(e)-1)}),M("D",["DD",2],"Do","date"),N("date","D"),R("date",9),L("D",zt),L("DD",zt,Gt),L("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),G(["D","DD"],cr),G("Do",function(e,t){t[cr]=v(e.match(zt)[0],10)});var Qr=q("Date",!0);M("DDD",["DDDD",3],"DDDo","dayOfYear"),N("dayOfYear","DDD"),R("dayOfYear",4),L("DDD",Jt),L("DDDD",Ht),G(["DDD","DDDD"],function(e,t,r){r._dayOfYear=v(e)}),M("m",["mm",2],0,"minute"),N("minute","m"),R("minute",14),L("m",zt),L("mm",zt,Gt),G(["m","mm"],_r);var en=q("Minutes",!1);M("s",["ss",2],0,"second"),N("second","s"),R("second",15),L("s",zt),L("ss",zt,Gt),G(["s","ss"],fr);var tn=q("Seconds",!1);M("S",0,0,function(){return~~(this.millisecond()/100)}),M(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),M(0,["SSS",3],0,"millisecond"),M(0,["SSSS",4],0,function(){return 10*this.millisecond()}),M(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),M(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),M(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),M(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),M(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),N("millisecond","ms"),R("millisecond",16),L("S",Jt,Bt),L("SS",Jt,Gt),L("SSS",Jt,Ht);var rn;for(rn="SSSS";rn.length<=9;rn+="S")L(rn,Qt);for(rn="S";rn.length<=9;rn+="S")G(rn,function(e,t){t[hr]=v(1e3*("0."+e))});var nn=q("Milliseconds",!1);M("z",0,0,"zoneAbbr"),M("zz",0,0,"zoneName");var an=y.prototype;an.add=Jr,an.calendar=function(e,r){var n=e||Ge(),i=Xe(n,this).startOf("day"),a=t.calendarFormat(this,i)||"sameElse",o=r&&(S(r[a])?r[a].call(this,n):r[a]);return this.format(o||this.localeData().calendar(a,this,Ge(n)))},an.clone=function(){return new y(this)},an.diff=function(e,t,r){var n,i,a;if(!this.isValid())return NaN;if(!(n=Xe(e,this)).isValid())return NaN;switch(i=6e4*(n.utcOffset()-this.utcOffset()),t=w(t)){case"year":a=ot(this,n)/12;break;case"month":a=ot(this,n);break;case"quarter":a=ot(this,n)/3;break;case"second":a=(this-n)/1e3;break;case"minute":a=(this-n)/6e4;break;case"hour":a=(this-n)/36e5;break;case"day":a=(this-n-i)/864e5;break;case"week":a=(this-n-i)/6048e5;break;default:a=this-n}return r?a:b(a)},an.endOf=function(e){return void 0===(e=w(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},an.format=function(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var r=$(this,e);return this.localeData().postformat(r)},an.from=function(e,t){return this.isValid()&&(m(e)&&e.isValid()||Ge(e).isValid())?et({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},an.fromNow=function(e){return this.from(Ge(),e)},an.to=function(e,t){return this.isValid()&&(m(e)&&e.isValid()||Ge(e).isValid())?et({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},an.toNow=function(e){return this.to(Ge(),e)},an.get=function(e){return e=w(e),S(this[e])?this[e]():this},an.invalidAt=function(){return h(this).overflow},an.isAfter=function(e,t){var r=m(e)?e:Ge(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=w(a(t)?"millisecond":t))?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf())},an.isBefore=function(e,t){var r=m(e)?e:Ge(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=w(a(t)?"millisecond":t))?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf())},an.isBetween=function(e,t,r,n){return("("===(n=n||"()")[0]?this.isAfter(e,r):!this.isBefore(e,r))&&(")"===n[1]?this.isBefore(t,r):!this.isAfter(t,r))},an.isSame=function(e,t){var r,n=m(e)?e:Ge(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=w(t||"millisecond"))?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()))},an.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},an.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},an.isValid=function(){return d(this)},an.lang=Zr,an.locale=st,an.localeData=lt,an.max=Vr,an.min=Hr,an.parsingFlags=function(){return u({},h(this))},an.set=function(e,t){if("object"==typeof e)for(var r=j(e=P(e)),n=0;n<r.length;n++)this[r[n].unit](e[r[n].unit]);else if(e=w(e),S(this[e]))return this[e](t);return this},an.startOf=function(e){switch(e=w(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},an.subtract=Xr,an.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},an.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},an.toDate=function(){return new Date(this.valueOf())},an.toISOString=function(){if(!this.isValid())return null;var e=this.clone().utc();return e.year()<0||e.year()>9999?$(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):S(Date.prototype.toISOString)?this.toDate().toISOString():$(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},an.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var r="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(r+n+"-MM-DD[T]HH:mm:ss.SSS"+i)},an.toJSON=function(){return this.isValid()?this.toISOString():null},an.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},an.unix=function(){return Math.floor(this.valueOf()/1e3)},an.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},an.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},an.year=yr,an.isLeapYear=function(){return z(this.year())},an.weekYear=function(e){return ut.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},an.isoWeekYear=function(e){return ut.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},an.quarter=an.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},an.month=te,an.daysInMonth=function(){return Z(this.year(),this.month())},an.week=an.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},an.isoWeek=an.isoWeeks=function(e){var t=se(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},an.weeksInYear=function(){var e=this.localeData()._week;return le(this.year(),e.dow,e.doy)},an.isoWeeksInYear=function(){return le(this.year(),1,4)},an.date=Qr,an.day=an.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=ce(e,this.localeData()),this.add(e-t,"d")):t},an.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},an.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=ue(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},an.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},an.hour=an.hours=jr,an.minute=an.minutes=en,an.second=an.seconds=tn,an.millisecond=an.milliseconds=nn,an.utcOffset=function(e,r,n){var i,a=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Je(rr,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&r&&(i=Ze(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==e&&(!r||this._changeInProgress?at(this,et(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:Ze(this)},an.utc=function(e){return this.utcOffset(0,e)},an.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ze(this),"m")),this},an.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Je(tr,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},an.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Ge(e).utcOffset():0,(this.utcOffset()-e)%60==0)},an.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},an.isLocal=function(){return!!this.isValid()&&!this._isUTC},an.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},an.isUtc=Qe,an.isUTC=Qe,an.zoneAbbr=function(){return this._isUTC?"UTC":""},an.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},an.dates=I("dates accessor is deprecated. Use date instead.",Qr),an.months=I("months accessor is deprecated. Use month instead",te),an.years=I("years accessor is deprecated. Use year instead",yr),an.zone=I("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),an.isDSTShifted=I("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!a(this._isDSTShifted))return this._isDSTShifted;var e={};if(g(e,this),(e=xe(e))._a){var t=e._isUTC?_(e._a):Ge(e._a);this._isDSTShifted=this.isValid()&&T(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var on=E.prototype;on.calendar=function(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return S(n)?n.call(t,r):n},on.longDateFormat=function(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},on.invalidDate=function(){return this._invalidDate},on.ordinal=function(e){return this._ordinal.replace("%d",e)},on.preparse=ft,on.postformat=ft,on.relativeTime=function(e,t,r,n){var i=this._relativeTime[r];return S(i)?i(e,t,r,n):i.replace(/%d/i,e)},on.pastFuture=function(e,t){var r=this._relativeTime[e>0?"future":"past"];return S(r)?r(t):r.replace(/%s/i,t)},on.set=function(e){var t,r;for(r in e)S(t=e[r])?this[r]=t:this["_"+r]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},on.months=function(e,t){return e?r(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||mr).test(t)?"format":"standalone"][e.month()]:r(this._months)?this._months:this._months.standalone},on.monthsShort=function(e,t){return e?r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[mr.test(t)?"format":"standalone"][e.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},on.monthsParse=function(e,t,r){var n,i,a;if(this._monthsParseExact)return Q.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(i=_([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),r||this._monthsParse[n]||(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[n]=new RegExp(a.replace(".",""),"i")),r&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(r&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}},on.monthsRegex=function(e){return this._monthsParseExact?(c(this,"_monthsRegex")||re.call(this),e?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=Ar),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},on.monthsShortRegex=function(e){return this._monthsParseExact?(c(this,"_monthsRegex")||re.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=Tr),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},on.week=function(e){return se(e,this._week.dow,this._week.doy).week},on.firstDayOfYear=function(){return this._week.doy},on.firstDayOfWeek=function(){return this._week.dow},on.weekdays=function(e,t){return e?r(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:r(this._weekdays)?this._weekdays:this._weekdays.standalone},on.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},on.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},on.weekdaysParse=function(e,t,r){var n,i,a;if(this._weekdaysParseExact)return _e.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(i=_([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[n]=new RegExp(a.replace(".",""),"i")),r&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(r&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(r&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}},on.weekdaysRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||fe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=Er),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},on.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||fe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Nr),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},on.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||fe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=wr),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},on.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},on.meridiem=function(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"},be("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===v(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),t.lang=I("moment.lang is deprecated. Use moment.locale instead.",be),t.langData=I("moment.langData is deprecated. Use moment.localeData instead.",Te);var sn=Math.abs,ln=vt("ms"),cn=vt("s"),un=vt("m"),_n=vt("h"),fn=vt("d"),hn=vt("w"),dn=vt("M"),pn=vt("y"),gn=Tt("milliseconds"),yn=Tt("seconds"),mn=Tt("minutes"),bn=Tt("hours"),vn=Tt("days"),Tn=Tt("months"),An=Tt("years"),In=Math.round,On={ss:44,s:45,m:45,h:22,d:26,M:11},Sn=Math.abs,Cn=Ye.prototype;return Cn.isValid=function(){return this._isValid},Cn.abs=function(){var e=this._data;return this._milliseconds=sn(this._milliseconds),this._days=sn(this._days),this._months=sn(this._months),e.milliseconds=sn(e.milliseconds),e.seconds=sn(e.seconds),e.minutes=sn(e.minutes),e.hours=sn(e.hours),e.months=sn(e.months),e.years=sn(e.years),this},Cn.add=function(e,t){return gt(this,e,t,1)},Cn.subtract=function(e,t){return gt(this,e,t,-1)},Cn.as=function(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if("month"===(e=w(e))||"year"===e)return t=this._days+n/864e5,r=this._months+mt(t),"month"===e?r:r/12;switch(t=this._days+Math.round(bt(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},Cn.asMilliseconds=ln,Cn.asSeconds=cn,Cn.asMinutes=un,Cn.asHours=_n,Cn.asDays=fn,Cn.asWeeks=hn,Cn.asMonths=dn,Cn.asYears=pn,Cn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12):NaN},Cn._bubble=function(){var e,t,r,n,i,a=this._milliseconds,o=this._days,s=this._months,l=this._data;return a>=0&&o>=0&&s>=0||a<=0&&o<=0&&s<=0||(a+=864e5*yt(bt(s)+o),o=0,s=0),l.milliseconds=a%1e3,e=b(a/1e3),l.seconds=e%60,t=b(e/60),l.minutes=t%60,r=b(t/60),l.hours=r%24,o+=b(r/24),i=b(mt(o)),s+=i,o-=yt(bt(i)),n=b(s/12),s%=12,l.days=o,l.months=s,l.years=n,this},Cn.clone=function(){return et(this)},Cn.get=function(e){return e=w(e),this.isValid()?this[e+"s"]():NaN},Cn.milliseconds=gn,Cn.seconds=yn,Cn.minutes=mn,Cn.hours=bn,Cn.days=vn,Cn.weeks=function(){return b(this.days()/7)},Cn.months=Tn,Cn.years=An,Cn.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),r=It(this,!e,t);return e&&(r=t.pastFuture(+this,r)),t.postformat(r)},Cn.toISOString=St,Cn.toString=St,Cn.toJSON=St,Cn.locale=st,Cn.localeData=lt,Cn.toIsoString=I("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",St),Cn.lang=Zr,M("X",0,0,"unix"),M("x",0,0,"valueOf"),L("x",er),L("X",nr),G("X",function(e,t,r){r._d=new Date(1e3*parseFloat(e,10))}),G("x",function(e,t,r){r._d=new Date(v(e))}),t.version="2.19.1",function(e){Ct=e}(Ge),t.fn=an,t.min=function(){return He("isBefore",[].slice.call(arguments,0))},t.max=function(){return He("isAfter",[].slice.call(arguments,0))},t.now=function(){return Date.now?Date.now():+new Date},t.utc=_,t.unix=function(e){return Ge(1e3*e)},t.months=function(e,t){return dt(e,t,"months")},t.isDate=s,t.locale=be,t.invalid=p,t.duration=et,t.isMoment=m,t.weekdays=function(e,t,r){return pt(e,t,r,"weekdays")},t.parseZone=function(){return Ge.apply(null,arguments).parseZone()},t.localeData=Te,t.isDuration=ze,t.monthsShort=function(e,t){return dt(e,t,"monthsShort")},t.weekdaysMin=function(e,t,r){return pt(e,t,r,"weekdaysMin")},t.defineLocale=ve,t.updateLocale=function(e,t){if(null!=t){var r,n=kr;null!=Mr[e]&&(n=Mr[e]._config),(r=new E(t=C(n,t))).parentLocale=Mr[e],Mr[e]=r,be(e)}else null!=Mr[e]&&(null!=Mr[e].parentLocale?Mr[e]=Mr[e].parentLocale:null!=Mr[e]&&delete Mr[e]);return Mr[e]},t.locales=function(){return Rt(Mr)},t.weekdaysShort=function(e,t,r){return pt(e,t,r,"weekdaysShort")},t.normalizeUnits=w,t.relativeTimeRounding=function(e){return void 0===e?In:"function"==typeof e&&(In=e,!0)},t.relativeTimeThreshold=function(e,t){return void 0!==On[e]&&(void 0===t?On[e]:(On[e]=t,"s"===e&&(On.ss=t-1),!0))},t.calendarFormat=function(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"},t.prototype=an,t})}),dateUtils={now:now},_castSlice=castSlice,_createCaseFirst=createCaseFirst,upperFirst=_createCaseFirst("toUpperCase"),upperFirst_1=upperFirst,capitalize_1=capitalize,_basePropertyOf=basePropertyOf,deburredLetters={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},deburrLetter=_basePropertyOf(deburredLetters),_deburrLetter=deburrLetter,reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rsComboMarksRange$3="\\u0300-\\u036f",reComboHalfMarksRange$3="\\ufe20-\\ufe2f",rsComboSymbolsRange$3="\\u20d0-\\u20ff",rsComboRange$3=rsComboMarksRange$3+reComboHalfMarksRange$3+rsComboSymbolsRange$3,rsCombo$2="["+rsComboRange$3+"]",reComboMark=RegExp(rsCombo$2,"g"),deburr_1=deburr,reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_asciiWords=asciiWords,reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_hasUnicodeWord=hasUnicodeWord,rsAstralRange$3="\\ud800-\\udfff",rsComboMarksRange$4="\\u0300-\\u036f",reComboHalfMarksRange$4="\\ufe20-\\ufe2f",rsComboSymbolsRange$4="\\u20d0-\\u20ff",rsComboRange$4=rsComboMarksRange$4+reComboHalfMarksRange$4+rsComboSymbolsRange$4,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange$3="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos$1="['’]",rsBreak="["+rsBreakRange+"]",rsCombo$3="["+rsComboRange$4+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange$3+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz$2="\\ud83c[\\udffb-\\udfff]",rsModifier$2="(?:"+rsCombo$3+"|"+rsFitz$2+")",rsNonAstral$2="[^"+rsAstralRange$3+"]",rsRegional$2="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$2="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ$3="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos$1+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos$1+"(?:D|LL|M|RE|S|T|VE))?",reOptMod$2=rsModifier$2+"?",rsOptVar$2="["+rsVarRange$3+"]?",rsOptJoin$2="(?:"+rsZWJ$3+"(?:"+[rsNonAstral$2,rsRegional$2,rsSurrPair$2].join("|")+")"+rsOptVar$2+reOptMod$2+")*",rsOrdLower="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",rsOrdUpper="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",rsSeq$2=rsOptVar$2+reOptMod$2+rsOptJoin$2,rsEmoji="(?:"+[rsDingbat,rsRegional$2,rsSurrPair$2].join("|")+")"+rsSeq$2,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g"),_unicodeWords=unicodeWords,words_1=words,rsApos="['’]",reApos=RegExp(rsApos,"g"),_createCompounder=createCompounder,camelCase=_createCompounder(function(e,t,r){return t=t.toLowerCase(),e+(r?capitalize_1(t):t)}),camelCase_1=camelCase,endsWith_1=endsWith,htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},escapeHtmlChar=_basePropertyOf(htmlEscapes),_escapeHtmlChar=escapeHtmlChar,reUnescapedHtml=/[&<>"']/g,reHasUnescapedHtml=RegExp(reUnescapedHtml.source),_escape=escape,reRegExpChar$1=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar$1.source),escapeRegExp_1=escapeRegExp,kebabCase=_createCompounder(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),kebabCase_1=kebabCase,lowerCase=_createCompounder(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),lowerCase_1=lowerCase,lowerFirst=_createCaseFirst("toLowerCase"),lowerFirst_1=lowerFirst,MAX_SAFE_INTEGER$4=9007199254740991,nativeFloor$3=Math.floor,_baseRepeat=baseRepeat,nativeCeil$2=Math.ceil,_createPadding=createPadding,nativeCeil$1=Math.ceil,nativeFloor$2=Math.floor,pad_1=pad,padEnd_1=padEnd,padStart_1=padStart,reTrimStart=/^\s+/,nativeParseInt=_root.parseInt,_parseInt=parseInt$1,repeat_1=repeat,replace_1=replace,snakeCase=_createCompounder(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),snakeCase_1=snakeCase,MAX_ARRAY_LENGTH$3=4294967295,split_1=split,startCase=_createCompounder(function(e,t,r){return e+(r?" ":"")+upperFirst_1(t)}),startCase_1=startCase,startsWith_1=startsWith,attempt=_baseRest(function(e,t){try{return _apply(e,void 0,t)}catch(e){return isError_1(e)?e:new Error(e)}}),attempt_1=attempt,stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_escapeStringChar=escapeStringChar,reInterpolate=/<%=([\s\S]+?)%>/g,_reInterpolate=reInterpolate,reEscape=/<%-([\s\S]+?)%>/g,_reEscape=reEscape,reEvaluate=/<%([\s\S]+?)%>/g,_reEvaluate=reEvaluate,templateSettings={escape:_reEscape,evaluate:_reEvaluate,interpolate:_reInterpolate,variable:"",imports:{_:{escape:_escape}}},templateSettings_1=templateSettings,reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,template_1=template,toLower_1=toLower,toUpper_1=toUpper,_charsEndIndex=charsEndIndex,_charsStartIndex=charsStartIndex,reTrim$1=/^\s+|\s+$/g,trim_1=trim,reTrimEnd=/\s+$/,trimEnd_1=trimEnd,reTrimStart$1=/^\s+/,trimStart_1=trimStart,DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...",reFlags$1=/\w*$/,truncate_1=truncate,htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},unescapeHtmlChar=_basePropertyOf(htmlUnescapes),_unescapeHtmlChar=unescapeHtmlChar,reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),_unescape=unescape,upperCase=_createCompounder(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),upperCase_1=upperCase,string={camelCase:camelCase_1,capitalize:capitalize_1,deburr:deburr_1,endsWith:endsWith_1,escape:_escape,escapeRegExp:escapeRegExp_1,kebabCase:kebabCase_1,lowerCase:lowerCase_1,lowerFirst:lowerFirst_1,pad:pad_1,padEnd:padEnd_1,padStart:padStart_1,parseInt:_parseInt,repeat:repeat_1,replace:replace_1,snakeCase:snakeCase_1,split:split_1,startCase:startCase_1,startsWith:startsWith_1,template:template_1,templateSettings:templateSettings_1,toLower:toLower_1,toUpper:toUpper_1,trim:trim_1,trimEnd:trimEnd_1,trimStart:trimStart_1,truncate:truncate_1,unescape:_unescape,upperCase:upperCase_1,upperFirst:upperFirst_1,words:words_1},stringUtils={toCamelCase:string.camelCase,toKebabCase:string.kebabCase,toSnakeCase:string.snakeCase,toPascalCase:toPascalCase},ACTION={RESOURCE_MAIN:"main",RESOURCE_ASSOCIATION:"association",SPEC_MODEL_NAME:"modelName",SPEC_ASSOCIATION_NAME:"name",SPEC_FIELDS:"fields",SPEC_FIELDS_OPT_NAME:"name",SPEC_FIELDS_OPT_TYPE:"type",SPEC_FIELDS_OPT_DEFAULT_VALUE:"defaultValue",SPEC_FIELDS_OPT_REQUIRED:"required",SPEC_FIELDS_OPT_REQUIRED_OR:"requiredOr",SPEC_FIELDS_OPT_LOOKUP:"lookup",SPEC_FIELDS_OPT_LOOKUP_OR:"lookupOr",SPEC_FIELDS_OPT_LOCKED:"locked",SPEC_FIELDS_TO_RETURN:"fieldsToReturn",SPEC_FORCE_ASSOCIATIONS:"forceAssociations",SPEC_FORCE_LOAD_DIRECT:"forceLoadDirect",SPEC_DEFAULT_ORDER_BY:"defaultOrderBy",SPEC_AUTH:"auth",SPEC_AUTH_RULES:"rules",SPEC_AUTH_OWNER_CREDS:"ownerCreds",INPUT_FIELDS:"fields",INPUT_FIELD_SET:"fieldSet",INPUT_ORDER_BY:"orderBy",INPUT_ASSOCIATIONS:"associations",INPUT_LOAD_DIRECT:"loadDirect",INPUT_PAGINATE:"paginate",INPUT_PAGINATE_SKIP:"skip",INPUT_PAGINATE_LIMIT:"limit",DEFAULT_VALUE_PAGINATE_SKIP:0,DEFAULT_VALUE_PAGINATE_LIMIT:10,INPUT_TRANSACTING:"trx",INPUT_AUTH_CONTEXT:"authContext"},debug$2=!1,debug$1=!1,debug$3=!1,debug$4=!1,debug_loadDirect=!1,debug$5=!1,debug$6=!1,debug$7=!1,debug$8=!1,debug$9=!1,debug$10=!1,debug$11=!1,debug$12=!1,ActionsBookshelf=Object.freeze({createItem:createItem,upsertItem:upsertItem,updateItem:updateItem,getItem:getItem,getItems:getItems,deleteItem:deleteItem,addAssociatedItems:addAssociatedItems,hasAssociatedItem:hasAssociatedItem,getAllAssociatedItems:getAllAssociatedItems,removeAssociatedItems:removeAssociatedItems,removeAllAssociatedItems:removeAllAssociatedItems}),Joint=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(classCallCheck(this,e),this.service=objectUtils.get(r,"service",null),this.serviceKey=determineServiceKeyFromService(this.service),this.server=objectUtils.get(r,"server",null),this.serverKey=determineServerKeyFromServer(this.server),this.output=objectUtils.get(r,"output","native"),this.settings=r.settings?Object.assign(defaultSettings,r.settings):defaultSettings,this.hasGenerated=!1,!this.service){throw new JointError({message:"A service must be configured to use Joint."})}if(!this.serviceKey){throw new JointError({message:"The provided service is either not recognized or not supported by Joint."})}this.prepareAuthContext=function(e){return prepareAuthContext(t,e)};var n=null;switch(this.serviceKey){case"bookshelf":n=ActionsBookshelf,this.transaction=transaction(this.service)}if(!n){var i="Could not find actions for service: "+this.serviceKey;throw new JointError({message:i})}n&&Object.keys(n).forEach(function(e){t[e]=function(r,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:""+t.output;return n[e](t.service,r,i,a)}})}return createClass(e,[{key:"setOutput",value:function(e){this.output=e}},{key:"setServer",value:function(e){this.server=e,this.serverKey=determineServerKeyFromServer(this.server)}},{key:"updateSettings",value:function(e){Object.assign(this.settings,e)}},{key:"generate",value:function(e){this.modelConfig=objectUtils.get(e,"modelConfig",null),this.methodConfig=objectUtils.get(e,"methodConfig",null),this.routeConfig=objectUtils.get(e,"routeConfig",null);var t=objectUtils.get(e,"log",!0);if(!this.service){throw new JointError({message:"A service must be configured to use: Joint.generate"})}this.modelConfig&&registerModels(this,t),this.methodConfig&&registerMethods(this,t),this.routeConfig&&buildRouter(this,t),this.hasGenerated=!0}},{key:"info",value:function(){var e=this.model?Object.keys(this.model):null,t=!!this.router,r={service:this.serviceKey,server:this.serverKey,output:this.output,settings:this.settings,api:t,models:e,methods:this.method,configs:{model:this.modelConfig,method:this.methodConfig,route:this.routeConfig}};return r}}]),e}();module.exports=Joint;
